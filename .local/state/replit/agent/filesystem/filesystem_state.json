{"file_contents":{"LOCAL_SETUP.md":{"content":"# Local Development Setup Guide\n\n## Prerequisites\n\nMake sure you have the following installed on your local machine:\n\n- **Node.js** (version 18 or later)\n- **npm** or **yarn** package manager\n- **PostgreSQL** database (version 12 or later)\n- **Git** for version control\n\n## Quick Start\n\n### 1. Download the Project\n\nYou can download the project files by:\n- Using Replit's download feature (go to Files → Download as ZIP)\n- Or cloning if you've connected to Git\n\n### 2. Install Dependencies\n\n```bash\ncd your-project-folder\nnpm install\n```\n\n### 3. Database Setup\n\n**Option A: Local PostgreSQL**\n1. Install PostgreSQL locally\n2. Create a new database:\n   ```sql\n   CREATE DATABASE tpm_automation;\n   ```\n\n**Option B: Use Neon (Recommended)**\n1. Go to https://neon.tech\n2. Create a free account\n3. Create a new database\n4. Copy the connection string\n\n### 4. Environment Variables\n\nCreate a `.env` file in the root directory:\n\n```env\n# Database\nDATABASE_URL=postgresql://username:password@localhost:5432/tpm_automation\n# Or use your Neon connection string:\n# DATABASE_URL=postgresql://user:pass@ep-xxx.us-east-1.aws.neon.tech/tpm_automation\n\n# OpenAI (for AI features)\nOPENAI_API_KEY=sk-your-openai-api-key-here\n\n# Session Secret (generate a random string)\nSESSION_SECRET=your-random-session-secret-here\n```\n\n### 5. Database Migration\n\nPush the database schema:\n\n```bash\nnpm run db:push\n```\n\n### 6. Start the Application\n\n```bash\nnpm run dev\n```\n\nThe application will be available at: `http://localhost:5000`\n\n## Project Structure\n\n```\n├── client/                 # React frontend\n│   ├── src/\n│   │   ├── components/     # UI components\n│   │   ├── pages/          # Page components\n│   │   ├── hooks/          # Custom React hooks\n│   │   └── stores/         # Zustand state management\n├── server/                 # Express backend\n│   ├── services/           # Business logic\n│   ├── db.ts              # Database connection\n│   ├── storage.ts         # Data access layer\n│   └── routes.ts          # API endpoints\n├── shared/                 # Shared types and schemas\n└── package.json           # Dependencies and scripts\n```\n\n## Available Scripts\n\n- `npm run dev` - Start development server\n- `npm run build` - Build for production\n- `npm run db:push` - Push schema changes to database\n- `npm run db:studio` - Open Drizzle Studio (database GUI)\n\n## Features Included\n\nYour TPM automation platform includes:\n\n✅ **Program Planning** - Create and manage engineering programs\n✅ **Milestone Management** - Track progress and deadlines\n✅ **Risk Management** - Identify and mitigate risks\n✅ **Dependency Tracking** - Monitor cross-team dependencies\n✅ **Adopter Support** - Track team adoption with scoring\n✅ **Escalation Workflow** - Handle issues and blockers\n✅ **Executive Reporting** - Generate management reports\n✅ **AI/NLP Features** - Powered by OpenAI for insights\n\n## Dual Mode Operation\n\nThe application supports:\n- **Test Mode**: Uses mock data for development/testing\n- **Live Mode**: Connects to real integrations (JIRA, Slack, etc.)\n\nSwitch between modes using the toggle in the application header.\n\n## Troubleshooting\n\n**Database Connection Issues:**\n- Verify your DATABASE_URL is correct\n- Ensure PostgreSQL is running\n- Check firewall settings\n\n**API Errors:**\n- Verify your OPENAI_API_KEY is valid\n- Check network connectivity\n\n**Build Errors:**\n- Delete `node_modules` and run `npm install` again\n- Ensure Node.js version is 18+\n\n## Need Help?\n\n- Check the console logs for detailed error messages\n- Review the database schema in `shared/schema.ts`\n- API endpoints are documented in `server/routes.ts`\n\n## Production Deployment\n\nFor production deployment, you can:\n1. Build the application: `npm run build`\n2. Deploy to platforms like Vercel, Netlify, or Railway\n3. Use environment variables for configuration\n4. Ensure database is properly configured for production\n\nYour TPM automation platform is enterprise-ready and can scale with your organization's needs!","size_bytes":4096},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# AI-First TPM Automation Platform\n\n## Overview\nThis is an AI-first Technical Program Manager (TPM) automation web application. It functions as an intelligent assistant, controllable via voice commands and natural language chat, offering comprehensive program management capabilities. Key features include milestone tracking, risk and dependency management, adopter support, escalations, and executive reporting, all accessed through AI interfaces. The platform is designed around the principle that AI should be the primary interface for all functionality, providing proactive analysis, smart suggestions, and daily briefings to enhance program management efficiency and insight. The business vision is to provide an intelligent, automated solution for managing complex technical programs, offering significant market potential by streamlining PMO operations.\n\n## User Preferences\nPreferred communication style: Simple, everyday language.\n\n## Recent Changes\n- **REAL-TIME DASHBOARD UPDATES IMPLEMENTED** - Dashboard now automatically updates without manual refresh when any data changes occur from any source (AI Assistant, manual actions, API calls)\n- **WEBSOCKET BROADCASTING SYSTEM** - Complete WebSocket implementation with automatic cache invalidation and visual notifications for all data modifications\n- **AI ASSISTANT DELETE OPERATIONS ENHANCED** - Fixed AI deletion commands to properly handle multiple items (\"delete three programs\") with real-time broadcast updates\n- **COMPREHENSIVE REAL-TIME COVERAGE** - All CRUD operations (create, update, delete) for programs, risks, milestones, adopters, and dependencies now trigger automatic dashboard refreshes\n- **AI-CREATED PROGRAM GAP DETECTION FIXED** - AI-created programs now automatically generate the full set of 7 missing component risks (owner, dates, objectives, KPIs, milestones, adopters) instead of appearing empty\n- **CRITICAL UX FIXES COMPLETED** - Fixed cache invalidation and chat state persistence issues for professional-grade functionality\n- **COMPREHENSIVE CACHE INVALIDATION** - AI Assistant now invalidates ALL relevant query caches ensuring dashboard updates immediately after AI creates items\n- **PERSISTENT CHAT STATE** - Chat history now persists across navigation using Zustand global state with localStorage, preventing conversation resets\n- **CHAT-FIRST INTERACTION MODEL** - Removed all automatic navigation actions; AI Assistant keeps users in chat to maintain conversation history and context\n- **COMPREHENSIVE MANY-TO-MANY LINKING SYSTEM** - Complete implementation of all cross-component relationships with proper hierarchy: projects within programs, programs linked to initiatives/platforms, with full AI Assistant support\n- **PROPER PROGRAM/PROJECT HIERARCHY** - Clear distinction between programs (containers) and projects (components within programs), with AI Assistant enforcing correct relationships\n- **Complete Action Parity** - AI Assistant can now perform ALL actions that users can perform manually, making it the primary interface for platform interaction\n- **Advanced Component Creation** - Full support for creating programs, projects, initiatives, platforms, risks, milestones, adopters, and dependencies through natural language\n- **Enhanced Pattern Matching** - AI correctly recognizes \"create\", \"add\", and \"link\" commands with intelligent name extraction and proper component differentiation\n- **Real-time System Integration** - AI Assistant creates/updates/deletes actual database entries, manages many-to-many relationships, and maintains conversation context\n- **Voice and Text Command Support** - Full functionality through both text chat and voice commands with complete enum validation fixes\n\n## System Architecture\n\n### AI-First Design Philosophy\nThe platform prioritizes AI as the primary interaction method, enabling:\n- **Voice Commands**: For creating programs, milestones, risks, and dependencies.\n- **Chat Interface**: For inquiries, insights, and proactive recommendations.\n- **Proactive Analysis**: Automatic identification of risks, gaps, and improvement opportunities.\n- **Smart Suggestions**: Continuous AI-powered recommendations.\n- **Daily Briefings**: Automated daily summaries with priorities and alerts.\n\n### Frontend\n- **Framework**: React 18 with TypeScript.\n- **Routing**: Wouter.\n- **State Management**: Zustand (global app state) and TanStack Query (server state).\n- **UI Components**: Radix UI primitives with shadcn/ui design system.\n- **Styling**: Tailwind CSS with a custom TPM-specific color palette.\n- **Build Tool**: Vite.\n\n### Backend\n- **Runtime**: Node.js with Express.js.\n- **Language**: TypeScript with ES modules.\n- **Database ORM**: Drizzle ORM with PostgreSQL dialect.\n- **Session Management**: Express sessions with PostgreSQL store.\n- **API Integration**: OpenAI GPT-4o for AI features.\n- **Real-time**: Native WebSocket server.\n\n### Database Schema\nA comprehensive PostgreSQL schema supports hierarchical entities:\n- **Initiatives**: High-level strategic objectives.\n- **Programs**: Main program entities containing projects.\n- **Projects**: Project entities belonging to programs.\n- **Mappings**: Many-to-many relationships for initiatives, programs, and projects.\n- **Milestones**: With PMP phase classification.\n- **Risks**: With PMP categories and program/project associations.\n- **Stakeholders**: With leadership style and communication preference tracking.\n- **Stakeholder Interactions**: Predictive response modeling.\n- **PMP Recommendations**: Best practice suggestions based on PMI standards.\n- **Dependencies**: Cross-program/milestone dependencies.\n- **Adopters**: Team adoption tracking.\n- **Escalations**: Issue escalation management.\n- **Integrations**: Third-party tool configurations.\n- **Reports**: Storage for generated executive reports.\n\n### Key Features and Design Decisions\n- **Dual Mode Operation**: `Test Mode` (mock data, simulated integrations) and `Live Mode` (real external services).\n- **Intelligent Risk Management**: Automatic gap detection creates risks for missing components, timeline issues, dependency blocks, and resource problems. JIRA integration ready for Live mode risk import.\n- **Dashboard System**: Real-time metrics, risk heatmap, program timeline, active risks table, adopter readiness dashboard, and AI-powered insights.\n- **Comprehensive Risk Analytics**: Full risk management dashboard with severity/status filtering, manual risk creation, detailed tracking, and PMP category classification.\n- **UI Component System**: Consistent design via shadcn/ui, responsive layout, modal system, toast notifications, and React Hook Form with Zod validation.\n- **Data Flow**: Frontend uses TanStack Query for API requests, Express server handles requests, Drizzle ORM for database operations, and WebSockets for real-time updates. State management uses Zustand for global state, TanStack Query for server state, and React Hook Form for form state.\n- **Architectural Focus**: Highly modular and extensible design with clear separation between test and live environments, comprehensive error handling, and a robust type system.\n\n## External Dependencies\n\n### Core Dependencies\n- **Database**: Neon serverless PostgreSQL.\n- **AI Service**: OpenAI GPT-4o.\n- **UI Library**: Radix UI.\n- **Styling**: Tailwind CSS.\n\n### Integration Dependencies (Live Mode)\n- **JIRA**: Project management and issue tracking.\n- **Slack/Teams**: Communication and notifications.\n- **Smartsheet**: Project planning and tracking.\n- **Confluence**: Documentation management.","size_bytes":7537},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2627},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });","size_bytes":482},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2066},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { \n  insertPlatformSchema,\n  insertProgramSchema,\n  insertMilestoneSchema,\n  insertMilestoneStepSchema,\n  insertJiraBepicSchema,\n  insertJiraEpicSchema,\n  insertJiraStorySchema,\n  insertProgramPhaseSchema,\n  insertPhaseStageSchema,\n  insertRiskSchema,\n  insertDependencySchema,\n  insertAdopterSchema,\n  insertEscalationSchema,\n  insertIntegrationSchema,\n  insertReportSchema,\n  insertInitiativeSchema,\n  insertProjectSchema,\n  type Program,\n  type Project\n} from \"@shared/schema\";\nimport { aiService } from \"./services/ai\";\nimport { integrationService } from \"./services/integrations\";\nimport { WebSocketServer, WebSocket } from \"ws\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Dashboard metrics\n  app.get(\"/api/dashboard/metrics\", async (req, res) => {\n    try {\n      const metrics = await storage.getDashboardMetrics();\n      res.json(metrics);\n    } catch (error) {\n      console.error(\"Error fetching dashboard metrics:\", error);\n      res.status(500).json({ message: \"Failed to fetch dashboard metrics\" });\n    }\n  });\n\n  // Platform routes\n  app.get(\"/api/platforms\", async (req, res) => {\n    try {\n      const platforms = await storage.getPlatforms();\n      res.json(platforms);\n    } catch (error) {\n      console.error(\"Error fetching platforms:\", error);\n      res.status(500).json({ message: \"Failed to fetch platforms\" });\n    }\n  });\n\n  app.get(\"/api/platforms/:id\", async (req, res) => {\n    try {\n      const platform = await storage.getPlatform(req.params.id);\n      if (!platform) {\n        return res.status(404).json({ message: \"Platform not found\" });\n      }\n      res.json(platform);\n    } catch (error) {\n      console.error(\"Error fetching platform:\", error);\n      res.status(500).json({ message: \"Failed to fetch platform\" });\n    }\n  });\n\n  app.post(\"/api/platforms\", async (req, res) => {\n    try {\n      const validatedData = insertPlatformSchema.parse(req.body);\n      const platform = await storage.createPlatform(validatedData);\n      res.status(201).json(platform);\n    } catch (error) {\n      console.error(\"Error creating platform:\", error);\n      res.status(400).json({ message: \"Failed to create platform\" });\n    }\n  });\n\n  app.patch(\"/api/platforms/:id\", async (req, res) => {\n    try {\n      const validatedData = insertPlatformSchema.partial().parse(req.body);\n      const platform = await storage.updatePlatform(req.params.id, validatedData);\n      res.json(platform);\n    } catch (error) {\n      console.error(\"Error updating platform:\", error);\n      res.status(400).json({ message: \"Failed to update platform\" });\n    }\n  });\n\n  app.delete(\"/api/platforms/:id\", async (req, res) => {\n    try {\n      await storage.deletePlatform(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting platform:\", error);\n      res.status(500).json({ message: \"Failed to delete platform\" });\n    }\n  });\n\n  // Initiative routes \n  app.get(\"/api/initiatives\", async (req, res) => {\n    try {\n      const initiatives = await storage.getInitiatives();\n      res.json(initiatives);\n    } catch (error) {\n      console.error(\"Error fetching initiatives:\", error);\n      res.status(500).json({ message: \"Failed to fetch initiatives\" });\n    }\n  });\n\n  // Program routes\n  app.get(\"/api/programs\", async (req, res) => {\n    try {\n      const programs = await storage.getPrograms();\n      res.json(programs);\n    } catch (error) {\n      console.error(\"Error fetching programs:\", error);\n      res.status(500).json({ message: \"Failed to fetch programs\" });\n    }\n  });\n\n  app.get(\"/api/programs/:id\", async (req, res) => {\n    try {\n      const program = await storage.getProgram(req.params.id);\n      if (!program) {\n        return res.status(404).json({ message: \"Program not found\" });\n      }\n      res.json(program);\n    } catch (error) {\n      console.error(\"Error fetching program:\", error);\n      res.status(500).json({ message: \"Failed to fetch program\" });\n    }\n  });\n\n  app.post(\"/api/programs\", async (req, res) => {\n    try {\n      const validatedData = insertProgramSchema.parse(req.body);\n      const program = await storage.createProgram(validatedData);\n      \n      // Broadcast real-time update\n      (app as any).broadcast('data_changed', { type: 'program_created', data: program });\n      \n      res.status(201).json(program);\n    } catch (error) {\n      console.error(\"Error creating program:\", error);\n      res.status(400).json({ message: \"Failed to create program\" });\n    }\n  });\n\n  app.put(\"/api/programs/:id\", async (req, res) => {\n    try {\n      const validatedData = insertProgramSchema.partial().parse(req.body);\n      const program = await storage.updateProgram(req.params.id, validatedData);\n      \n      // Broadcast real-time update\n      (app as any).broadcast('data_changed', { type: 'program_updated', data: program });\n      \n      res.json(program);\n    } catch (error) {\n      console.error(\"Error updating program:\", error);\n      res.status(400).json({ message: \"Failed to update program\" });\n    }\n  });\n\n  app.delete(\"/api/programs/:id\", async (req, res) => {\n    try {\n      await storage.deleteProgram(req.params.id);\n      \n      // Broadcast real-time update\n      (app as any).broadcast('data_changed', { type: 'program_deleted', data: { id: req.params.id } });\n      \n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting program:\", error);\n      res.status(500).json({ message: \"Failed to delete program\" });\n    }\n  });\n\n  // Generate missing component risks for a program\n  app.post(\"/api/programs/:id/generate-missing-risks\", async (req, res) => {\n    try {\n      await (storage as any).generateMissingComponentRisks(req.params.id);\n      res.json({ message: \"Missing component risks generated successfully\" });\n    } catch (error) {\n      console.error(\"Error generating missing component risks:\", error);\n      res.status(500).json({ message: \"Failed to generate missing component risks\" });\n    }\n  });\n\n  // Generate missing component risks for ALL programs\n  app.post(\"/api/programs/generate-all-missing-risks\", async (req, res) => {\n    try {\n      const programs = await storage.getPrograms();\n      for (const program of programs) {\n        await (storage as any).generateMissingComponentRisks(program.id);\n      }\n      res.json({ \n        message: \"Missing component risks generated for all programs\",\n        programCount: programs.length \n      });\n    } catch (error) {\n      console.error(\"Error generating missing component risks for all programs:\", error);\n      res.status(500).json({ message: \"Failed to generate missing component risks for all programs\" });\n    }\n  });\n\n  // Comprehensive gap detection for a program\n  app.post(\"/api/programs/:id/detect-gaps\", async (req, res) => {\n    try {\n      await (storage as any).detectAllProgramGaps(req.params.id);\n      res.json({ message: \"Comprehensive gap detection completed\" });\n    } catch (error) {\n      console.error(\"Error detecting gaps:\", error);\n      res.status(500).json({ message: \"Failed to detect gaps\" });\n    }\n  });\n\n  // Import risks from JIRA (Live mode)\n  app.post(\"/api/programs/:id/import-jira-risks\", async (req, res) => {\n    try {\n      const risks = await (storage as any).importJiraRisks(req.params.id);\n      res.json({ \n        message: \"JIRA risks imported successfully\",\n        risksImported: risks.length,\n        risks \n      });\n    } catch (error) {\n      console.error(\"Error importing JIRA risks:\", error);\n      res.status(500).json({ message: \"Failed to import JIRA risks\" });\n    }\n  });\n\n  // Comprehensive gap detection for ALL programs\n  app.post(\"/api/programs/detect-all-gaps\", async (req, res) => {\n    try {\n      const programs = await storage.getPrograms();\n      for (const program of programs) {\n        await (storage as any).detectAllProgramGaps(program.id);\n      }\n      res.json({ \n        message: \"Comprehensive gap detection completed for all programs\",\n        programCount: programs.length \n      });\n    } catch (error) {\n      console.error(\"Error detecting gaps for all programs:\", error);\n      res.status(500).json({ message: \"Failed to detect gaps for all programs\" });\n    }\n  });\n\n  // Milestone routes\n  app.get(\"/api/milestones\", async (req, res) => {\n    try {\n      const { programId } = req.query;\n      const milestones = await storage.getMilestones(programId as string);\n      res.json(milestones);\n    } catch (error) {\n      console.error(\"Error fetching milestones:\", error);\n      res.status(500).json({ message: \"Failed to fetch milestones\" });\n    }\n  });\n\n  app.post(\"/api/milestones\", async (req, res) => {\n    try {\n      const validatedData = insertMilestoneSchema.parse(req.body);\n      const milestone = await storage.createMilestone(validatedData);\n      \n      // Broadcast real-time update\n      (app as any).broadcast('data_changed', { type: 'milestone_created', data: milestone });\n      \n      // If Live mode and JIRA integration is configured, push to JIRA\n      if (req.body.pushToJira) {\n        try {\n          const jiraEpicKey = await integrationService.pushMilestoneToJira(milestone);\n          await storage.updateMilestone(milestone.id, { jiraEpicKey });\n        } catch (jiraError) {\n          console.error(\"Error pushing milestone to JIRA:\", jiraError);\n        }\n      }\n      \n      res.status(201).json(milestone);\n    } catch (error) {\n      console.error(\"Error creating milestone:\", error);\n      res.status(400).json({ message: \"Failed to create milestone\" });\n    }\n  });\n\n  // Milestone Step routes\n  app.get(\"/api/milestone-steps\", async (req, res) => {\n    try {\n      const { milestoneId } = req.query;\n      const steps = await storage.getMilestoneSteps(milestoneId as string);\n      res.json(steps);\n    } catch (error) {\n      console.error(\"Error fetching milestone steps:\", error);\n      res.status(500).json({ message: \"Failed to fetch milestone steps\" });\n    }\n  });\n\n  app.post(\"/api/milestone-steps\", async (req, res) => {\n    try {\n      const validatedData = insertMilestoneStepSchema.parse(req.body);\n      const step = await storage.createMilestoneStep(validatedData);\n      res.status(201).json(step);\n    } catch (error) {\n      console.error(\"Error creating milestone step:\", error);\n      res.status(400).json({ message: \"Failed to create milestone step\" });\n    }\n  });\n\n  app.patch(\"/api/milestone-steps/:id\", async (req, res) => {\n    try {\n      const validatedData = insertMilestoneStepSchema.partial().parse(req.body);\n      const step = await storage.updateMilestoneStep(req.params.id, validatedData);\n      res.json(step);\n    } catch (error) {\n      console.error(\"Error updating milestone step:\", error);\n      res.status(400).json({ message: \"Failed to update milestone step\" });\n    }\n  });\n\n  app.delete(\"/api/milestone-steps/:id\", async (req, res) => {\n    try {\n      await storage.deleteMilestoneStep(req.params.id);\n      res.status(204).send();\n    } catch (error) {\n      console.error(\"Error deleting milestone step:\", error);\n      res.status(500).json({ message: \"Failed to delete milestone step\" });\n    }\n  });\n\n  // JIRA Bepic routes\n  app.get(\"/api/jira-bepics\", async (req, res) => {\n    try {\n      const { stepId } = req.query;\n      const bepics = await storage.getJiraBepics(stepId as string);\n      res.json(bepics);\n    } catch (error) {\n      console.error(\"Error fetching JIRA bepics:\", error);\n      res.status(500).json({ message: \"Failed to fetch JIRA bepics\" });\n    }\n  });\n\n  app.post(\"/api/jira-bepics\", async (req, res) => {\n    try {\n      const validatedData = insertJiraBepicSchema.parse(req.body);\n      const bepic = await storage.createJiraBepic(validatedData);\n      res.status(201).json(bepic);\n    } catch (error) {\n      console.error(\"Error creating JIRA bepic:\", error);\n      res.status(400).json({ message: \"Failed to create JIRA bepic\" });\n    }\n  });\n\n  app.patch(\"/api/jira-bepics/:id\", async (req, res) => {\n    try {\n      const validatedData = insertJiraBepicSchema.partial().parse(req.body);\n      const bepic = await storage.updateJiraBepic(req.params.id, validatedData);\n      res.json(bepic);\n    } catch (error) {\n      console.error(\"Error updating JIRA bepic:\", error);\n      res.status(400).json({ message: \"Failed to update JIRA bepic\" });\n    }\n  });\n\n  // JIRA Epic routes\n  app.get(\"/api/jira-epics\", async (req, res) => {\n    try {\n      const { bepicId } = req.query;\n      const epics = await storage.getJiraEpics(bepicId as string);\n      res.json(epics);\n    } catch (error) {\n      console.error(\"Error fetching JIRA epics:\", error);\n      res.status(500).json({ message: \"Failed to fetch JIRA epics\" });\n    }\n  });\n\n  app.post(\"/api/jira-epics\", async (req, res) => {\n    try {\n      const validatedData = insertJiraEpicSchema.parse(req.body);\n      const epic = await storage.createJiraEpic(validatedData);\n      res.status(201).json(epic);\n    } catch (error) {\n      console.error(\"Error creating JIRA epic:\", error);\n      res.status(400).json({ message: \"Failed to create JIRA epic\" });\n    }\n  });\n\n  app.patch(\"/api/jira-epics/:id\", async (req, res) => {\n    try {\n      const validatedData = insertJiraEpicSchema.partial().parse(req.body);\n      const epic = await storage.updateJiraEpic(req.params.id, validatedData);\n      res.json(epic);\n    } catch (error) {\n      console.error(\"Error updating JIRA epic:\", error);\n      res.status(400).json({ message: \"Failed to update JIRA epic\" });\n    }\n  });\n\n  // JIRA Story routes\n  app.get(\"/api/jira-stories\", async (req, res) => {\n    try {\n      const { epicId } = req.query;\n      const stories = await storage.getJiraStories(epicId as string);\n      res.json(stories);\n    } catch (error) {\n      console.error(\"Error fetching JIRA stories:\", error);\n      res.status(500).json({ message: \"Failed to fetch JIRA stories\" });\n    }\n  });\n\n  app.post(\"/api/jira-stories\", async (req, res) => {\n    try {\n      const validatedData = insertJiraStorySchema.parse(req.body);\n      const story = await storage.createJiraStory(validatedData);\n      res.status(201).json(story);\n    } catch (error) {\n      console.error(\"Error creating JIRA story:\", error);\n      res.status(400).json({ message: \"Failed to create JIRA story\" });\n    }\n  });\n\n  app.patch(\"/api/jira-stories/:id\", async (req, res) => {\n    try {\n      const validatedData = insertJiraStorySchema.partial().parse(req.body);\n      const story = await storage.updateJiraStory(req.params.id, validatedData);\n      res.json(story);\n    } catch (error) {\n      console.error(\"Error updating JIRA story:\", error);\n      res.status(400).json({ message: \"Failed to update JIRA story\" });\n    }\n  });\n\n  // Program Phase routes\n  app.get(\"/api/program-phases\", async (req, res) => {\n    try {\n      const { programId, projectId } = req.query;\n      const phases = await storage.getProgramPhases(programId as string, projectId as string);\n      res.json(phases);\n    } catch (error) {\n      console.error(\"Error fetching program phases:\", error);\n      res.status(500).json({ message: \"Failed to fetch program phases\" });\n    }\n  });\n\n  app.post(\"/api/program-phases\", async (req, res) => {\n    try {\n      const validatedData = insertProgramPhaseSchema.parse(req.body);\n      const phase = await storage.createProgramPhase(validatedData);\n      res.status(201).json(phase);\n    } catch (error) {\n      console.error(\"Error creating program phase:\", error);\n      res.status(400).json({ message: \"Failed to create program phase\" });\n    }\n  });\n\n  app.patch(\"/api/program-phases/:id\", async (req, res) => {\n    try {\n      const validatedData = insertProgramPhaseSchema.partial().parse(req.body);\n      const phase = await storage.updateProgramPhase(req.params.id, validatedData);\n      res.json(phase);\n    } catch (error) {\n      console.error(\"Error updating program phase:\", error);\n      res.status(400).json({ message: \"Failed to update program phase\" });\n    }\n  });\n\n  // Phase Stage routes\n  app.get(\"/api/phase-stages\", async (req, res) => {\n    try {\n      const { programPhaseId } = req.query;\n      const stages = await storage.getPhaseStages(programPhaseId as string);\n      res.json(stages);\n    } catch (error) {\n      console.error(\"Error fetching phase stages:\", error);\n      res.status(500).json({ message: \"Failed to fetch phase stages\" });\n    }\n  });\n\n  app.post(\"/api/phase-stages\", async (req, res) => {\n    try {\n      const validatedData = insertPhaseStageSchema.parse(req.body);\n      const stage = await storage.createPhaseStage(validatedData);\n      res.status(201).json(stage);\n    } catch (error) {\n      console.error(\"Error creating phase stage:\", error);\n      res.status(400).json({ message: \"Failed to create phase stage\" });\n    }\n  });\n\n  app.patch(\"/api/phase-stages/:id\", async (req, res) => {\n    try {\n      const validatedData = insertPhaseStageSchema.partial().parse(req.body);\n      const stage = await storage.updatePhaseStage(req.params.id, validatedData);\n      res.json(stage);\n    } catch (error) {\n      console.error(\"Error updating phase stage:\", error);\n      res.status(400).json({ message: \"Failed to update phase stage\" });\n    }\n  });\n\n  // Risk routes\n  app.get(\"/api/risks\", async (req, res) => {\n    try {\n      const { programId } = req.query;\n      const risks = await storage.getRisks(programId as string);\n      res.json(risks);\n    } catch (error) {\n      console.error(\"Error fetching risks:\", error);\n      res.status(500).json({ message: \"Failed to fetch risks\" });\n    }\n  });\n\n  app.post(\"/api/risks\", async (req, res) => {\n    try {\n      const validatedData = insertRiskSchema.parse(req.body);\n      \n      // Calculate AI risk score\n      if (validatedData.description) {\n        try {\n          const aiScore = await aiService.calculateRiskScore(validatedData.description);\n          validatedData.aiScore = aiScore.toString();\n        } catch (aiError) {\n          console.error(\"Error calculating AI risk score:\", aiError);\n        }\n      }\n      \n      const risk = await storage.createRisk(validatedData);\n      \n      // Broadcast real-time update\n      (app as any).broadcast('data_changed', { type: 'risk_created', data: risk });\n      \n      // If Live mode and JIRA integration is configured, push to JIRA\n      if (req.body.pushToJira) {\n        try {\n          const jiraIssueKey = await integrationService.pushRiskToJira(risk);\n          await storage.updateRisk(risk.id, { jiraIssueKey });\n        } catch (jiraError) {\n          console.error(\"Error pushing risk to JIRA:\", jiraError);\n        }\n      }\n      \n      res.status(201).json(risk);\n    } catch (error) {\n      console.error(\"Error creating risk:\", error);\n      res.status(400).json({ message: \"Failed to create risk\" });\n    }\n  });\n\n  // Dependency routes\n  app.get(\"/api/dependencies\", async (req, res) => {\n    try {\n      const { programId } = req.query;\n      const dependencies = await storage.getDependencies(programId as string);\n      res.json(dependencies);\n    } catch (error) {\n      console.error(\"Error fetching dependencies:\", error);\n      res.status(500).json({ message: \"Failed to fetch dependencies\" });\n    }\n  });\n\n  app.post(\"/api/dependencies\", async (req, res) => {\n    try {\n      const validatedData = insertDependencySchema.parse(req.body);\n      const dependency = await storage.createDependency(validatedData);\n      res.status(201).json(dependency);\n    } catch (error) {\n      console.error(\"Error creating dependency:\", error);\n      res.status(400).json({ message: \"Failed to create dependency\" });\n    }\n  });\n\n  // Adopter routes\n  app.get(\"/api/adopters\", async (req, res) => {\n    try {\n      const { programId } = req.query;\n      const adopters = await storage.getAdopters(programId as string);\n      res.json(adopters);\n    } catch (error) {\n      console.error(\"Error fetching adopters:\", error);\n      res.status(500).json({ message: \"Failed to fetch adopters\" });\n    }\n  });\n\n  app.post(\"/api/adopters\", async (req, res) => {\n    try {\n      const validatedData = insertAdopterSchema.parse(req.body);\n      const adopter = await storage.createAdopter(validatedData);\n      res.status(201).json(adopter);\n    } catch (error) {\n      console.error(\"Error creating adopter:\", error);\n      res.status(400).json({ message: \"Failed to create adopter\" });\n    }\n  });\n\n  // Escalation routes\n  app.get(\"/api/escalations\", async (req, res) => {\n    try {\n      const { programId } = req.query;\n      const escalations = await storage.getEscalations(programId as string);\n      res.json(escalations);\n    } catch (error) {\n      console.error(\"Error fetching escalations:\", error);\n      res.status(500).json({ message: \"Failed to fetch escalations\" });\n    }\n  });\n\n  app.post(\"/api/escalations\", async (req, res) => {\n    try {\n      const validatedData = insertEscalationSchema.parse(req.body);\n      const escalation = await storage.createEscalation(validatedData);\n      \n      // Send escalation to configured channels\n      if (escalation.sendToSlack || escalation.sendToTeams || escalation.sendToEmail) {\n        try {\n          await integrationService.sendEscalation(escalation);\n        } catch (sendError) {\n          console.error(\"Error sending escalation:\", sendError);\n        }\n      }\n      \n      res.status(201).json(escalation);\n    } catch (error) {\n      console.error(\"Error creating escalation:\", error);\n      res.status(400).json({ message: \"Failed to create escalation\" });\n    }\n  });\n\n  // Integration routes\n  app.get(\"/api/integrations\", async (req, res) => {\n    try {\n      const integrations = await storage.getIntegrations();\n      res.json(integrations);\n    } catch (error) {\n      console.error(\"Error fetching integrations:\", error);\n      res.status(500).json({ message: \"Failed to fetch integrations\" });\n    }\n  });\n\n  app.post(\"/api/integrations\", async (req, res) => {\n    try {\n      const validatedData = insertIntegrationSchema.parse(req.body);\n      const integration = await storage.createIntegration(validatedData);\n      res.status(201).json(integration);\n    } catch (error) {\n      console.error(\"Error creating integration:\", error);\n      res.status(400).json({ message: \"Failed to create integration\" });\n    }\n  });\n\n  app.put(\"/api/integrations/:name\", async (req, res) => {\n    try {\n      const validatedData = insertIntegrationSchema.partial().parse(req.body);\n      const integration = await storage.updateIntegration(req.params.name, validatedData);\n      res.json(integration);\n    } catch (error) {\n      console.error(\"Error updating integration:\", error);\n      res.status(400).json({ message: \"Failed to update integration\" });\n    }\n  });\n\n  // AI routes\n  app.post(\"/api/ai/summarize\", async (req, res) => {\n    try {\n      const { text } = req.body;\n      if (!text) {\n        return res.status(400).json({ message: \"Text is required\" });\n      }\n      \n      const summary = await aiService.summarizeText(text);\n      res.json({ summary });\n    } catch (error) {\n      console.error(\"Error summarizing text:\", error);\n      res.status(500).json({ message: \"Failed to summarize text\" });\n    }\n  });\n\n  app.post(\"/api/ai/extract-actions\", async (req, res) => {\n    try {\n      const { text } = req.body;\n      if (!text) {\n        return res.status(400).json({ message: \"Text is required\" });\n      }\n      \n      const actions = await aiService.extractActionItems(text);\n      res.json({ actions });\n    } catch (error) {\n      console.error(\"Error extracting action items:\", error);\n      res.status(500).json({ message: \"Failed to extract action items\" });\n    }\n  });\n\n  app.post(\"/api/ai/predict-delays\", async (req, res) => {\n    try {\n      const { programId } = req.body;\n      if (!programId) {\n        return res.status(400).json({ message: \"Program ID is required\" });\n      }\n      \n      const predictions = await aiService.predictMilestoneDelays(programId);\n      res.json(predictions);\n    } catch (error) {\n      console.error(\"Error predicting delays:\", error);\n      res.status(500).json({ message: \"Failed to predict delays\" });\n    }\n  });\n\n  // AI-FIRST routes for voice and chat interface\n  app.post(\"/api/ai/voice-command\", async (req, res) => {\n    try {\n      const { input } = req.body;\n      const result = await aiService.processVoiceCommand(input);\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error processing voice command:\", error);\n      res.status(500).json({ message: \"Failed to process voice command\" });\n    }\n  });\n\n  app.post(\"/api/ai/chat\", async (req, res) => {\n    try {\n      const { message, context } = req.body;\n      const response = await aiService.chatWithAI(message, context);\n      res.json({ response });\n    } catch (error) {\n      console.error(\"Error in AI chat:\", error);\n      res.status(500).json({ message: \"Failed to process chat message\" });\n    }\n  });\n\n  app.get(\"/api/ai/daily-briefing\", async (req, res) => {\n    try {\n      const briefing = await aiService.generateDailyBriefing();\n      res.json(briefing);\n    } catch (error) {\n      console.error(\"Error generating daily briefing:\", error);\n      res.status(500).json({ message: \"Failed to generate briefing\" });\n    }\n  });\n\n  // Direct program analysis (no AI required)\n  app.post(\"/api/analyze-program\", async (req, res) => {\n    try {\n      const { programId } = req.body;\n      \n      // If no programId provided, analyze all programs\n      let programs: Program[];\n      if (programId) {\n        const program = await storage.getProgram(programId);\n        programs = program ? [program] : [];\n      } else {\n        programs = await storage.getPrograms();\n      }\n      const results = [];\n\n      for (const program of programs) {\n        // Get all related components\n        const milestones = await storage.getMilestones(program.id);\n        const risks = await storage.getRisks(program.id);\n        const dependencies = await storage.getDependencies(program.id);\n        const adopters = await storage.getAdopters(program.id);\n        const projects = await storage.getProjects(program.id);\n\n        // Identify missing components and create risk alerts\n        const missingComponents = [];\n        const riskAlerts = [];\n\n        if (milestones.length === 0) {\n          missingComponents.push(\"milestones\");\n          riskAlerts.push({\n            type: \"missing_component\",\n            severity: \"high\",\n            title: \"No Milestones Defined\",\n            description: `Program \"${program.name}\" has no milestones, making it impossible to track progress and deadlines.`,\n            recommendation: \"Define key milestones with dates to establish clear deliverables and timeline expectations.\"\n          });\n        }\n\n        if (risks.length === 0) {\n          missingComponents.push(\"risks\");\n          riskAlerts.push({\n            type: \"missing_component\", \n            severity: \"high\",\n            title: \"No Risk Assessment\",\n            description: `Program \"${program.name}\" has no identified risks, leaving potential issues unmanaged.`,\n            recommendation: \"Conduct risk assessment to identify, analyze, and plan mitigation strategies for potential program threats.\"\n          });\n        }\n\n        if (dependencies.length === 0) {\n          missingComponents.push(\"dependencies\");\n          riskAlerts.push({\n            type: \"missing_component\",\n            severity: \"medium\", \n            title: \"No Dependencies Tracked\",\n            description: `Program \"${program.name}\" has no documented dependencies, which could lead to coordination issues.`,\n            recommendation: \"Identify and document dependencies between teams, systems, and external factors.\"\n          });\n        }\n\n        if (adopters.length === 0) {\n          missingComponents.push(\"adopters\");\n          riskAlerts.push({\n            type: \"missing_component\",\n            severity: \"medium\",\n            title: \"No Adopter Tracking\",\n            description: `Program \"${program.name}\" has no adopter readiness tracking, risking poor change management.`,\n            recommendation: \"Define adopter teams and track their readiness to ensure successful program adoption.\"\n          });\n        }\n\n        if (projects.length === 0) {\n          missingComponents.push(\"projects\");\n          riskAlerts.push({\n            type: \"missing_component\",\n            severity: \"high\",\n            title: \"No Projects Defined\", \n            description: `Program \"${program.name}\" has no projects, making execution unclear.`,\n            recommendation: \"Break down the program into specific projects with defined scope and deliverables.\"\n          });\n        }\n\n        // Check for missing program details\n        if (!program.startDate) {\n          missingComponents.push(\"start_date\");\n          riskAlerts.push({\n            type: \"missing_detail\",\n            severity: \"medium\",\n            title: \"Missing Start Date\",\n            description: `Program \"${program.name}\" has no start date defined.`,\n            recommendation: \"Define a clear start date to establish timeline expectations.\"\n          });\n        }\n\n        if (!program.endDate) {\n          missingComponents.push(\"end_date\");\n          riskAlerts.push({\n            type: \"missing_detail\",\n            severity: \"medium\",\n            title: \"Missing End Date\",\n            description: `Program \"${program.name}\" has no end date defined.`,\n            recommendation: \"Define a target end date to establish completion timeline.\"\n          });\n        }\n\n        if (!program.ownerId) {\n          missingComponents.push(\"owner\");\n          riskAlerts.push({\n            type: \"missing_detail\",\n            severity: \"high\",\n            title: \"No Owner Assigned\",\n            description: `Program \"${program.name}\" has no owner assigned.`,\n            recommendation: \"Assign a program owner to ensure accountability and decision-making authority.\"\n          });\n        }\n\n        if (!program.description || program.description.trim().length < 10) {\n          missingComponents.push(\"description\");\n          riskAlerts.push({\n            type: \"missing_detail\",\n            severity: \"low\",\n            title: \"Insufficient Description\",\n            description: `Program \"${program.name}\" lacks proper description or clarification.`,\n            recommendation: \"Add comprehensive program description to clarify objectives and scope.\"\n          });\n        }\n\n        results.push({\n          programId: program.id,\n          programName: program.name,\n          missingComponents,\n          riskAlerts,\n          completenessScore: Math.round(((5 - missingComponents.length) / 5) * 100)\n        });\n      }\n\n      res.json({\n        analysis: results,\n        summary: `Analyzed ${results.length} program(s). Found ${results.reduce((sum, r) => sum + r.riskAlerts.length, 0)} risk alerts for missing components.`\n      });\n    } catch (error) {\n      console.error(\"Error analyzing program:\", error);\n      res.status(500).json({ message: \"Failed to analyze program\" });\n    }\n  });\n\n  app.post(\"/api/ai/analyze-program\", async (req, res) => {\n    try {\n      const { programId } = req.body;\n      const analysis = await aiService.analyzeProgram(programId);\n      res.json(analysis);\n    } catch (error) {\n      console.error(\"Error analyzing program:\", error);\n      res.status(500).json({ message: \"Failed to analyze program\" });\n    }\n  });\n\n  // AI Assistant endpoint for processing user requests and performing actions\n  app.post(\"/api/ai/process-request\", async (req, res) => {\n    try {\n      const { request, context } = req.body;\n      \n      if (!request || typeof request !== 'string') {\n        return res.status(400).json({ message: \"Request text is required\" });\n      }\n\n      // Parse the user request and determine what action to take\n      const requestLower = request.toLowerCase();\n      const response = {\n        message: \"\",\n        success: false,\n        createdItems: [] as any[],\n        actions: [] as any[]\n      };\n\n      // Handle delete requests first\n      if (requestLower.includes('delete') || requestLower.includes('remove')) {\n        try {\n          if (requestLower.includes('all') && requestLower.includes('program')) {\n            // Delete all programs\n            const programs = await storage.getPrograms();\n            if (programs.length === 0) {\n              response.message = \"No programs found to delete.\";\n              response.success = true;\n            } else {\n              let deletedCount = 0;\n              let errors: string[] = [];\n              \n              for (const program of programs) {\n                try {\n                  await storage.deleteProgram(program.id);\n                  deletedCount++;\n                  \n                  // Broadcast real-time update for each deleted program\n                  (app as any).broadcast('data_changed', { type: 'program_deleted', data: { id: program.id, name: program.name } });\n                } catch (error) {\n                  console.error(`Failed to delete program ${program.id}:`, error);\n                  errors.push(`Failed to delete \"${program.name}\"`);\n                }\n              }\n              \n              response.success = deletedCount > 0;\n              if (errors.length > 0) {\n                response.message = `Deleted ${deletedCount} program(s). ${errors.length} programs could not be deleted due to database constraints. ${errors.join(', ')}.`;\n              } else {\n                response.message = `Successfully deleted ${deletedCount} program(s). All programs have been removed from the system.`;\n              }\n              // Navigation removed - keep user in chat to continue conversation\n            }\n          } else if (requestLower.includes('program')) {\n            // Handle deletion of multiple recent programs\n            const programs = await storage.getPrograms();\n            if (programs.length === 0) {\n              response.message = \"No programs found to delete.\";\n              response.success = true;\n            } else {\n              let numToDelete = 1;\n              \n              // Extract number from request if specified\n              if (requestLower.includes('three') || requestLower.includes('3') || requestLower.includes('most recent')) {\n                numToDelete = 3;\n              } else if (requestLower.includes('two') || requestLower.includes('2')) {\n                numToDelete = 2;\n              } else if (requestLower.includes('four') || requestLower.includes('4')) {\n                numToDelete = 4;\n              } else if (requestLower.includes('five') || requestLower.includes('5')) {\n                numToDelete = 5;\n              } else if (requestLower.includes('all')) {\n                numToDelete = programs.length;\n              }\n              \n              // Sort programs by creation date (newest first) and take the number to delete\n              const sortedPrograms = programs.sort((a, b) => \n                new Date(b.createdAt || '').getTime() - new Date(a.createdAt || '').getTime()\n              );\n              const programsToDelete = sortedPrograms.slice(0, Math.min(numToDelete, programs.length));\n              \n              let deletedCount = 0;\n              let errors: string[] = [];\n              \n              for (const program of programsToDelete) {\n                try {\n                  await storage.deleteProgram(program.id);\n                  deletedCount++;\n                  \n                  // Broadcast real-time update for each deleted program\n                  (app as any).broadcast('data_changed', { type: 'program_deleted', data: { id: program.id, name: program.name } });\n                } catch (error) {\n                  console.error(`Failed to delete program ${program.id}:`, error);\n                  errors.push(`Failed to delete \"${program.name}\"`);\n                }\n              }\n              \n              response.success = deletedCount > 0;\n              if (errors.length > 0) {\n                response.message = `Deleted ${deletedCount} program(s). ${errors.length} programs could not be deleted due to database constraints. ${errors.join(', ')}.`;\n              } else {\n                response.message = `Successfully deleted ${deletedCount} program(s).`;\n              }\n              // Navigation removed - keep user in chat to continue conversation\n            }\n          } else if (requestLower.includes('risk')) {\n            // Delete risks\n            const risks = await storage.getRisks();\n            if (risks.length === 0) {\n              response.message = \"No risks found to delete.\";\n              response.success = true;\n            } else {\n              const riskToDelete = risks[0];\n              await storage.deleteRisk(riskToDelete.id);\n              \n              // Broadcast real-time update for deleted risk\n              (app as any).broadcast('data_changed', { type: 'risk_deleted', data: { id: riskToDelete.id, title: riskToDelete.title } });\n              \n              response.success = true;\n              response.message = `Successfully deleted risk \"${riskToDelete.title}\".`;\n            }\n          } else {\n            response.message = \"Please specify what you'd like to delete (e.g., 'delete all programs', 'delete a program', 'delete a risk').\";\n            response.success = false;\n          }\n        } catch (error) {\n          response.message = `Failed to delete: ${error}`;\n          response.success = false;\n        }\n      }\n\n      // Handle update requests\n      else if (requestLower.includes('update') || requestLower.includes('change') || requestLower.includes('modify')) {\n        try {\n          if (requestLower.includes('program') && requestLower.includes('status')) {\n            const programs = await storage.getPrograms();\n            if (programs.length === 0) {\n              response.message = \"No programs found to update.\";\n              response.success = true;\n            } else {\n              const targetProgram = programs[0];\n              const newStatus = requestLower.includes('active') ? 'active' :\n                               requestLower.includes('completed') ? 'completed' :\n                               requestLower.includes('on_hold') ? 'on_hold' : 'planning';\n              \n              const updatedProgram = await storage.updateProgram(targetProgram.id, { status: newStatus });\n              \n              // Broadcast real-time update for program status change\n              (app as any).broadcast('data_changed', { type: 'program_updated', data: updatedProgram });\n              \n              response.success = true;\n              response.message = `Successfully updated program \"${targetProgram.name}\" status to ${newStatus}.`;\n              // Navigation removed - keep user in chat to continue conversation\n            }\n          } else {\n            response.message = \"I can help update program status. Try: 'update program status to active' or 'change program status to completed'.\";\n            response.success = true;\n          }\n        } catch (error) {\n          response.message = `Failed to update: ${error}`;\n          response.success = false;\n        }\n      }\n\n      // Handle program creation requests (programs are containers for projects)\n      else if (requestLower.includes('create') && requestLower.includes('program') && !requestLower.includes('project') && !requestLower.includes('platform')) {\n        try {\n          // Extract program name from request - prioritize quoted names\n          let programName = null;\n          \n          // First check for quoted names (highest priority)\n          const quotedMatch = request.match(/\"([^\"]+)\"/);\n          if (quotedMatch) {\n            programName = quotedMatch[1];\n          } else {\n            // Then check for single quoted names\n            const singleQuotedMatch = request.match(/'([^']+)'/);\n            if (singleQuotedMatch) {\n              programName = singleQuotedMatch[1];\n            } else {\n              // Then check for named/called patterns without quotes\n              const namedMatch = request.match(/(?:called|named)\\s+([^\"'\\s].+?)(?:\\s*$)/i);\n              if (namedMatch) {\n                programName = namedMatch[1];\n              } else {\n                // Generate a name based on context\n                const programCount = context?.programCount || 0;\n                programName = `AI Created Program ${programCount + 1}`;\n              }\n            }\n          }\n\n          // Clean up the name\n          programName = programName.trim();\n\n          const programData = {\n            name: programName,\n            description: `Program created by AI Assistant based on user request: \"${request}\"`,\n            status: 'planning' as const\n          };\n\n          const validatedData = insertProgramSchema.parse(programData);\n          const newProgram = await storage.createProgram(validatedData);\n          \n          // Automatically trigger gap detection for the new program to generate missing component risks\n          try {\n            await storage.detectAllProgramGaps(newProgram.id);\n            \n            // Count the risks generated for this program\n            const programRisks = await storage.getRisks(newProgram.id);\n            const riskCount = programRisks.length;\n            \n            response.success = true;\n            response.message = `Successfully created program \"${newProgram.name}\"! This program can now contain multiple projects. Automatically generated ${riskCount} missing component risks to ensure program completeness.`;\n            response.createdItems = [{\n              type: 'program',\n              id: newProgram.id,\n              name: newProgram.name\n            }];\n          } catch (gapError) {\n            console.error('Gap detection failed for new program:', gapError);\n            // If gap detection fails, still report successful program creation\n            response.success = true;\n            response.message = `Successfully created program \"${newProgram.name}\"! This program can now contain multiple projects. Gap detection will run automatically.`;\n            response.createdItems = [{\n              type: 'program',\n              id: newProgram.id,\n              name: newProgram.name\n            }];\n          }\n          // Navigation removed - keep user in chat to continue conversation\n\n        } catch (error) {\n          response.message = `Failed to create program: ${error}`;\n          response.success = false;\n        }\n      }\n      \n      // Handle risk creation requests  \n      else if ((requestLower.includes('create') || requestLower.includes('add')) && requestLower.includes('risk')) {\n        try {\n          const programs = await storage.getPrograms();\n          if (programs.length === 0) {\n            response.message = \"No programs found. Create a program first, then I can add risks to it.\";\n            response.success = false;\n          } else {\n            // Use first program if not specified\n            const targetProgram = programs[0];\n            \n            const riskData = {\n              title: `AI Generated Risk`,\n              description: `Risk created by AI Assistant based on user request: \"${request}\"`,\n              severity: 'medium' as const,\n              impact: 3,\n              probability: 3,\n              status: 'identified' as const,\n              category: 'operational' as const,\n              programId: targetProgram.id\n            };\n\n            const validatedData = insertRiskSchema.parse(riskData);\n            const newRisk = await storage.createRisk(validatedData);\n            \n            // Broadcast real-time update for AI-created risk\n            (app as any).broadcast('data_changed', { type: 'risk_created', data: newRisk });\n            \n            response.success = true;\n            response.message = `Successfully created risk \"${newRisk.title}\" for program \"${targetProgram.name}\"!`;\n            response.createdItems = [{\n              type: 'risk',\n              id: newRisk.id,\n              name: newRisk.title\n            }];\n            // Navigation removed - keep user in chat to continue conversation\n          }\n        } catch (error) {\n          response.message = `Failed to create risk: ${error}`;\n          response.success = false;\n        }\n      }\n      \n      // Handle milestone creation requests\n      else if ((requestLower.includes('create') || requestLower.includes('add')) && requestLower.includes('milestone')) {\n        try {\n          const programs = await storage.getPrograms();\n          if (programs.length === 0) {\n            response.message = \"No programs found. Create a program first, then I can add milestones to it.\";\n            response.success = false;\n          } else {\n            const targetProgram = programs[0];\n            \n            const milestoneData = {\n              title: `AI Generated Milestone`,\n              description: `Milestone created by AI Assistant based on user request: \"${request}\"`,\n              status: 'not_started' as const,\n              programId: targetProgram.id,\n              dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // 30 days from now\n            };\n\n            const validatedData = insertMilestoneSchema.parse(milestoneData);\n            const newMilestone = await storage.createMilestone(validatedData);\n            \n            // Broadcast real-time update for AI-created milestone\n            (app as any).broadcast('data_changed', { type: 'milestone_created', data: newMilestone });\n            \n            response.success = true;\n            response.message = `Successfully created milestone \"${newMilestone.title}\" for program \"${targetProgram.name}\"!`;\n            response.createdItems = [{\n              type: 'milestone',\n              id: newMilestone.id,\n              name: newMilestone.title\n            }];\n            // Navigation removed - keep user in chat to continue conversation\n          }\n        } catch (error) {\n          response.message = `Failed to create milestone: ${error}`;\n          response.success = false;\n        }\n      }\n      \n      // Handle adopter creation requests\n      else if ((requestLower.includes('create') || requestLower.includes('add')) && (requestLower.includes('adopter') || requestLower.includes('team'))) {\n        try {\n          const programs = await storage.getPrograms();\n          if (programs.length === 0) {\n            response.message = \"No programs found. Create a program first, then I can add adopter teams to it.\";\n            response.success = false;\n          } else {\n            const targetProgram = programs[0];\n            \n            const adopterData = {\n              teamName: `AI Generated Team`,\n              department: 'IT',\n              contactPerson: 'Team Lead',\n              email: 'team@company.com',\n              onboardingStatus: 'planning' as const,\n              readinessScore: 50,\n              programId: targetProgram.id\n            };\n\n            const validatedData = insertAdopterSchema.parse(adopterData);\n            const newAdopter = await storage.createAdopter(validatedData);\n            \n            response.success = true;\n            response.message = `Successfully created adopter team \"${newAdopter.teamName}\" for program \"${targetProgram.name}\"!`;\n            response.createdItems = [{\n              type: 'adopter',\n              id: newAdopter.id,\n              name: newAdopter.teamName\n            }];\n            // Navigation removed - keep user in chat to continue conversation\n          }\n        } catch (error) {\n          response.message = `Failed to create adopter team: ${error}`;\n          response.success = false;\n        }\n      }\n      \n      // Handle dependency creation requests\n      else if ((requestLower.includes('create') || requestLower.includes('add')) && requestLower.includes('dependency')) {\n        try {\n          const programs = await storage.getPrograms();\n          if (programs.length === 0) {\n            response.message = \"No programs found. Create a program first, then I can add dependencies to it.\";\n            response.success = false;\n          } else {\n            const targetProgram = programs[0];\n            \n            const dependencyData = {\n              title: `AI Generated Dependency`,\n              description: `Dependency created by AI Assistant based on user request: \"${request}\"`,\n              type: 'external' as const,\n              status: 'blocked' as const,\n              priority: 'medium' as const,\n              programId: targetProgram.id,\n              dueDate: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000) // 14 days from now\n            };\n\n            const validatedData = insertDependencySchema.parse(dependencyData);\n            const newDependency = await storage.createDependency(validatedData);\n            \n            response.success = true;\n            response.message = `Successfully created dependency \"${newDependency.title}\" for program \"${targetProgram.name}\"!`;\n            response.createdItems = [{\n              type: 'dependency',\n              id: newDependency.id,\n              name: newDependency.title\n            }];\n            // Navigation removed - keep user in chat to continue conversation\n          }\n        } catch (error) {\n          response.message = `Failed to create dependency: ${error}`;\n          response.success = false;\n        }\n      }\n\n      // Handle project creation requests (projects are created within programs)\n      else if (requestLower.includes('create project') || requestLower.includes('add project')) {\n        try {\n          const programs = await storage.getPrograms();\n          if (programs.length === 0) {\n            response.message = \"No programs found. Projects must be created within programs. Please create a program first, then I can add projects to it.\";\n            response.success = false;\n          } else {\n            const targetProgram = programs[0];\n            \n            // Extract project name from request - prioritize quoted names\n            let projectName = null;\n            const quotedMatch = request.match(/\"([^\"]+)\"/);\n            if (quotedMatch) {\n              projectName = quotedMatch[1];\n            } else {\n              const singleQuotedMatch = request.match(/'([^']+)'/);\n              if (singleQuotedMatch) {\n                projectName = singleQuotedMatch[1];\n              } else {\n                const namedMatch = request.match(/(?:called|named)\\s+([^\"'\\s].+?)(?:\\s*$)/i);\n                if (namedMatch) {\n                  projectName = namedMatch[1];\n                } else {\n                  projectName = `AI Generated Project`;\n                }\n              }\n            }\n\n            projectName = projectName.trim();\n            \n            const projectData = {\n              name: projectName,\n              description: `Project created by AI Assistant based on user request: \"${request}\"`,\n              status: 'planning' as const,\n              programId: targetProgram.id\n            };\n\n            const validatedData = insertProjectSchema.parse(projectData);\n            const newProject = await storage.createProject(validatedData);\n            \n            response.success = true;\n            response.message = `Successfully created project \"${newProject.name}\" within program \"${targetProgram.name}\"! Projects are components that belong to programs and help achieve program objectives.`;\n            response.createdItems = [{\n              type: 'project',\n              id: newProject.id,\n              name: newProject.name\n            }];\n            // Navigation removed - keep user in chat to continue conversation\n          }\n        } catch (error) {\n          response.message = `Failed to create project: ${error}`;\n          response.success = false;\n        }\n      }\n\n      // Handle platform creation requests\n      else if ((requestLower.includes('create') || requestLower.includes('add')) && requestLower.includes('platform')) {\n        try {\n          // Extract platform name from request - prioritize quoted names\n          let platformName = null;\n          const quotedMatch = request.match(/\"([^\"]+)\"/);\n          if (quotedMatch) {\n            platformName = quotedMatch[1];\n          } else {\n            const singleQuotedMatch = request.match(/'([^']+)'/);\n            if (singleQuotedMatch) {\n              platformName = singleQuotedMatch[1];\n            } else {\n              const namedMatch = request.match(/(?:called|named)\\s+([^\"'\\s].+?)(?:\\s*$)/i);\n              if (namedMatch) {\n                platformName = namedMatch[1];\n              } else {\n                platformName = `AI Generated Platform`;\n              }\n            }\n          }\n\n          platformName = platformName.trim();\n          \n          const platformData = {\n            name: platformName,\n            description: `Platform created by AI Assistant based on user request: \"${request}\"`,\n            type: 'technology' as const,\n            status: 'active' as const\n          };\n\n          const validatedData = insertPlatformSchema.parse(platformData);\n          const newPlatform = await storage.createPlatform(validatedData);\n          \n          response.success = true;\n          response.message = `Successfully created platform \"${newPlatform.name}\"! You can now link programs to this platform.`;\n          response.createdItems = [{\n            type: 'platform',\n            id: newPlatform.id,\n            name: newPlatform.name\n          }];\n          // Navigation removed - keep user in chat to continue conversation\n        } catch (error) {\n          response.message = `Failed to create platform: ${error}`;\n          response.success = false;\n        }\n      }\n\n      // Handle initiative creation and linking requests\n      else if (requestLower.includes('create') && requestLower.includes('initiative')) {\n        try {\n          // Extract initiative name from request - prioritize quoted names\n          let initiativeName = null;\n          \n          const quotedMatch = request.match(/\"([^\"]+)\"/);\n          if (quotedMatch) {\n            initiativeName = quotedMatch[1];\n          } else {\n            const singleQuotedMatch = request.match(/'([^']+)'/);\n            if (singleQuotedMatch) {\n              initiativeName = singleQuotedMatch[1];\n            } else {\n              const namedMatch = request.match(/(?:called|named)\\s+([^\"'\\s].+?)(?:\\s*$)/i);\n              if (namedMatch) {\n                initiativeName = namedMatch[1];\n              } else {\n                initiativeName = `AI Generated Initiative`;\n              }\n            }\n          }\n\n          initiativeName = initiativeName.trim();\n\n          const initiativeData = {\n            name: initiativeName,\n            description: `Initiative created by AI Assistant based on user request: \"${request}\"`,\n            status: 'planning' as const,\n            startDate: new Date(),\n            endDate: new Date(Date.now() + 90 * 24 * 60 * 60 * 1000) // 90 days from now\n          };\n\n          const validatedData = insertInitiativeSchema.parse(initiativeData);\n          const newInitiative = await storage.createInitiative(validatedData);\n          \n          response.success = true;\n          response.message = `Successfully created initiative \"${newInitiative.name}\"! You can now link programs to this initiative.`;\n          response.createdItems = [{\n            type: 'initiative',\n            id: newInitiative.id,\n            name: newInitiative.name\n          }];\n          // Navigation removed - keep user in chat to continue conversation\n        } catch (error) {\n          response.message = `Failed to create initiative: ${error}`;\n          response.success = false;\n        }\n      }\n\n      // Handle comprehensive linking requests\n      else if (requestLower.includes('link')) {\n        try {\n          // Program to Initiative linking\n          if (requestLower.includes('program') && requestLower.includes('initiative')) {\n            const programs = await storage.getPrograms();\n            const initiatives = await storage.getInitiatives();\n            \n            if (programs.length === 0) {\n              response.message = \"No programs found to link. Create a program first.\";\n              response.success = false;\n            } else if (initiatives.length === 0) {\n              response.message = \"No initiatives found to link to. Create an initiative first.\";\n              response.success = false;\n            } else {\n              const targetProgram = programs[0];\n              const targetInitiative = initiatives[0];\n              \n              await storage.linkProgramToInitiative(targetProgram.id, targetInitiative.id);\n              \n              response.success = true;\n              response.message = `Successfully linked program \"${targetProgram.name}\" to initiative \"${targetInitiative.name}\"!`;\n              // Navigation removed - keep user in chat to continue conversation\n            }\n          }\n          \n          // Project to Initiative linking\n          else if (requestLower.includes('project') && requestLower.includes('initiative')) {\n            const projects = await storage.getProjects();\n            const initiatives = await storage.getInitiatives();\n            \n            if (projects.length === 0) {\n              response.message = \"No projects found to link. Create a project first.\";\n              response.success = false;\n            } else if (initiatives.length === 0) {\n              response.message = \"No initiatives found to link to. Create an initiative first.\";\n              response.success = false;\n            } else {\n              const targetProject = projects[0];\n              const targetInitiative = initiatives[0];\n              \n              await storage.linkProjectToInitiative(targetProject.id, targetInitiative.id);\n              \n              response.success = true;\n              response.message = `Successfully linked project \"${targetProject.name}\" to initiative \"${targetInitiative.name}\"!`;\n              // Navigation removed - keep user in chat to continue conversation\n            }\n          }\n          \n          // Program to Platform linking\n          else if (requestLower.includes('program') && requestLower.includes('platform')) {\n            const programs = await storage.getPrograms();\n            const platforms = await storage.getPlatforms();\n            \n            if (programs.length === 0) {\n              response.message = \"No programs found to link. Create a program first.\";\n              response.success = false;\n            } else if (platforms.length === 0) {\n              response.message = \"No platforms found to link to. Create a platform first.\";\n              response.success = false;\n            } else {\n              const targetProgram = programs[0];\n              const targetPlatform = platforms[0];\n              \n              await storage.linkProgramToPlatform(targetProgram.id, targetPlatform.id);\n              \n              response.success = true;\n              response.message = `Successfully linked program \"${targetProgram.name}\" to platform \"${targetPlatform.name}\"!`;\n              // Navigation removed - keep user in chat to continue conversation\n            }\n          }\n          \n          // Project to Program linking\n          else if (requestLower.includes('project') && requestLower.includes('program')) {\n            const projects = await storage.getProjects();\n            const programs = await storage.getPrograms();\n            \n            if (projects.length === 0) {\n              response.message = \"No projects found to link. Create a project first.\";\n              response.success = false;\n            } else if (programs.length === 0) {\n              response.message = \"No programs found to link to. Create a program first.\";\n              response.success = false;\n            } else {\n              const targetProject = projects[0];\n              const targetProgram = programs[0];\n              \n              await storage.linkProjectToPrograms(targetProject.id, [targetProgram.id]);\n              \n              response.success = true;\n              response.message = `Successfully linked project \"${targetProject.name}\" to program \"${targetProgram.name}\"!`;\n              // Navigation removed - keep user in chat to continue conversation\n            }\n          }\n          \n          else {\n            response.message = \"I can link: program to initiative, project to initiative, program to platform, project to program. Please specify what you'd like to link.\";\n            response.success = true;\n          }\n        } catch (error) {\n          response.message = `Failed to link components: ${error}`;\n          response.success = false;\n        }\n      }\n      \n      // Handle data analysis requests\n      else if (requestLower.includes('analyze') || requestLower.includes('report') || requestLower.includes('summary')) {\n        const programs = await storage.getPrograms();\n        const risks = await storage.getRisks();\n        const milestones = await storage.getMilestones();\n        \n        response.success = true;\n        response.message = `Analysis Summary:\n        \n📊 Current Status:\n• ${programs.length} total programs\n• ${risks.length} total risks across all programs  \n• ${milestones.length} total milestones\n• ${risks.filter(r => r.severity === 'critical' || r.severity === 'high').length} high/critical risks need attention\n\n🎯 Program Health:\n${programs.map(p => {\n  const programRisks = risks.filter(r => r.programId === p.id);\n  const programMilestones = milestones.filter(m => m.programId === p.id);\n  return `• ${p.name}: ${programRisks.length} risks, ${programMilestones.length} milestones`;\n}).join('\\n') || '• No programs to analyze'}\n\n💡 Recommendations:\n• Focus on resolving high/critical risks first\n• Ensure all programs have proper ownership and timelines\n• Track milestone progress regularly`;\n\n        // Navigation removed - keep user in chat to continue conversation\n      }\n\n\n      // Handle navigation requests - now providing information instead of navigating (but exclude reporting requests)\n      else if ((requestLower.includes('show') || requestLower.includes('go to') || requestLower.includes('navigate')) &&\n               !requestLower.includes('overdue') && !requestLower.includes('past due') && \n               !requestLower.includes('give me') && !requestLower.includes('show me')) {\n        response.success = true;\n        if (requestLower.includes('risk')) {\n          response.message = `The risk management section shows all program risks with filtering by severity and status. You can view, create, and manage risks there. I can create risks for you here in chat if you prefer!`;\n        } else if (requestLower.includes('program')) {\n          response.message = `The programs section shows all your programs with their status, progress, and associated components. I can create and manage programs for you here in chat if you prefer!`;\n        } else if (requestLower.includes('dashboard')) {\n          response.message = `The dashboard provides an overview of all programs, risks, milestones, and key metrics. I can provide analysis and summaries here in chat if you prefer!`;\n        } else {\n          response.message = `I can help you with programs, risks, milestones, dependencies, adopters, initiatives, and platforms - all through our chat here. What would you like to work on?`;\n        }\n        // Navigation removed - keep user in chat to continue conversation\n      }\n      \n      // Handle reporting and analysis requests\n      else if (requestLower.includes('how many') || requestLower.includes('count') || \n               requestLower.includes('which programs') || requestLower.includes('what programs') ||\n               requestLower.includes('report on') || requestLower.includes('status of') ||\n               requestLower.includes('show me') || requestLower.includes('give me a report')) {\n        try {\n          const programs = await storage.getPrograms();\n          const risks = await storage.getRisks();\n          const milestones = await storage.getMilestones();\n          const dependencies = await storage.getDependencies();\n          const adopters = await storage.getAdopters();\n\n          // Handle specific program report\n          if (requestLower.includes('report on') || requestLower.includes('status of')) {\n            // Extract program name from request\n            const programMatch = request.match(/(?:report on|status of)\\s+[\"']?([^\"']+?)[\"']?\\s*$/i);\n            if (programMatch) {\n              const programName = programMatch[1].trim();\n              const targetProgram = programs.find(p => \n                p.name.toLowerCase().includes(programName.toLowerCase())\n              );\n              \n              if (targetProgram) {\n                const programRisks = risks.filter(r => r.programId === targetProgram.id);\n                const programMilestones = milestones.filter(m => m.programId === targetProgram.id);\n                const programDependencies = dependencies.filter(d => d.programId === targetProgram.id);\n                const programAdopters = adopters.filter(a => a.programId === targetProgram.id);\n                \n                const overdueMilestones = programMilestones.filter(m => \n                  m.dueDate && new Date(m.dueDate) < new Date() && m.status !== 'completed'\n                );\n                \n                const highRisks = programRisks.filter(r => r.severity === 'high' || r.severity === 'critical');\n                \n                response.message = `📊 **Program Report: ${targetProgram.name}**\n\n**Status:** ${targetProgram.status}\n**Completion:** ${targetProgram.estimatedCompletionPercentage}%\n\n**Components:**\n• **Milestones:** ${programMilestones.length} total (${overdueMilestones.length} overdue)\n• **Risks:** ${programRisks.length} total (${highRisks.length} high/critical)\n• **Dependencies:** ${programDependencies.length} tracked\n• **Adopter Teams:** ${programAdopters.length} identified\n\n**Key Alerts:**\n${overdueMilestones.length > 0 ? `⚠️ ${overdueMilestones.length} overdue milestone(s)` : '✅ No overdue milestones'}\n${highRisks.length > 0 ? `🚨 ${highRisks.length} high/critical risk(s)` : '✅ No critical risks'}\n${programDependencies.length === 0 ? '⚠️ No dependencies tracked' : `✅ Dependencies managed`}\n\n**Next Actions Needed:**\n${overdueMilestones.length > 0 ? '• Review and update overdue milestone timelines' : ''}\n${highRisks.length > 0 ? '• Address high-priority risks immediately' : ''}\n${programMilestones.length === 0 ? '• Define program milestones and timeline' : ''}`;\n                \n                response.success = true;\n              } else {\n                response.message = `Program \"${programName}\" not found. Available programs: ${programs.map(p => p.name).join(', ')}`;\n                response.success = false;\n              }\n            } else {\n              response.message = \"Please specify which program you'd like a report on. Example: 'Give me a report on Project Alpha'\";\n              response.success = false;\n            }\n          }\n          \n          // Handle \"how many active programs\"\n          else if (requestLower.includes('active program')) {\n            const activePrograms = programs.filter(p => p.status === 'active');\n            response.message = `📈 **Active Programs: ${activePrograms.length}**\n\n${activePrograms.length > 0 ? \n  activePrograms.map(p => `• ${p.name} (${p.estimatedCompletionPercentage}% complete)`).join('\\n') :\n  'No active programs found.'\n}\n\n**Total Programs:** ${programs.length}\n**Breakdown by Status:**\n• Planning: ${programs.filter(p => p.status === 'planning').length}\n• Active: ${programs.filter(p => p.status === 'active').length}\n• On Hold: ${programs.filter(p => p.status === 'on_hold').length}\n• Completed: ${programs.filter(p => p.status === 'completed').length}`;\n            response.success = true;\n          }\n          \n          // Handle \"which programs have risks\"\n          else if (requestLower.includes('program') && requestLower.includes('risk')) {\n            const programsWithRisks = programs.filter(p => \n              risks.some(r => r.programId === p.id)\n            );\n            \n            response.message = `🚨 **Programs with Risks: ${programsWithRisks.length}**\n\n${programsWithRisks.map(p => {\n              const programRisks = risks.filter(r => r.programId === p.id);\n              const highRisks = programRisks.filter(r => r.severity === 'high' || r.severity === 'critical');\n              return `• **${p.name}**: ${programRisks.length} risk(s) ${highRisks.length > 0 ? `(${highRisks.length} critical)` : ''}`;\n            }).join('\\n')}\n\n**Risk Summary:**\n• Total Risks: ${risks.length}\n• High/Critical: ${risks.filter(r => r.severity === 'high' || r.severity === 'critical').length}\n• Programs without risks: ${programs.length - programsWithRisks.length}`;\n            response.success = true;\n          }\n          \n          // Handle \"which programs have dependencies\"\n          else if (requestLower.includes('program') && requestLower.includes('dependen')) {\n            const programsWithDeps = programs.filter(p => \n              dependencies.some(d => d.programId === p.id)\n            );\n            \n            response.message = `🔗 **Programs with Dependencies: ${programsWithDeps.length}**\n\n${programsWithDeps.map(p => {\n              const programDeps = dependencies.filter(d => d.programId === p.id);\n              return `• **${p.name}**: ${programDeps.length} dependenc${programDeps.length === 1 ? 'y' : 'ies'}`;\n            }).join('\\n')}\n\n**Dependency Summary:**\n• Total Dependencies: ${dependencies.length}\n• Programs without dependencies: ${programs.length - programsWithDeps.length}`;\n            response.success = true;\n          }\n          \n          // Handle \"past due milestones\" or \"overdue milestones\"\n          else if ((requestLower.includes('past due') || requestLower.includes('overdue')) && requestLower.includes('milestone')) {\n            const overdueMilestones = milestones.filter(m => \n              m.dueDate && new Date(m.dueDate) < new Date() && m.status !== 'completed'\n            );\n            \n            const programsWithOverdue = programs.filter(p => \n              overdueMilestones.some(m => m.programId === p.id)\n            );\n            \n            response.message = `⏰ **Programs with Overdue Milestones: ${programsWithOverdue.length}**\n\n${programsWithOverdue.map(p => {\n              const programOverdue = overdueMilestones.filter(m => m.programId === p.id);\n              return `• **${p.name}**: ${programOverdue.length} overdue milestone(s)`;\n            }).join('\\n')}\n\n**Overdue Milestone Details:**\n${overdueMilestones.slice(0, 5).map(m => {\n              const program = programs.find(p => p.id === m.programId);\n              const daysPast = Math.floor((new Date().getTime() - new Date(m.dueDate!).getTime()) / (1000 * 60 * 60 * 24));\n              return `• ${m.title} (${program?.name}) - ${daysPast} days overdue`;\n            }).join('\\n')}\n${overdueMilestones.length > 5 ? `\\n... and ${overdueMilestones.length - 5} more` : ''}\n\n**Total Overdue:** ${overdueMilestones.length} milestones`;\n            response.success = true;\n          }\n          \n          // Handle general \"show me\" or summary requests\n          else {\n            const activePrograms = programs.filter(p => p.status === 'active');\n            const programsWithRisks = programs.filter(p => risks.some(r => r.programId === p.id));\n            const overdueMilestones = milestones.filter(m => \n              m.dueDate && new Date(m.dueDate) < new Date() && m.status !== 'completed'\n            );\n            const highRisks = risks.filter(r => r.severity === 'high' || r.severity === 'critical');\n            \n            response.message = `📊 **System Overview Report**\n\n**Programs (${programs.length} total):**\n• Active: ${activePrograms.length}\n• Planning: ${programs.filter(p => p.status === 'planning').length}\n• Completed: ${programs.filter(p => p.status === 'completed').length}\n• On Hold: ${programs.filter(p => p.status === 'on_hold').length}\n\n**Risk Status:**\n• Programs with risks: ${programsWithRisks.length}/${programs.length}\n• Total risks: ${risks.length}\n• High/Critical risks: ${highRisks.length}\n\n**Milestones & Timeline:**\n• Total milestones: ${milestones.length}\n• Overdue milestones: ${overdueMilestones.length}\n\n**Dependencies:**\n• Total tracked: ${dependencies.length}\n\n**Adopter Teams:**\n• Total identified: ${adopters.length}\n\n**Key Alerts:**\n${overdueMilestones.length > 0 ? `⚠️ ${overdueMilestones.length} overdue milestones need attention` : '✅ No overdue milestones'}\n${highRisks.length > 0 ? `🚨 ${highRisks.length} high-priority risks need immediate action` : '✅ No critical risks'}`;\n            response.success = true;\n          }\n          \n        } catch (error) {\n          console.error('Error generating report:', error);\n          response.message = 'Failed to generate report. Please try again.';\n          response.success = false;\n        }\n      }\n      \n      // Default response for unrecognized requests\n      else {\n        response.message = `I understand you want to \"${request}\". Here's what I can help you with:\n\n🏗️ **Create Items:**\n• \"Create a new program called [name]\" (programs contain projects)\n• \"Create a project called [name]\" (projects belong within programs)\n• \"Add a risk to the program\"  \n• \"Create a milestone for the program\"\n• \"Create an adopter team for the program\"\n• \"Add a dependency to the program\"\n• \"Create an initiative called [name]\"\n• \"Create a platform called [name]\"\n\n🔗 **Link Items:**\n• \"Link program to initiative\"\n• \"Link project to initiative\"  \n• \"Link program to platform\"\n• \"Link project to program\"\n\n🗑️ **Delete Items:**\n• \"Delete all programs\"\n• \"Remove a program\"\n• \"Delete a risk\"\n\n✏️ **Update Items:**\n• \"Update program status to active\"\n• \"Change program status to completed\"\n• \"Modify program status to on hold\"\n\n📊 **Analysis & Reports:**\n• \"How many active programs are there?\"\n• \"Which programs have risks?\"\n• \"Which programs have past due milestones?\"\n• \"Give me a report on [program name]\"\n• \"Show me a summary report\"\n\n🧭 **Navigation:**\n• \"Go to the dashboard\"\n• \"Show me the risk management page\"\n• \"Navigate to programs\"\n\nTry being more specific about what you'd like me to do!`;\n        response.success = true;\n      }\n\n      res.json(response);\n    } catch (error) {\n      console.error(\"Error processing AI request:\", error);\n      res.status(500).json({ \n        message: \"Failed to process your request. Please try again.\",\n        success: false,\n        createdItems: [],\n        actions: []\n      });\n    }\n  });\n\n  // Enhanced contextual routes for all components\n  app.get(\"/api/milestones/:id/context\", async (req, res) => {\n    try {\n      const milestone = await storage.getMilestone(req.params.id);\n      if (!milestone) {\n        return res.status(404).json({ message: \"Milestone not found\" });\n      }\n\n      const program = milestone.programId ? await storage.getProgram(milestone.programId) : null;\n      const programRisks = program ? await storage.getRisks(program.id) : [];\n      const programDependencies = program ? await storage.getDependencies(program.id) : [];\n      const programAdopters = program ? await storage.getAdopters(program.id) : [];\n      const programMilestones = program ? await storage.getMilestones(program.id) : [];\n      const programProjects = program ? await storage.getProjects(program.id) : [];\n\n      res.json({\n        milestone,\n        program,\n        relatedComponents: {\n          risks: programRisks,\n          dependencies: programDependencies,\n          adopters: programAdopters,\n          milestones: programMilestones.filter(m => m.id !== milestone.id),\n          projects: programProjects\n        },\n        analytics: {\n          riskCount: programRisks.length,\n          dependencyCount: programDependencies.length,\n          adopterCount: programAdopters.length,\n          milestoneCount: programMilestones.length - 1,\n          projectCount: programProjects.length,\n          healthScore: Math.round(((programRisks.filter(r => r.status === 'resolved').length / Math.max(programRisks.length, 1)) * 100))\n        }\n      });\n    } catch (error) {\n      console.error(\"Error fetching milestone context:\", error);\n      res.status(500).json({ message: \"Failed to fetch milestone context\" });\n    }\n  });\n\n  app.get(\"/api/risks/:id/context\", async (req, res) => {\n    try {\n      const risk = await storage.getRisk(req.params.id);\n      if (!risk) {\n        return res.status(404).json({ message: \"Risk not found\" });\n      }\n\n      const program = risk.programId ? await storage.getProgram(risk.programId) : null;\n      const programRisks = program ? await storage.getRisks(program.id) : [];\n      const programMilestones = program ? await storage.getMilestones(program.id) : [];\n      const programDependencies = program ? await storage.getDependencies(program.id) : [];\n      const programAdopters = program ? await storage.getAdopters(program.id) : [];\n      const programProjects = program ? await storage.getProjects(program.id) : [];\n\n      res.json({\n        risk,\n        program,\n        relatedComponents: {\n          risks: programRisks.filter(r => r.id !== risk.id),\n          milestones: programMilestones,\n          dependencies: programDependencies,\n          adopters: programAdopters,\n          projects: programProjects\n        },\n        analytics: {\n          riskCount: programRisks.length - 1,\n          milestoneCount: programMilestones.length,\n          dependencyCount: programDependencies.length,\n          adopterCount: programAdopters.length,\n          projectCount: programProjects.length,\n          riskScore: (risk.impact || 3) * (risk.probability || 3),\n          programHealthScore: Math.round(((programRisks.filter(r => r.status === 'resolved').length / Math.max(programRisks.length, 1)) * 100))\n        }\n      });\n    } catch (error) {\n      console.error(\"Error fetching risk context:\", error);\n      res.status(500).json({ message: \"Failed to fetch risk context\" });\n    }\n  });\n\n  app.get(\"/api/dependencies/:id/context\", async (req, res) => {\n    try {\n      const dependency = await storage.getDependency(req.params.id);\n      if (!dependency) {\n        return res.status(404).json({ message: \"Dependency not found\" });\n      }\n\n      const program = dependency.programId ? await storage.getProgram(dependency.programId) : null;\n      const programDependencies = program ? await storage.getDependencies(program.id) : [];\n      const programMilestones = program ? await storage.getMilestones(program.id) : [];\n      const programRisks = program ? await storage.getRisks(program.id) : [];\n      const programAdopters = program ? await storage.getAdopters(program.id) : [];\n      const programProjects = program ? await storage.getProjects(program.id) : [];\n\n      res.json({\n        dependency,\n        program,\n        relatedComponents: {\n          dependencies: programDependencies.filter(d => d.id !== dependency.id),\n          milestones: programMilestones,\n          risks: programRisks,\n          adopters: programAdopters,\n          projects: programProjects\n        },\n        analytics: {\n          dependencyCount: programDependencies.length - 1,\n          milestoneCount: programMilestones.length,\n          riskCount: programRisks.length,\n          adopterCount: programAdopters.length,\n          projectCount: programProjects.length,\n          blockedCount: programDependencies.filter(d => d.status === 'blocked').length,\n          programHealthScore: Math.round(((programDependencies.filter(d => d.status === 'completed').length / Math.max(programDependencies.length, 1)) * 100))\n        }\n      });\n    } catch (error) {\n      console.error(\"Error fetching dependency context:\", error);\n      res.status(500).json({ message: \"Failed to fetch dependency context\" });\n    }\n  });\n\n  app.get(\"/api/adopters/:id/context\", async (req, res) => {\n    try {\n      const adopter = await storage.getAdopter(req.params.id);\n      if (!adopter) {\n        return res.status(404).json({ message: \"Adopter not found\" });\n      }\n\n      const program = adopter.programId ? await storage.getProgram(adopter.programId) : null;\n      const programAdopters = program ? await storage.getAdopters(program.id) : [];\n      const programMilestones = program ? await storage.getMilestones(program.id) : [];\n      const programRisks = program ? await storage.getRisks(program.id) : [];\n      const programDependencies = program ? await storage.getDependencies(program.id) : [];\n      const programProjects = program ? await storage.getProjects(program.id) : [];\n\n      res.json({\n        adopter,\n        program,\n        relatedComponents: {\n          adopters: programAdopters.filter(a => a.id !== adopter.id),\n          milestones: programMilestones,\n          risks: programRisks,\n          dependencies: programDependencies,\n          projects: programProjects\n        },\n        analytics: {\n          adopterCount: programAdopters.length - 1,\n          milestoneCount: programMilestones.length,\n          riskCount: programRisks.length,\n          dependencyCount: programDependencies.length,\n          projectCount: programProjects.length,\n          readyCount: programAdopters.filter(a => (a.readinessScore ?? 0) >= 75).length,\n          programHealthScore: Math.round((programAdopters.reduce((sum, a) => sum + (a.readinessScore ?? 50), 0) / Math.max(programAdopters.length, 1)))\n        }\n      });\n    } catch (error) {\n      console.error(\"Error fetching adopter context:\", error);\n      res.status(500).json({ message: \"Failed to fetch adopter context\" });\n    }\n  });\n\n  // Initiative routes\n  app.get(\"/api/initiatives\", async (req, res) => {\n    try {\n      const initiatives = await storage.getInitiatives();\n      res.json(initiatives);\n    } catch (error) {\n      console.error(\"Error fetching initiatives:\", error);\n      res.status(500).json({ message: \"Failed to fetch initiatives\" });\n    }\n  });\n\n  app.post(\"/api/initiatives\", async (req, res) => {\n    try {\n      const initiative = await storage.createInitiative(req.body);\n      res.json(initiative);\n    } catch (error) {\n      console.error(\"Error creating initiative:\", error);\n      res.status(500).json({ message: \"Failed to create initiative\" });\n    }\n  });\n\n  // Project routes\n  app.get(\"/api/projects\", async (req, res) => {\n    try {\n      const { programId } = req.query;\n      const projects = await storage.getProjects(programId as string);\n      res.json(projects);\n    } catch (error) {\n      console.error(\"Error fetching projects:\", error);\n      res.status(500).json({ message: \"Failed to fetch projects\" });\n    }\n  });\n\n  app.post(\"/api/projects\", async (req, res) => {\n    try {\n      const project = await storage.createProject(req.body);\n      res.json(project);\n    } catch (error) {\n      console.error(\"Error creating project:\", error);\n      res.status(500).json({ message: \"Failed to create project\" });\n    }\n  });\n\n  // Stakeholder routes\n  app.get(\"/api/stakeholders\", async (req, res) => {\n    try {\n      const stakeholders = await storage.getStakeholders();\n      res.json(stakeholders);\n    } catch (error) {\n      console.error(\"Error fetching stakeholders:\", error);\n      res.status(500).json({ message: \"Failed to fetch stakeholders\" });\n    }\n  });\n\n  app.post(\"/api/stakeholders\", async (req, res) => {\n    try {\n      const stakeholder = await storage.createStakeholder(req.body);\n      res.json(stakeholder);\n    } catch (error) {\n      console.error(\"Error creating stakeholder:\", error);\n      res.status(500).json({ message: \"Failed to create stakeholder\" });\n    }\n  });\n\n  // PMP recommendations routes\n  app.get(\"/api/pmp-recommendations\", async (req, res) => {\n    try {\n      const { programId, projectId } = req.query;\n      const recommendations = await storage.getPmpRecommendations(\n        programId as string, \n        projectId as string\n      );\n      res.json(recommendations);\n    } catch (error) {\n      console.error(\"Error fetching PMP recommendations:\", error);\n      res.status(500).json({ message: \"Failed to fetch recommendations\" });\n    }\n  });\n\n  app.patch(\"/api/pmp-recommendations/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const recommendation = await storage.updatePmpRecommendation(id, req.body);\n      res.json(recommendation);\n    } catch (error) {\n      console.error(\"Error updating PMP recommendation:\", error);\n      res.status(500).json({ message: \"Failed to update recommendation\" });\n    }\n  });\n\n  // Reports routes\n  app.get(\"/api/reports\", async (req, res) => {\n    try {\n      const { programId } = req.query;\n      const reports = await storage.getReports(programId as string);\n      res.json(reports);\n    } catch (error) {\n      console.error(\"Error fetching reports:\", error);\n      res.status(500).json({ message: \"Failed to fetch reports\" });\n    }\n  });\n\n  app.post(\"/api/reports/generate\", async (req, res) => {\n    try {\n      const { programId, type } = req.body;\n      const report = await aiService.generateReport(programId, type);\n      res.json(report);\n    } catch (error) {\n      console.error(\"Error generating report:\", error);\n      res.status(500).json({ message: \"Failed to generate report\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  // WebSocket server for real-time updates\n  const wss = new WebSocketServer({ server: httpServer, path: '/ws' });\n  \n  // Store connected clients for broadcasting\n  const connectedClients = new Set<WebSocket>();\n  \n  // Broadcast function for real-time updates\n  const broadcast = (eventType: string, data: any) => {\n    const message = JSON.stringify({ type: eventType, data });\n    connectedClients.forEach((client) => {\n      if (client.readyState === WebSocket.OPEN) {\n        try {\n          client.send(message);\n        } catch (error) {\n          console.error('Error sending WebSocket message:', error);\n          connectedClients.delete(client);\n        }\n      }\n    });\n  };\n  \n  // Make broadcast function available to routes\n  (app as any).broadcast = broadcast;\n  \n  wss.on('connection', (ws: WebSocket) => {\n    console.log('Client connected to WebSocket');\n    connectedClients.add(ws);\n    \n    // Send initial connection confirmation\n    ws.send(JSON.stringify({ type: 'connected', data: { timestamp: new Date() } }));\n    \n    ws.on('message', (message: string) => {\n      try {\n        const data = JSON.parse(message.toString());\n        console.log('Received WebSocket message:', data);\n      } catch (error) {\n        console.error('Error parsing WebSocket message:', error);\n      }\n    });\n    \n    ws.on('close', () => {\n      console.log('Client disconnected from WebSocket');\n      connectedClients.delete(ws);\n    });\n    \n    ws.on('error', (error) => {\n      console.error('WebSocket error:', error);\n      connectedClients.delete(ws);\n    });\n  });\n\n  return httpServer;\n}\n","size_bytes":87726},"server/storage.ts":{"content":"import {\n  users,\n  platforms,\n  programs,\n  projects,\n  initiatives,\n  initiativePrograms,\n  initiativeProjects,\n  milestones,\n  milestoneSteps,\n  jiraBepics,\n  jiraEpics,\n  jiraStories,\n  programPhases,\n  phaseStages,\n  risks,\n  dependencies,\n  adopters,\n  escalations,\n  integrations,\n  reports,\n  stakeholders,\n  stakeholderInteractions,\n  pmpRecommendations,\n  type User,\n  type InsertUser,\n  type Platform,\n  type InsertPlatform,\n  type Program,\n  type InsertProgram,\n  type Project,\n  type InsertProject,\n  type Initiative,\n  type InsertInitiative,\n  type Milestone,\n  type InsertMilestone,\n  type MilestoneStep,\n  type InsertMilestoneStep,\n  type JiraBepic,\n  type InsertJiraBepic,\n  type JiraEpic,\n  type InsertJiraEpic,\n  type JiraStory,\n  type InsertJiraStory,\n  type ProgramPhase,\n  type InsertProgramPhase,\n  type PhaseStage,\n  type InsertPhaseStage,\n  type Risk,\n  type InsertRisk,\n  type Dependency,\n  type InsertDependency,\n  type Adopter,\n  type InsertAdopter,\n  type Escalation,\n  type InsertEscalation,\n  type Integration,\n  type InsertIntegration,\n  type Report,\n  type InsertReport,\n  type Stakeholder,\n  type InsertStakeholder,\n  type StakeholderInteraction,\n  type InsertStakeholderInteraction,\n  type PmpRecommendation,\n  type InsertPmpRecommendation,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, and, or, gte, lte, count } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // User operations\n  getUser(id: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Platform operations\n  getPlatforms(): Promise<Platform[]>;\n  getPlatform(id: string): Promise<Platform | undefined>;\n  createPlatform(platform: InsertPlatform): Promise<Platform>;\n  updatePlatform(id: string, platform: Partial<InsertPlatform>): Promise<Platform>;\n  deletePlatform(id: string): Promise<void>;\n  \n  // Program operations\n  getPrograms(): Promise<Program[]>;\n  getProgram(id: string): Promise<Program | undefined>;\n  createProgram(program: InsertProgram): Promise<Program>;\n  updateProgram(id: string, program: Partial<InsertProgram>): Promise<Program>;\n  deleteProgram(id: string): Promise<void>;\n  \n  // Milestone operations\n  getMilestones(programId?: string): Promise<Milestone[]>;\n  getMilestone(id: string): Promise<Milestone | undefined>;\n  createMilestone(milestone: InsertMilestone): Promise<Milestone>;\n  updateMilestone(id: string, milestone: Partial<InsertMilestone>): Promise<Milestone>;\n  deleteMilestone(id: string): Promise<void>;\n  \n  // Milestone Step operations\n  getMilestoneSteps(milestoneId?: string): Promise<MilestoneStep[]>;\n  getMilestoneStep(id: string): Promise<MilestoneStep | undefined>;\n  createMilestoneStep(step: InsertMilestoneStep): Promise<MilestoneStep>;\n  updateMilestoneStep(id: string, step: Partial<InsertMilestoneStep>): Promise<MilestoneStep>;\n  deleteMilestoneStep(id: string): Promise<void>;\n  \n  // JIRA Bepic operations\n  getJiraBepics(stepId?: string): Promise<JiraBepic[]>;\n  getJiraBepic(id: string): Promise<JiraBepic | undefined>;\n  createJiraBepic(bepic: InsertJiraBepic): Promise<JiraBepic>;\n  updateJiraBepic(id: string, bepic: Partial<InsertJiraBepic>): Promise<JiraBepic>;\n  deleteJiraBepic(id: string): Promise<void>;\n  \n  // JIRA Epic operations\n  getJiraEpics(bepicId?: string): Promise<JiraEpic[]>;\n  getJiraEpic(id: string): Promise<JiraEpic | undefined>;\n  createJiraEpic(epic: InsertJiraEpic): Promise<JiraEpic>;\n  updateJiraEpic(id: string, epic: Partial<InsertJiraEpic>): Promise<JiraEpic>;\n  deleteJiraEpic(id: string): Promise<void>;\n  \n  // JIRA Story operations\n  getJiraStories(epicId?: string): Promise<JiraStory[]>;\n  getJiraStory(id: string): Promise<JiraStory | undefined>;\n  createJiraStory(story: InsertJiraStory): Promise<JiraStory>;\n  updateJiraStory(id: string, story: Partial<InsertJiraStory>): Promise<JiraStory>;\n  deleteJiraStory(id: string): Promise<void>;\n  \n  // Program Phase operations\n  getProgramPhases(programId?: string, projectId?: string): Promise<ProgramPhase[]>;\n  getProgramPhase(id: string): Promise<ProgramPhase | undefined>;\n  createProgramPhase(phase: InsertProgramPhase): Promise<ProgramPhase>;\n  updateProgramPhase(id: string, phase: Partial<InsertProgramPhase>): Promise<ProgramPhase>;\n  deleteProgramPhase(id: string): Promise<void>;\n  \n  // Phase Stage operations\n  getPhaseStages(programPhaseId?: string): Promise<PhaseStage[]>;\n  getPhaseStage(id: string): Promise<PhaseStage | undefined>;\n  createPhaseStage(stage: InsertPhaseStage): Promise<PhaseStage>;\n  updatePhaseStage(id: string, stage: Partial<InsertPhaseStage>): Promise<PhaseStage>;\n  deletePhaseStage(id: string): Promise<void>;\n  \n  // Risk operations\n  getRisks(programId?: string): Promise<Risk[]>;\n  getRisk(id: string): Promise<Risk | undefined>;\n  createRisk(risk: InsertRisk): Promise<Risk>;\n  updateRisk(id: string, risk: Partial<InsertRisk>): Promise<Risk>;\n  deleteRisk(id: string): Promise<void>;\n  \n  // Dependency operations\n  getDependencies(programId?: string): Promise<Dependency[]>;\n  getDependency(id: string): Promise<Dependency | undefined>;\n  createDependency(dependency: InsertDependency): Promise<Dependency>;\n  updateDependency(id: string, dependency: Partial<InsertDependency>): Promise<Dependency>;\n  deleteDependency(id: string): Promise<void>;\n  \n  // Adopter operations\n  getAdopters(programId?: string): Promise<Adopter[]>;\n  getAdopter(id: string): Promise<Adopter | undefined>;\n  createAdopter(adopter: InsertAdopter): Promise<Adopter>;\n  updateAdopter(id: string, adopter: Partial<InsertAdopter>): Promise<Adopter>;\n  deleteAdopter(id: string): Promise<void>;\n  \n  // Escalation operations\n  getEscalations(programId?: string): Promise<Escalation[]>;\n  getEscalation(id: string): Promise<Escalation | undefined>;\n  createEscalation(escalation: InsertEscalation): Promise<Escalation>;\n  updateEscalation(id: string, escalation: Partial<InsertEscalation>): Promise<Escalation>;\n  deleteEscalation(id: string): Promise<void>;\n  \n  // Integration operations\n  getIntegrations(): Promise<Integration[]>;\n  getIntegration(name: string): Promise<Integration | undefined>;\n  createIntegration(integration: InsertIntegration): Promise<Integration>;\n  updateIntegration(name: string, integration: Partial<InsertIntegration>): Promise<Integration>;\n  \n  // Report operations\n  getReports(programId?: string): Promise<Report[]>;\n  createReport(report: InsertReport): Promise<Report>;\n  \n  // Dashboard metrics\n  getDashboardMetrics(): Promise<{\n    activePrograms: number;\n    criticalRisks: number;\n    upcomingMilestones: number;\n    adopterScore: number;\n  }>;\n\n  // Initiative operations\n  getInitiatives(): Promise<Initiative[]>;\n  getInitiative(id: string): Promise<Initiative | undefined>;\n  createInitiative(initiative: InsertInitiative): Promise<Initiative>;\n  updateInitiative(id: string, updates: Partial<InsertInitiative>): Promise<Initiative>;\n  deleteInitiative(id: string): Promise<void>;\n  linkProgramToInitiative(programId: string, initiativeId: string): Promise<void>;\n  linkProjectToInitiative(projectId: string, initiativeId: string): Promise<void>;\n  linkProgramToPlatform(programId: string, platformId: string): Promise<void>;\n  linkEpicToPrograms(epicId: string, programIds: string[]): Promise<void>;\n  linkProjectToPrograms(projectId: string, programIds: string[]): Promise<void>;\n\n  // Project operations\n  getProjects(programId?: string): Promise<Project[]>;\n  getProject(id: string): Promise<Project | undefined>;\n  createProject(project: InsertProject): Promise<Project>;\n  updateProject(id: string, updates: Partial<InsertProject>): Promise<Project>;\n  deleteProject(id: string): Promise<void>;\n\n  // Stakeholder operations\n  getStakeholders(): Promise<Stakeholder[]>;\n  getStakeholder(id: string): Promise<Stakeholder | undefined>;\n  createStakeholder(stakeholder: InsertStakeholder): Promise<Stakeholder>;\n  updateStakeholder(id: string, updates: Partial<InsertStakeholder>): Promise<Stakeholder>;\n  deleteStakeholder(id: string): Promise<void>;\n\n  // Stakeholder interaction operations\n  getStakeholderInteractions(stakeholderId?: string): Promise<StakeholderInteraction[]>;\n  getStakeholderInteraction(id: string): Promise<StakeholderInteraction | undefined>;\n  createStakeholderInteraction(interaction: InsertStakeholderInteraction): Promise<StakeholderInteraction>;\n  updateStakeholderInteraction(id: string, updates: Partial<InsertStakeholderInteraction>): Promise<StakeholderInteraction>;\n\n  // PMP recommendation operations\n  getPmpRecommendations(programId?: string, projectId?: string): Promise<PmpRecommendation[]>;\n  createPmpRecommendation(recommendation: InsertPmpRecommendation): Promise<PmpRecommendation>;\n  updatePmpRecommendation(id: string, updates: Partial<InsertPmpRecommendation>): Promise<PmpRecommendation>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async createUser(userData: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(userData).returning();\n    return user;\n  }\n\n  // Platform operations\n  async getPlatforms(): Promise<Platform[]> {\n    return await db.select().from(platforms).orderBy(desc(platforms.createdAt));\n  }\n\n  async getPlatform(id: string): Promise<Platform | undefined> {\n    const [platform] = await db.select().from(platforms).where(eq(platforms.id, id));\n    return platform;\n  }\n\n  async createPlatform(platformData: InsertPlatform): Promise<Platform> {\n    const [platform] = await db.insert(platforms).values(platformData).returning();\n    return platform;\n  }\n\n  async updatePlatform(id: string, platformData: Partial<InsertPlatform>): Promise<Platform> {\n    const [platform] = await db\n      .update(platforms)\n      .set({ ...platformData, updatedAt: new Date() })\n      .where(eq(platforms.id, id))\n      .returning();\n    return platform;\n  }\n\n  async deletePlatform(id: string): Promise<void> {\n    await db.delete(platforms).where(eq(platforms.id, id));\n  }\n\n  // Program operations\n  async getPrograms(): Promise<Program[]> {\n    return await db.select().from(programs).orderBy(desc(programs.createdAt));\n  }\n\n  async getProgram(id: string): Promise<Program | undefined> {\n    const [program] = await db.select().from(programs).where(eq(programs.id, id));\n    return program;\n  }\n\n  async createProgram(programData: InsertProgram): Promise<Program> {\n    const [program] = await db.insert(programs).values(programData).returning();\n    \n    // Auto-generate risks for missing components\n    await this.generateMissingComponentRisks(program.id);\n    return program;\n  }\n\n  async updateProgram(id: string, programData: Partial<InsertProgram>): Promise<Program> {\n    const [program] = await db\n      .update(programs)\n      .set({ ...programData, updatedAt: new Date() })\n      .where(eq(programs.id, id))\n      .returning();\n    \n    // Auto-generate/update risks for missing components after update\n    await this.generateMissingComponentRisks(program.id);\n    return program;\n  }\n\n  async deleteProgram(id: string): Promise<void> {\n    // Delete all related data in proper order to avoid foreign key constraints\n    \n    // Step 1: Delete deepest nested items first\n    const milestoneIds = (await db.select({ id: milestones.id }).from(milestones).where(eq(milestones.programId, id))).map(m => m.id);\n    \n    if (milestoneIds.length > 0) {\n      // Delete milestone steps and their related data\n      for (const milestoneId of milestoneIds) {\n        const stepIds = (await db.select({ id: milestoneSteps.id }).from(milestoneSteps).where(eq(milestoneSteps.milestoneId, milestoneId))).map(s => s.id);\n        \n        for (const stepId of stepIds) {\n          // Delete jira_bepics related to this step\n          await db.delete(jiraBepics).where(eq(jiraBepics.stepId, stepId));\n        }\n        \n        // Delete milestone steps\n        await db.delete(milestoneSteps).where(eq(milestoneSteps.milestoneId, milestoneId));\n      }\n      \n      // Delete milestones\n      await db.delete(milestones).where(eq(milestones.programId, id));\n    }\n    \n    // Step 2: Delete program-related data\n    await db.delete(risks).where(eq(risks.programId, id));\n    await db.delete(adopters).where(eq(adopters.programId, id));\n    await db.delete(escalations).where(eq(escalations.programId, id));\n    await db.delete(reports).where(eq(reports.programId, id));\n    await db.delete(stakeholders).where(eq(stakeholders.programId, id));\n    await db.delete(stakeholderInteractions).where(eq(stakeholderInteractions.programId, id));\n    await db.delete(pmpRecommendations).where(eq(pmpRecommendations.programId, id));\n    await db.delete(programPhases).where(eq(programPhases.programId, id));\n    await db.delete(initiativePrograms).where(eq(initiativePrograms.programId, id));\n    \n    // Step 3: Delete dependencies where this program is involved\n    await db.delete(dependencies).where(eq(dependencies.programId, id));\n    \n    // Step 4: Delete projects and their related data\n    const projectIds = (await db.select({ id: projects.id }).from(projects).where(eq(projects.programId, id))).map(p => p.id);\n    \n    if (projectIds.length > 0) {\n      for (const projectId of projectIds) {\n        // Delete project-related data\n        await db.delete(risks).where(eq(risks.projectId, projectId));\n        await db.delete(milestones).where(eq(milestones.projectId, projectId));\n        await db.delete(stakeholders).where(eq(stakeholders.projectId, projectId));\n        await db.delete(stakeholderInteractions).where(eq(stakeholderInteractions.projectId, projectId));\n        await db.delete(pmpRecommendations).where(eq(pmpRecommendations.projectId, projectId));\n        await db.delete(programPhases).where(eq(programPhases.projectId, projectId));\n        await db.delete(initiativeProjects).where(eq(initiativeProjects.projectId, projectId));\n      }\n      \n      // Delete projects\n      await db.delete(projects).where(eq(projects.programId, id));\n    }\n    \n    // Step 5: Finally delete the program itself\n    await db.delete(programs).where(eq(programs.id, id));\n  }\n\n  // Milestone operations\n  async getMilestones(programId?: string): Promise<Milestone[]> {\n    if (programId) {\n      return await db.select().from(milestones).where(eq(milestones.programId, programId));\n    }\n    return await db.select().from(milestones).orderBy(desc(milestones.dueDate));\n  }\n\n  async getMilestone(id: string): Promise<Milestone | undefined> {\n    const [milestone] = await db.select().from(milestones).where(eq(milestones.id, id));\n    return milestone;\n  }\n\n  async createMilestone(milestoneData: InsertMilestone): Promise<Milestone> {\n    const [milestone] = await db.insert(milestones).values(milestoneData).returning();\n    return milestone;\n  }\n\n  async updateMilestone(id: string, milestoneData: Partial<InsertMilestone>): Promise<Milestone> {\n    const [milestone] = await db\n      .update(milestones)\n      .set({ ...milestoneData, updatedAt: new Date() })\n      .where(eq(milestones.id, id))\n      .returning();\n    return milestone;\n  }\n\n  async deleteMilestone(id: string): Promise<void> {\n    await db.delete(milestones).where(eq(milestones.id, id));\n  }\n\n  // Milestone Step operations\n  async getMilestoneSteps(milestoneId?: string): Promise<MilestoneStep[]> {\n    if (milestoneId) {\n      return await db.select().from(milestoneSteps).where(eq(milestoneSteps.milestoneId, milestoneId));\n    }\n    return await db.select().from(milestoneSteps).orderBy(desc(milestoneSteps.dueDate));\n  }\n\n  async getMilestoneStep(id: string): Promise<MilestoneStep | undefined> {\n    const [step] = await db.select().from(milestoneSteps).where(eq(milestoneSteps.id, id));\n    return step;\n  }\n\n  async createMilestoneStep(stepData: InsertMilestoneStep): Promise<MilestoneStep> {\n    const [step] = await db.insert(milestoneSteps).values(stepData).returning();\n    return step;\n  }\n\n  async updateMilestoneStep(id: string, stepData: Partial<InsertMilestoneStep>): Promise<MilestoneStep> {\n    const [step] = await db\n      .update(milestoneSteps)\n      .set({ ...stepData, updatedAt: new Date() })\n      .where(eq(milestoneSteps.id, id))\n      .returning();\n    return step;\n  }\n\n  async deleteMilestoneStep(id: string): Promise<void> {\n    await db.delete(milestoneSteps).where(eq(milestoneSteps.id, id));\n  }\n\n  // JIRA Bepic operations\n  async getJiraBepics(stepId?: string): Promise<JiraBepic[]> {\n    if (stepId) {\n      return await db.select().from(jiraBepics).where(eq(jiraBepics.stepId, stepId));\n    }\n    return await db.select().from(jiraBepics).orderBy(desc(jiraBepics.dueDate));\n  }\n\n  async getJiraBepic(id: string): Promise<JiraBepic | undefined> {\n    const [bepic] = await db.select().from(jiraBepics).where(eq(jiraBepics.id, id));\n    return bepic;\n  }\n\n  async createJiraBepic(bepicData: InsertJiraBepic): Promise<JiraBepic> {\n    const [bepic] = await db.insert(jiraBepics).values(bepicData).returning();\n    return bepic;\n  }\n\n  async updateJiraBepic(id: string, bepicData: Partial<InsertJiraBepic>): Promise<JiraBepic> {\n    const [bepic] = await db\n      .update(jiraBepics)\n      .set({ ...bepicData, updatedAt: new Date() })\n      .where(eq(jiraBepics.id, id))\n      .returning();\n    return bepic;\n  }\n\n  async deleteJiraBepic(id: string): Promise<void> {\n    await db.delete(jiraBepics).where(eq(jiraBepics.id, id));\n  }\n\n  // JIRA Epic operations\n  async getJiraEpics(bepicId?: string): Promise<JiraEpic[]> {\n    if (bepicId) {\n      return await db.select().from(jiraEpics).where(eq(jiraEpics.bepicId, bepicId));\n    }\n    return await db.select().from(jiraEpics).orderBy(desc(jiraEpics.dueDate));\n  }\n\n  async getJiraEpic(id: string): Promise<JiraEpic | undefined> {\n    const [epic] = await db.select().from(jiraEpics).where(eq(jiraEpics.id, id));\n    return epic;\n  }\n\n  async createJiraEpic(epicData: InsertJiraEpic): Promise<JiraEpic> {\n    const [epic] = await db.insert(jiraEpics).values(epicData).returning();\n    return epic;\n  }\n\n  async updateJiraEpic(id: string, epicData: Partial<InsertJiraEpic>): Promise<JiraEpic> {\n    const [epic] = await db\n      .update(jiraEpics)\n      .set({ ...epicData, updatedAt: new Date() })\n      .where(eq(jiraEpics.id, id))\n      .returning();\n    return epic;\n  }\n\n  async deleteJiraEpic(id: string): Promise<void> {\n    await db.delete(jiraEpics).where(eq(jiraEpics.id, id));\n  }\n\n  // JIRA Story operations\n  async getJiraStories(epicId?: string): Promise<JiraStory[]> {\n    if (epicId) {\n      return await db.select().from(jiraStories).where(eq(jiraStories.epicId, epicId));\n    }\n    return await db.select().from(jiraStories).orderBy(desc(jiraStories.dueDate));\n  }\n\n  async getJiraStory(id: string): Promise<JiraStory | undefined> {\n    const [story] = await db.select().from(jiraStories).where(eq(jiraStories.id, id));\n    return story;\n  }\n\n  async createJiraStory(storyData: InsertJiraStory): Promise<JiraStory> {\n    const [story] = await db.insert(jiraStories).values(storyData).returning();\n    return story;\n  }\n\n  async updateJiraStory(id: string, storyData: Partial<InsertJiraStory>): Promise<JiraStory> {\n    const [story] = await db\n      .update(jiraStories)\n      .set({ ...storyData, updatedAt: new Date() })\n      .where(eq(jiraStories.id, id))\n      .returning();\n    return story;\n  }\n\n  async deleteJiraStory(id: string): Promise<void> {\n    await db.delete(jiraStories).where(eq(jiraStories.id, id));\n  }\n\n  // Program Phase operations\n  async getProgramPhases(programId?: string, projectId?: string): Promise<ProgramPhase[]> {\n    if (programId) {\n      return await db.select().from(programPhases).where(eq(programPhases.programId, programId));\n    }\n    if (projectId) {\n      return await db.select().from(programPhases).where(eq(programPhases.projectId, projectId));\n    }\n    return await db.select().from(programPhases).orderBy(desc(programPhases.createdAt));\n  }\n\n  async getProgramPhase(id: string): Promise<ProgramPhase | undefined> {\n    const [phase] = await db.select().from(programPhases).where(eq(programPhases.id, id));\n    return phase;\n  }\n\n  async createProgramPhase(phaseData: InsertProgramPhase): Promise<ProgramPhase> {\n    const [phase] = await db.insert(programPhases).values(phaseData).returning();\n    return phase;\n  }\n\n  async updateProgramPhase(id: string, phaseData: Partial<InsertProgramPhase>): Promise<ProgramPhase> {\n    const [phase] = await db\n      .update(programPhases)\n      .set({ ...phaseData, updatedAt: new Date() })\n      .where(eq(programPhases.id, id))\n      .returning();\n    return phase;\n  }\n\n  async deleteProgramPhase(id: string): Promise<void> {\n    await db.delete(programPhases).where(eq(programPhases.id, id));\n  }\n\n  // Phase Stage operations\n  async getPhaseStages(programPhaseId?: string): Promise<PhaseStage[]> {\n    if (programPhaseId) {\n      return await db.select().from(phaseStages).where(eq(phaseStages.programPhaseId, programPhaseId));\n    }\n    return await db.select().from(phaseStages).orderBy(desc(phaseStages.createdAt));\n  }\n\n  async getPhaseStage(id: string): Promise<PhaseStage | undefined> {\n    const [stage] = await db.select().from(phaseStages).where(eq(phaseStages.id, id));\n    return stage;\n  }\n\n  async createPhaseStage(stageData: InsertPhaseStage): Promise<PhaseStage> {\n    const [stage] = await db.insert(phaseStages).values(stageData).returning();\n    return stage;\n  }\n\n  async updatePhaseStage(id: string, stageData: Partial<InsertPhaseStage>): Promise<PhaseStage> {\n    const [stage] = await db\n      .update(phaseStages)\n      .set({ ...stageData, updatedAt: new Date() })\n      .where(eq(phaseStages.id, id))\n      .returning();\n    return stage;\n  }\n\n  async deletePhaseStage(id: string): Promise<void> {\n    await db.delete(phaseStages).where(eq(phaseStages.id, id));\n  }\n\n  // Risk operations\n  async getRisks(programId?: string): Promise<Risk[]> {\n    if (programId) {\n      return await db.select().from(risks).where(eq(risks.programId, programId));\n    }\n    return await db.select().from(risks).orderBy(desc(risks.createdAt));\n  }\n\n  async getRisk(id: string): Promise<Risk | undefined> {\n    const [risk] = await db.select().from(risks).where(eq(risks.id, id));\n    return risk;\n  }\n\n  async createRisk(riskData: InsertRisk): Promise<Risk> {\n    const [risk] = await db.insert(risks).values(riskData).returning();\n    return risk;\n  }\n\n  async updateRisk(id: string, riskData: Partial<InsertRisk>): Promise<Risk> {\n    const [risk] = await db\n      .update(risks)\n      .set({ ...riskData, updatedAt: new Date() })\n      .where(eq(risks.id, id))\n      .returning();\n    return risk;\n  }\n\n  async deleteRisk(id: string): Promise<void> {\n    await db.delete(risks).where(eq(risks.id, id));\n  }\n\n  // Dependency operations\n  async getDependencies(programId?: string): Promise<Dependency[]> {\n    if (programId) {\n      return await db.select().from(dependencies).where(eq(dependencies.programId, programId));\n    }\n    return await db.select().from(dependencies).orderBy(desc(dependencies.createdAt));\n  }\n\n  async getDependency(id: string): Promise<Dependency | undefined> {\n    const [dependency] = await db.select().from(dependencies).where(eq(dependencies.id, id));\n    return dependency;\n  }\n\n  async createDependency(dependencyData: InsertDependency): Promise<Dependency> {\n    const [dependency] = await db.insert(dependencies).values(dependencyData).returning();\n    return dependency;\n  }\n\n  async updateDependency(id: string, dependencyData: Partial<InsertDependency>): Promise<Dependency> {\n    const [dependency] = await db\n      .update(dependencies)\n      .set({ ...dependencyData, updatedAt: new Date() })\n      .where(eq(dependencies.id, id))\n      .returning();\n    return dependency;\n  }\n\n  async deleteDependency(id: string): Promise<void> {\n    await db.delete(dependencies).where(eq(dependencies.id, id));\n  }\n\n  // Adopter operations\n  async getAdopters(programId?: string): Promise<Adopter[]> {\n    if (programId) {\n      return await db.select().from(adopters).where(eq(adopters.programId, programId));\n    }\n    return await db.select().from(adopters).orderBy(desc(adopters.createdAt));\n  }\n\n  async getAdopter(id: string): Promise<Adopter | undefined> {\n    const [adopter] = await db.select().from(adopters).where(eq(adopters.id, id));\n    return adopter;\n  }\n\n  async createAdopter(adopterData: InsertAdopter): Promise<Adopter> {\n    const [adopter] = await db.insert(adopters).values(adopterData).returning();\n    return adopter;\n  }\n\n  async updateAdopter(id: string, adopterData: Partial<InsertAdopter>): Promise<Adopter> {\n    const [adopter] = await db\n      .update(adopters)\n      .set({ ...adopterData, updatedAt: new Date() })\n      .where(eq(adopters.id, id))\n      .returning();\n    return adopter;\n  }\n\n  async deleteAdopter(id: string): Promise<void> {\n    await db.delete(adopters).where(eq(adopters.id, id));\n  }\n\n  // Escalation operations\n  async getEscalations(programId?: string): Promise<Escalation[]> {\n    if (programId) {\n      return await db.select().from(escalations).where(eq(escalations.programId, programId));\n    }\n    return await db.select().from(escalations).orderBy(desc(escalations.createdAt));\n  }\n\n  async getEscalation(id: string): Promise<Escalation | undefined> {\n    const [escalation] = await db.select().from(escalations).where(eq(escalations.id, id));\n    return escalation;\n  }\n\n  async createEscalation(escalationData: InsertEscalation): Promise<Escalation> {\n    const [escalation] = await db.insert(escalations).values(escalationData).returning();\n    return escalation;\n  }\n\n  async updateEscalation(id: string, escalationData: Partial<InsertEscalation>): Promise<Escalation> {\n    const [escalation] = await db\n      .update(escalations)\n      .set({ ...escalationData, updatedAt: new Date() })\n      .where(eq(escalations.id, id))\n      .returning();\n    return escalation;\n  }\n\n  async deleteEscalation(id: string): Promise<void> {\n    await db.delete(escalations).where(eq(escalations.id, id));\n  }\n\n  // Integration operations\n  async getIntegrations(): Promise<Integration[]> {\n    return await db.select().from(integrations);\n  }\n\n  async getIntegration(name: string): Promise<Integration | undefined> {\n    const [integration] = await db.select().from(integrations).where(eq(integrations.name, name));\n    return integration;\n  }\n\n  async createIntegration(integrationData: InsertIntegration): Promise<Integration> {\n    const [integration] = await db.insert(integrations).values(integrationData).returning();\n    return integration;\n  }\n\n  async updateIntegration(name: string, integrationData: Partial<InsertIntegration>): Promise<Integration> {\n    const [integration] = await db\n      .update(integrations)\n      .set({ ...integrationData, updatedAt: new Date() })\n      .where(eq(integrations.name, name))\n      .returning();\n    return integration;\n  }\n\n  // Report operations\n  async getReports(programId?: string): Promise<Report[]> {\n    if (programId) {\n      return await db.select().from(reports).where(eq(reports.programId, programId));\n    }\n    return await db.select().from(reports).orderBy(desc(reports.createdAt));\n  }\n\n  async createReport(reportData: InsertReport): Promise<Report> {\n    const [report] = await db.insert(reports).values(reportData).returning();\n    return report;\n  }\n\n  // Dashboard metrics\n  async getDashboardMetrics(): Promise<{\n    activePrograms: number;\n    criticalRisks: number;\n    upcomingMilestones: number;\n    adopterScore: number;\n  }> {\n    // Get all programs and count them manually for better reliability\n    const allPrograms = await db.select().from(programs);\n    const activeProgramsCount = allPrograms.filter(p => \n      p.status === \"active\" || p.status === \"planning\"\n    ).length;\n\n    const [criticalRisksResult] = await db\n      .select({ count: count() })\n      .from(risks)\n      .where(or(eq(risks.severity, \"high\"), eq(risks.severity, \"critical\")));\n\n    const nextWeek = new Date();\n    nextWeek.setDate(nextWeek.getDate() + 7);\n    \n    const [upcomingMilestonesResult] = await db\n      .select({ count: count() })\n      .from(milestones)\n      .where(and(\n        gte(milestones.dueDate, new Date()),\n        lte(milestones.dueDate, nextWeek)\n      ));\n\n    const adoptersData = await db.select({ readinessScore: adopters.readinessScore }).from(adopters);\n    const avgAdopterScore = adoptersData.length > 0 \n      ? adoptersData.reduce((sum, a) => sum + (a.readinessScore || 0), 0) / adoptersData.length\n      : 0;\n\n    return {\n      activePrograms: activeProgramsCount,\n      criticalRisks: criticalRisksResult.count,\n      upcomingMilestones: upcomingMilestonesResult.count,\n      adopterScore: Math.round(avgAdopterScore),\n    };\n  }\n\n  // Initiative operations\n  async getInitiatives(): Promise<Initiative[]> {\n    return await db.select().from(initiatives).orderBy(desc(initiatives.createdAt));\n  }\n\n  async getInitiative(id: string): Promise<Initiative | undefined> {\n    const [initiative] = await db.select().from(initiatives).where(eq(initiatives.id, id));\n    return initiative;\n  }\n\n  async createInitiative(initiativeData: InsertInitiative): Promise<Initiative> {\n    const [initiative] = await db.insert(initiatives).values(initiativeData).returning();\n    return initiative;\n  }\n\n  async updateInitiative(id: string, initiativeData: Partial<InsertInitiative>): Promise<Initiative> {\n    const [initiative] = await db\n      .update(initiatives)\n      .set({ ...initiativeData, updatedAt: new Date() })\n      .where(eq(initiatives.id, id))\n      .returning();\n    return initiative;\n  }\n\n  async deleteInitiative(id: string): Promise<void> {\n    await db.delete(initiatives).where(eq(initiatives.id, id));\n  }\n\n  async linkProgramToInitiative(programId: string, initiativeId: string): Promise<void> {\n    await db.insert(initiativePrograms).values({\n      programId,\n      initiativeId,\n      contribution: 'Linked by AI Assistant',\n      priority: 1\n    });\n  }\n\n  async linkProjectToInitiative(projectId: string, initiativeId: string): Promise<void> {\n    await db.insert(initiativeProjects).values({\n      projectId,\n      initiativeId,\n      contribution: 'Linked by AI Assistant',\n      priority: 1\n    });\n  }\n\n  async linkProgramToPlatform(programId: string, platformId: string): Promise<void> {\n    await db.update(programs)\n      .set({ platformId })\n      .where(eq(programs.id, programId));\n  }\n\n  async linkEpicToPrograms(epicId: string, programIds: string[]): Promise<void> {\n    // Epic to program linking is limited by current schema - epics are linked to milestones, not directly to programs\n    // For now, we'll skip this implementation as it requires schema changes\n    // This would need a new epicPrograms mapping table for true many-to-many relationships\n    console.log(`Epic linking requested but not implemented: epic ${epicId} to programs ${programIds.join(', ')}`);\n  }\n\n  async linkProjectToPrograms(projectId: string, programIds: string[]): Promise<void> {\n    // Project to program linking currently uses single programId field\n    // This would need a new projectPrograms mapping table for true many-to-many\n    if (programIds.length > 0) {\n      await db.update(projects)\n        .set({ programId: programIds[0] })\n        .where(eq(projects.id, projectId));\n    }\n  }\n\n  // Project operations\n  async getProjects(programId?: string): Promise<Project[]> {\n    if (programId) {\n      return await db.select().from(projects).where(eq(projects.programId, programId));\n    }\n    return await db.select().from(projects).orderBy(desc(projects.createdAt));\n  }\n\n  async getProject(id: string): Promise<Project | undefined> {\n    const [project] = await db.select().from(projects).where(eq(projects.id, id));\n    return project;\n  }\n\n  async createProject(projectData: InsertProject): Promise<Project> {\n    const [project] = await db.insert(projects).values(projectData).returning();\n    return project;\n  }\n\n  async updateProject(id: string, projectData: Partial<InsertProject>): Promise<Project> {\n    const [project] = await db\n      .update(projects)\n      .set({ ...projectData, updatedAt: new Date() })\n      .where(eq(projects.id, id))\n      .returning();\n    return project;\n  }\n\n  async deleteProject(id: string): Promise<void> {\n    await db.delete(projects).where(eq(projects.id, id));\n  }\n\n  // Stakeholder operations\n  async getStakeholders(): Promise<Stakeholder[]> {\n    return await db.select().from(stakeholders).orderBy(desc(stakeholders.createdAt));\n  }\n\n  async getStakeholder(id: string): Promise<Stakeholder | undefined> {\n    const [stakeholder] = await db.select().from(stakeholders).where(eq(stakeholders.id, id));\n    return stakeholder;\n  }\n\n  async createStakeholder(stakeholderData: InsertStakeholder): Promise<Stakeholder> {\n    const [stakeholder] = await db.insert(stakeholders).values(stakeholderData).returning();\n    return stakeholder;\n  }\n\n  async updateStakeholder(id: string, stakeholderData: Partial<InsertStakeholder>): Promise<Stakeholder> {\n    const [stakeholder] = await db\n      .update(stakeholders)\n      .set({ ...stakeholderData, updatedAt: new Date() })\n      .where(eq(stakeholders.id, id))\n      .returning();\n    return stakeholder;\n  }\n\n  async deleteStakeholder(id: string): Promise<void> {\n    await db.delete(stakeholders).where(eq(stakeholders.id, id));\n  }\n\n  // Stakeholder interaction operations\n  async getStakeholderInteractions(stakeholderId?: string): Promise<StakeholderInteraction[]> {\n    if (stakeholderId) {\n      return await db.select().from(stakeholderInteractions)\n        .where(eq(stakeholderInteractions.stakeholderId, stakeholderId))\n        .orderBy(desc(stakeholderInteractions.createdAt));\n    }\n    return await db.select().from(stakeholderInteractions).orderBy(desc(stakeholderInteractions.createdAt));\n  }\n\n  async getStakeholderInteraction(id: string): Promise<StakeholderInteraction | undefined> {\n    const [interaction] = await db.select().from(stakeholderInteractions).where(eq(stakeholderInteractions.id, id));\n    return interaction;\n  }\n\n  async createStakeholderInteraction(interactionData: InsertStakeholderInteraction): Promise<StakeholderInteraction> {\n    const [interaction] = await db.insert(stakeholderInteractions).values(interactionData).returning();\n    return interaction;\n  }\n\n  async updateStakeholderInteraction(id: string, interactionData: Partial<InsertStakeholderInteraction>): Promise<StakeholderInteraction> {\n    const [interaction] = await db\n      .update(stakeholderInteractions)\n      .set({ ...interactionData, updatedAt: new Date() })\n      .where(eq(stakeholderInteractions.id, id))\n      .returning();\n    return interaction;\n  }\n\n  // PMP recommendation operations\n  async getPmpRecommendations(programId?: string, projectId?: string): Promise<PmpRecommendation[]> {\n    const conditions = [];\n    if (programId) conditions.push(eq(pmpRecommendations.programId, programId));\n    if (projectId) conditions.push(eq(pmpRecommendations.projectId, projectId));\n    \n    if (conditions.length > 0) {\n      return await db.select().from(pmpRecommendations)\n        .where(and(...conditions))\n        .orderBy(desc(pmpRecommendations.priority), desc(pmpRecommendations.createdAt));\n    }\n    return await db.select().from(pmpRecommendations).orderBy(desc(pmpRecommendations.priority), desc(pmpRecommendations.createdAt));\n  }\n\n  async createPmpRecommendation(recommendationData: InsertPmpRecommendation): Promise<PmpRecommendation> {\n    const [recommendation] = await db.insert(pmpRecommendations).values(recommendationData).returning();\n    return recommendation;\n  }\n\n  async updatePmpRecommendation(id: string, recommendationData: Partial<InsertPmpRecommendation>): Promise<PmpRecommendation> {\n    const [recommendation] = await db\n      .update(pmpRecommendations)\n      .set({ ...recommendationData, updatedAt: new Date() })\n      .where(eq(pmpRecommendations.id, id))\n      .returning();\n    return recommendation;\n  }\n\n  // Import risks from JIRA (Live mode)\n  async importJiraRisks(programId: string): Promise<Risk[]> {\n    // TODO: Implement actual JIRA API integration\n    // This would query JIRA for issues tagged as risks or blockers\n    // For now, return empty array - to be implemented in Live mode\n    console.log(`JIRA risk import requested for program: ${programId}`);\n    return [];\n  }\n\n  // Automatic gap detection and risk generation\n  async detectAllProgramGaps(programId: string): Promise<void> {\n    await this.generateMissingComponentRisks(programId);\n    await this.generateTimelineRisks(programId);\n    await this.generateDependencyRisks(programId);\n    await this.generateResourceRisks(programId);\n  }\n\n  // Generate timeline-related risks\n  async generateTimelineRisks(programId: string): Promise<void> {\n    const program = await this.getProgram(programId);\n    const milestones = await this.getMilestones(programId);\n    if (!program) return;\n\n    const risks = [];\n    const today = new Date();\n\n    // Check for overdue milestones\n    const overdueMilestones = milestones.filter(m => \n      m.dueDate && new Date(m.dueDate) < today && m.status !== 'completed'\n    );\n\n    if (overdueMilestones.length > 0) {\n      risks.push({\n        title: 'Overdue Milestones Risk',\n        description: `${overdueMilestones.length} milestone(s) are overdue. This may impact overall program timeline and deliverables.`,\n        programId,\n        severity: 'high' as const,\n        impact: 4,\n        probability: 5,\n        status: 'identified' as const,\n        pmpCategory: 'schedule'\n      });\n    }\n\n    // Check for milestones too close together\n    const sortedMilestones = milestones\n      .filter(m => m.dueDate)\n      .sort((a, b) => new Date(a.dueDate!).getTime() - new Date(b.dueDate!).getTime());\n\n    for (let i = 0; i < sortedMilestones.length - 1; i++) {\n      const current = sortedMilestones[i];\n      const next = sortedMilestones[i + 1];\n      const timeDiff = new Date(next.dueDate!).getTime() - new Date(current.dueDate!).getTime();\n      const daysDiff = timeDiff / (1000 * 60 * 60 * 24);\n\n      if (daysDiff < 7) { // Less than a week between milestones\n        risks.push({\n          title: 'Compressed Timeline Risk',\n          description: `Milestones \"${current.title}\" and \"${next.title}\" are scheduled too close together (${Math.floor(daysDiff)} days). This may create resource conflicts.`,\n          programId,\n          severity: 'medium' as const,\n          impact: 3,\n          probability: 4,\n          status: 'identified' as const,\n          pmpCategory: 'schedule'\n        });\n      }\n    }\n\n    // Create risks that don't already exist\n    for (const risk of risks) {\n      await this.createRiskIfNotExists(risk);\n    }\n  }\n\n  // Generate dependency-related risks\n  async generateDependencyRisks(programId: string): Promise<void> {\n    const dependencies = await this.getDependencies(programId);\n    const risks = [];\n\n    // Check for blocked dependencies\n    const blockedDependencies = dependencies.filter(d => d.status === 'blocked');\n    if (blockedDependencies.length > 0) {\n      risks.push({\n        title: 'Blocked Dependencies Risk',\n        description: `${blockedDependencies.length} critical dependencies are blocked. This may delay program milestones and deliverables.`,\n        programId,\n        severity: 'high' as const,\n        impact: 4,\n        probability: 4,\n        status: 'identified' as const,\n        pmpCategory: 'scope'\n      });\n    }\n\n    // Check for dependencies with no owner\n    const unownedDependencies = dependencies.filter(d => !d.ownerId);\n    if (unownedDependencies.length > 0) {\n      risks.push({\n        title: 'Unassigned Dependencies Risk',\n        description: `${unownedDependencies.length} dependencies have no assigned owner. This creates accountability gaps.`,\n        programId,\n        severity: 'medium' as const,\n        impact: 3,\n        probability: 4,\n        status: 'identified' as const,\n        pmpCategory: 'resources'\n      });\n    }\n\n    for (const risk of risks) {\n      await this.createRiskIfNotExists(risk);\n    }\n  }\n\n  // Generate resource-related risks\n  async generateResourceRisks(programId: string): Promise<void> {\n    const adopters = await this.getAdopters(programId);\n    const milestones = await this.getMilestones(programId);\n    const risks = [];\n\n    // Check for adopters with poor readiness\n    const poorReadinessAdopters = adopters.filter(a => (a.readinessScore || 0) < 50);\n    if (poorReadinessAdopters.length > 0) {\n      risks.push({\n        title: 'Low Adopter Readiness Risk',\n        description: `${poorReadinessAdopters.length} adopter team(s) have low readiness scores (<50%). This may impact adoption success.`,\n        programId,\n        severity: 'medium' as const,\n        impact: 3,\n        probability: 4,\n        status: 'identified' as const,\n        pmpCategory: 'resources'\n      });\n    }\n\n    // Check for milestones with no owner\n    const unownedMilestones = milestones.filter(m => !m.ownerId);\n    if (unownedMilestones.length > 0) {\n      risks.push({\n        title: 'Unassigned Milestones Risk',\n        description: `${unownedMilestones.length} milestone(s) have no assigned owner. This creates accountability and delivery risks.`,\n        programId,\n        severity: 'high' as const,\n        impact: 4,\n        probability: 4,\n        status: 'identified' as const,\n        pmpCategory: 'resources'\n      });\n    }\n\n    for (const risk of risks) {\n      await this.createRiskIfNotExists(risk);\n    }\n  }\n\n  // Helper method to create risk only if it doesn't exist\n  async createRiskIfNotExists(riskData: any): Promise<Risk | null> {\n    const existingRisks = await this.getRisks(riskData.programId);\n    const exists = existingRisks.some(r => r.title === riskData.title);\n    \n    if (!exists) {\n      return await this.createRisk(riskData);\n    }\n    return null;\n  }\n\n  // Auto-generate risks for missing program components\n  async generateMissingComponentRisks(programId: string): Promise<void> {\n    const program = await this.getProgram(programId);\n    if (!program) return;\n\n    const programRisks = await this.getRisks(programId);\n    const programMilestones = await this.getMilestones(programId);\n    const programAdopters = await this.getAdopters(programId);\n\n    // Define missing components and their corresponding risk details\n    const missingComponents = [];\n    \n    if (!program.description || program.description.trim().length < 10) {\n      missingComponents.push({\n        component: 'Description',\n        title: 'Missing Program Description',\n        description: 'Program lacks adequate description. This creates ambiguity in scope, objectives, and stakeholder understanding.',\n        severity: 'medium' as const,\n        impact: 3,\n        probability: 4\n      });\n    }\n    \n    if (!program.ownerId) {\n      missingComponents.push({\n        component: 'Owner',\n        title: 'Missing Program Owner',\n        description: 'Program has no assigned owner. This creates accountability gaps and decision-making delays.',\n        severity: 'high' as const,\n        impact: 4,\n        probability: 4\n      });\n    }\n    \n    if (!program.startDate) {\n      missingComponents.push({\n        component: 'Start Date',\n        title: 'Missing Program Start Date',\n        description: 'Program lacks defined start date. This impacts timeline planning and resource allocation.',\n        severity: 'medium' as const,\n        impact: 3,\n        probability: 4\n      });\n    }\n    \n    if (!program.endDate) {\n      missingComponents.push({\n        component: 'End Date',\n        title: 'Missing Program End Date',\n        description: 'Program lacks defined end date. This creates uncertainty in deliverable expectations and resource planning.',\n        severity: 'medium' as const,\n        impact: 3,\n        probability: 4\n      });\n    }\n    \n    if (!program.objectives || (Array.isArray(program.objectives) && !program.objectives.length)) {\n      missingComponents.push({\n        component: 'Objectives',\n        title: 'Missing Program Objectives',\n        description: 'Program lacks clearly defined objectives. This creates alignment issues and success measurement challenges.',\n        severity: 'high' as const,\n        impact: 4,\n        probability: 5\n      });\n    }\n    \n    if (!program.kpis || (Array.isArray(program.kpis) && !program.kpis.length)) {\n      missingComponents.push({\n        component: 'KPIs',\n        title: 'Missing Key Performance Indicators',\n        description: 'Program lacks defined KPIs. This prevents proper success measurement and progress tracking.',\n        severity: 'medium' as const,\n        impact: 3,\n        probability: 4\n      });\n    }\n    \n    if (programMilestones.length === 0) {\n      missingComponents.push({\n        component: 'Milestones',\n        title: 'Missing Program Milestones',\n        description: 'Program has no defined milestones. This creates issues with progress tracking and timeline management.',\n        severity: 'high' as const,\n        impact: 4,\n        probability: 5\n      });\n    }\n    \n    if (programAdopters.length === 0) {\n      missingComponents.push({\n        component: 'Adopter Teams',\n        title: 'Missing Adopter Teams',\n        description: 'Program has no identified adopter teams. This creates adoption risk and change management challenges.',\n        severity: 'medium' as const,\n        impact: 3,\n        probability: 3\n      });\n    }\n\n    // Remove existing \"Missing\" risks that might be resolved\n    const existingMissingRisks = programRisks.filter(r => \n      r.title?.startsWith('Missing ') && \n      r.description?.includes('Program lacks') || r.description?.includes('Program has no')\n    );\n    \n    for (const risk of existingMissingRisks) {\n      const componentName = risk.title?.replace('Missing Program ', '').replace('Missing Key Performance Indicators', 'KPIs').replace('Missing ', '');\n      const stillMissing = missingComponents.some(mc => mc.component === componentName);\n      \n      if (!stillMissing) {\n        // Component is no longer missing, remove the risk\n        await this.deleteRisk(risk.id);\n      }\n    }\n\n    // Create risks for components that are missing and don't already have risks\n    for (const missing of missingComponents) {\n      const existingRisk = programRisks.find(r => \n        r.title === missing.title || \n        (r.title?.includes(missing.component) && r.description?.includes('Program lacks'))\n      );\n      \n      if (!existingRisk) {\n        await this.createRisk({\n          title: missing.title,\n          description: missing.description,\n          programId: programId,\n          severity: missing.severity,\n          impact: missing.impact,\n          probability: missing.probability,\n          status: 'identified',\n          pmpCategory: 'scope'\n        });\n      }\n    }\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":47037},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { sql, relations } from \"drizzle-orm\";\nimport {\n  pgTable,\n  varchar,\n  text,\n  timestamp,\n  integer,\n  decimal,\n  boolean,\n  jsonb,\n  pgEnum,\n} from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Enums\nexport const programStatusEnum = pgEnum(\"program_status\", [\n  \"planning\",\n  \"active\",\n  \"on_hold\",\n  \"completed\",\n  \"cancelled\",\n]);\n\nexport const milestoneStatusEnum = pgEnum(\"milestone_status\", [\n  \"not_started\",\n  \"in_progress\",\n  \"at_risk\",\n  \"completed\",\n  \"delayed\",\n]);\n\nexport const riskSeverityEnum = pgEnum(\"risk_severity\", [\n  \"low\",\n  \"medium\",\n  \"high\",\n  \"critical\",\n]);\n\nexport const riskStatusEnum = pgEnum(\"risk_status\", [\n  \"identified\",\n  \"in_progress\",\n  \"mitigated\",\n  \"resolved\",\n  \"accepted\",\n]);\n\nexport const dependencyStatusEnum = pgEnum(\"dependency_status\", [\n  \"blocked\",\n  \"at_risk\",\n  \"on_track\",\n  \"completed\",\n]);\n\nexport const adopterStatusEnum = pgEnum(\"adopter_status\", [\n  \"not_started\",\n  \"in_progress\",\n  \"ready\",\n  \"blocked\",\n  \"completed\",\n]);\n\nexport const escalationUrgencyEnum = pgEnum(\"escalation_urgency\", [\n  \"low\",\n  \"medium\",\n  \"high\",\n  \"critical\",\n]);\n\nexport const escalationStatusEnum = pgEnum(\"escalation_status\", [\n  \"open\",\n  \"in_progress\",\n  \"resolved\",\n  \"closed\",\n]);\n\nexport const stepStatusEnum = pgEnum(\"step_status\", [\n  \"not_started\",\n  \"in_progress\", \n  \"blocked\",\n  \"completed\",\n  \"cancelled\",\n]);\n\nexport const bepicStatusEnum = pgEnum(\"bepic_status\", [\n  \"new\",\n  \"in_progress\",\n  \"review\",\n  \"testing\",\n  \"done\",\n  \"cancelled\",\n]);\n\nexport const epicStatusEnum = pgEnum(\"epic_status\", [\n  \"new\",\n  \"in_progress\", \n  \"review\",\n  \"testing\",\n  \"done\",\n  \"cancelled\",\n]);\n\nexport const storyStatusEnum = pgEnum(\"story_status\", [\n  \"new\",\n  \"in_progress\",\n  \"review\", \n  \"testing\",\n  \"done\",\n  \"cancelled\",\n]);\n\nexport const projectPhaseEnum = pgEnum(\"project_phase\", [\n  \"initiation\",\n  \"planning\",\n  \"execution\",\n  \"monitoring_controlling\",\n  \"closure\",\n]);\n\nexport const phaseStageStatusEnum = pgEnum(\"phase_stage_status\", [\n  \"not_started\",\n  \"in_progress\",\n  \"completed\",\n  \"skipped\",\n]);\n\nexport const integrationStatusEnum = pgEnum(\"integration_status\", [\n  \"connected\",\n  \"limited\",\n  \"disconnected\",\n  \"error\",\n]);\n\n// Core Tables\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  email: varchar(\"email\").unique().notNull(),\n  role: varchar(\"role\").notNull(),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Platforms - manageable list of platforms that programs can belong to\nexport const platforms = pgTable(\"platforms\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull().unique(),\n  description: text(\"description\"),\n  color: varchar(\"color\").default(\"#3B82F6\"), // Hex color for UI\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Initiatives - high-level strategic objectives that span multiple programs/projects\nexport const initiatives = pgTable(\"initiatives\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  description: text(\"description\"),\n  status: programStatusEnum(\"status\").default(\"planning\"),\n  ownerId: varchar(\"owner_id\").references(() => users.id),\n  strategicObjectives: jsonb(\"strategic_objectives\"), // High-level business objectives\n  successCriteria: jsonb(\"success_criteria\"), // Key success metrics\n  startDate: timestamp(\"start_date\"),\n  endDate: timestamp(\"end_date\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const programs = pgTable(\"programs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  description: text(\"description\"),\n  status: programStatusEnum(\"status\").default(\"planning\"),\n  ownerId: varchar(\"owner_id\").references(() => users.id),\n  platformId: varchar(\"platform_id\").references(() => platforms.id),\n  objectives: jsonb(\"objectives\"), // Array of OKRs\n  kpis: jsonb(\"kpis\"), // Key Performance Indicators\n  startDate: timestamp(\"start_date\"),\n  endDate: timestamp(\"end_date\"),\n  actualStartDate: timestamp(\"actual_start_date\"), // For programs added mid-execution\n  estimatedCompletionPercentage: integer(\"estimated_completion_percentage\").default(0), // 0-100 for mid-execution programs\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Projects - contained within programs\nexport const projects = pgTable(\"projects\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  description: text(\"description\"),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  status: programStatusEnum(\"status\").default(\"planning\"),\n  ownerId: varchar(\"owner_id\").references(() => users.id),\n  deliverables: jsonb(\"deliverables\"), // Key project deliverables\n  budget: decimal(\"budget\", { precision: 12, scale: 2 }),\n  startDate: timestamp(\"start_date\"),\n  endDate: timestamp(\"end_date\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Many-to-many mapping between initiatives and programs\nexport const initiativePrograms = pgTable(\"initiative_programs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  initiativeId: varchar(\"initiative_id\").references(() => initiatives.id),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  contribution: text(\"contribution\"), // How this program contributes to the initiative\n  priority: integer(\"priority\"), // Priority within the initiative\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Many-to-many mapping between initiatives and projects\nexport const initiativeProjects = pgTable(\"initiative_projects\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  initiativeId: varchar(\"initiative_id\").references(() => initiatives.id),\n  projectId: varchar(\"project_id\").references(() => projects.id),\n  contribution: text(\"contribution\"), // How this project contributes to the initiative\n  priority: integer(\"priority\"), // Priority within the initiative\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const milestones = pgTable(\"milestones\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  projectId: varchar(\"project_id\").references(() => projects.id),\n  status: milestoneStatusEnum(\"status\").default(\"not_started\"),\n  ownerId: varchar(\"owner_id\").references(() => users.id),\n  dueDate: timestamp(\"due_date\"),\n  completedDate: timestamp(\"completed_date\"),\n  jiraEpicKey: varchar(\"jira_epic_key\"), // JIRA integration\n  pmpPhase: varchar(\"pmp_phase\"), // PMI PMP project phase (Initiating, Planning, Executing, Monitoring, Closing)\n  priority: integer(\"priority\").default(1), // 1-5 priority level\n  progressPercentage: integer(\"progress_percentage\").default(0), // 0-100\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Steps/Subcomponents within milestones\nexport const milestoneSteps = pgTable(\"milestone_steps\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  milestoneId: varchar(\"milestone_id\").references(() => milestones.id),\n  status: stepStatusEnum(\"status\").default(\"not_started\"),\n  ownerId: varchar(\"owner_id\").references(() => users.id),\n  dueDate: timestamp(\"due_date\"),\n  completedDate: timestamp(\"completed_date\"),\n  priority: integer(\"priority\").default(1), // 1-5 priority level\n  progressPercentage: integer(\"progress_percentage\").default(0), // 0-100\n  dependencies: jsonb(\"dependencies\"), // Array of dependent step IDs\n  acceptanceCriteria: jsonb(\"acceptance_criteria\"), // Array of acceptance criteria\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Bepics within steps (JIRA integration)\nexport const jiraBepics = pgTable(\"jira_bepics\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  stepId: varchar(\"step_id\").references(() => milestoneSteps.id),\n  jiraBepicKey: varchar(\"jira_bepic_key\").unique(), // JIRA Bepic key\n  status: bepicStatusEnum(\"status\").default(\"new\"),\n  assigneeId: varchar(\"assignee_id\").references(() => users.id),\n  priority: integer(\"priority\").default(1), // 1-5 priority level\n  storyPoints: integer(\"story_points\"),\n  dueDate: timestamp(\"due_date\"),\n  completedDate: timestamp(\"completed_date\"),\n  jiraUrl: varchar(\"jira_url\"), // Direct link to JIRA\n  labels: jsonb(\"labels\"), // Array of JIRA labels\n  components: jsonb(\"components\"), // Array of JIRA components\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Epics within Bepics (JIRA integration)\nexport const jiraEpics = pgTable(\"jira_epics\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  bepicId: varchar(\"bepic_id\").references(() => jiraBepics.id),\n  jiraEpicKey: varchar(\"jira_epic_key\").unique(), // JIRA Epic key\n  status: epicStatusEnum(\"status\").default(\"new\"),\n  assigneeId: varchar(\"assignee_id\").references(() => users.id),\n  priority: integer(\"priority\").default(1), // 1-5 priority level\n  storyPoints: integer(\"story_points\"),\n  dueDate: timestamp(\"due_date\"),\n  completedDate: timestamp(\"completed_date\"),\n  jiraUrl: varchar(\"jira_url\"), // Direct link to JIRA\n  labels: jsonb(\"labels\"), // Array of JIRA labels\n  components: jsonb(\"components\"), // Array of JIRA components\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Stories within Epics (JIRA integration)\nexport const jiraStories = pgTable(\"jira_stories\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  epicId: varchar(\"epic_id\").references(() => jiraEpics.id),\n  jiraStoryKey: varchar(\"jira_story_key\").unique(), // JIRA Story key\n  status: storyStatusEnum(\"status\").default(\"new\"),\n  assigneeId: varchar(\"assignee_id\").references(() => users.id),\n  priority: integer(\"priority\").default(1), // 1-5 priority level\n  storyPoints: integer(\"story_points\"),\n  dueDate: timestamp(\"due_date\"),\n  completedDate: timestamp(\"completed_date\"),\n  jiraUrl: varchar(\"jira_url\"), // Direct link to JIRA\n  labels: jsonb(\"labels\"), // Array of JIRA labels\n  components: jsonb(\"components\"), // Array of JIRA components\n  acceptanceCriteria: jsonb(\"acceptance_criteria\"), // Array of acceptance criteria\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Program Planning Phase Management\nexport const programPhases = pgTable(\"program_phases\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  projectId: varchar(\"project_id\").references(() => projects.id),\n  phase: projectPhaseEnum(\"phase\").notNull(),\n  status: phaseStageStatusEnum(\"status\").default(\"not_started\"),\n  startDate: timestamp(\"start_date\"),\n  endDate: timestamp(\"end_date\"),\n  completedDate: timestamp(\"completed_date\"),\n  phaseGate: boolean(\"phase_gate\").default(false), // Phase gate approval required\n  gateApprover: varchar(\"gate_approver\").references(() => users.id),\n  gateApprovedDate: timestamp(\"gate_approved_date\"),\n  deliverables: jsonb(\"deliverables\"), // Array of phase deliverables\n  successCriteria: jsonb(\"success_criteria\"), // Phase completion criteria\n  lessons: text(\"lessons\"), // Lessons learned from this phase\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Individual stages within each project management phase\nexport const phaseStages = pgTable(\"phase_stages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  programPhaseId: varchar(\"program_phase_id\").references(() => programPhases.id),\n  stageName: varchar(\"stage_name\").notNull(),\n  stageOrder: integer(\"stage_order\").notNull(), // Order within the phase\n  description: text(\"description\"),\n  status: phaseStageStatusEnum(\"status\").default(\"not_started\"),\n  requiredInputs: jsonb(\"required_inputs\"), // What's needed to start this stage\n  expectedOutputs: jsonb(\"expected_outputs\"), // What should be produced\n  templates: jsonb(\"templates\"), // Available templates for this stage\n  bestPractices: jsonb(\"best_practices\"), // Best practice recommendations\n  userInputs: jsonb(\"user_inputs\"), // User-provided data for this stage\n  aiRecommendations: jsonb(\"ai_recommendations\"), // AI-generated recommendations\n  completedDate: timestamp(\"completed_date\"),\n  validationNotes: text(\"validation_notes\"), // Validation notes before proceeding\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const risks = pgTable(\"risks\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  projectId: varchar(\"project_id\").references(() => projects.id),\n  severity: riskSeverityEnum(\"severity\"),\n  impact: integer(\"impact\"), // 1-5 scale\n  probability: integer(\"probability\"), // 1-5 scale\n  status: riskStatusEnum(\"status\").default(\"identified\"),\n  ownerId: varchar(\"owner_id\").references(() => users.id),\n  mitigationPlan: text(\"mitigation_plan\"),\n  dueDate: timestamp(\"due_date\"),\n  jiraIssueKey: varchar(\"jira_issue_key\"), // JIRA integration\n  aiScore: decimal(\"ai_score\", { precision: 5, scale: 2 }), // AI-predicted risk score\n  pmpCategory: varchar(\"pmp_category\"), // PMP risk categories (Technical, External, Organizational, Project Management)\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const dependencies = pgTable(\"dependencies\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  description: text(\"description\"),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  upstreamId: varchar(\"upstream_id\"), // Can reference another program/milestone\n  downstreamId: varchar(\"downstream_id\"), // Can reference another program/milestone\n  status: dependencyStatusEnum(\"status\").default(\"on_track\"),\n  ownerId: varchar(\"owner_id\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const adopters = pgTable(\"adopters\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  teamName: varchar(\"team_name\").notNull(),\n  description: text(\"description\"),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  status: adopterStatusEnum(\"status\").default(\"not_started\"),\n  readinessScore: integer(\"readiness_score\"), // 0-100\n  contactId: varchar(\"contact_id\").references(() => users.id),\n  onboardingNotes: text(\"onboarding_notes\"),\n  lastCheckIn: timestamp(\"last_check_in\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const escalations = pgTable(\"escalations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  summary: varchar(\"summary\").notNull(),\n  description: text(\"description\"),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  urgency: escalationUrgencyEnum(\"urgency\"),\n  status: escalationStatusEnum(\"status\").default(\"open\"),\n  ownerId: varchar(\"owner_id\").references(() => users.id),\n  reporterId: varchar(\"reporter_id\").references(() => users.id),\n  impact: text(\"impact\"),\n  sendToSlack: boolean(\"send_to_slack\").default(false),\n  sendToTeams: boolean(\"send_to_teams\").default(false),\n  sendToEmail: boolean(\"send_to_email\").default(false),\n  resolvedAt: timestamp(\"resolved_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const integrations = pgTable(\"integrations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(), // jira, smartsheet, confluence, slack, teams\n  status: integrationStatusEnum(\"status\").default(\"disconnected\"),\n  apiUrl: varchar(\"api_url\"),\n  apiKey: varchar(\"api_key\"),\n  webhookUrl: varchar(\"webhook_url\"),\n  lastSync: timestamp(\"last_sync\"),\n  config: jsonb(\"config\"), // Integration-specific configuration\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const reports = pgTable(\"reports\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: varchar(\"title\").notNull(),\n  type: varchar(\"type\").notNull(), // weekly, monthly, quarterly\n  programId: varchar(\"program_id\").references(() => programs.id),\n  generatedBy: varchar(\"generated_by\").references(() => users.id),\n  content: jsonb(\"content\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  ownedPrograms: many(programs),\n  ownedMilestones: many(milestones),\n  ownedRisks: many(risks),\n  ownedDependencies: many(dependencies),\n  adopterContacts: many(adopters),\n  ownedEscalations: many(escalations),\n  reportedEscalations: many(escalations),\n  generatedReports: many(reports),\n}));\n\nexport const programsRelations = relations(programs, ({ one, many }) => ({\n  owner: one(users, {\n    fields: [programs.ownerId],\n    references: [users.id],\n  }),\n  milestones: many(milestones),\n  risks: many(risks),\n  dependencies: many(dependencies),\n  adopters: many(adopters),\n  escalations: many(escalations),\n  reports: many(reports),\n}));\n\nexport const milestonesRelations = relations(milestones, ({ one }) => ({\n  program: one(programs, {\n    fields: [milestones.programId],\n    references: [programs.id],\n  }),\n  owner: one(users, {\n    fields: [milestones.ownerId],\n    references: [users.id],\n  }),\n}));\n\nexport const risksRelations = relations(risks, ({ one }) => ({\n  program: one(programs, {\n    fields: [risks.programId],\n    references: [programs.id],\n  }),\n  owner: one(users, {\n    fields: [risks.ownerId],\n    references: [users.id],\n  }),\n}));\n\nexport const dependenciesRelations = relations(dependencies, ({ one }) => ({\n  program: one(programs, {\n    fields: [dependencies.programId],\n    references: [programs.id],\n  }),\n  owner: one(users, {\n    fields: [dependencies.ownerId],\n    references: [users.id],\n  }),\n}));\n\nexport const adoptersRelations = relations(adopters, ({ one }) => ({\n  program: one(programs, {\n    fields: [adopters.programId],\n    references: [programs.id],\n  }),\n  contact: one(users, {\n    fields: [adopters.contactId],\n    references: [users.id],\n  }),\n}));\n\nexport const escalationsRelations = relations(escalations, ({ one }) => ({\n  program: one(programs, {\n    fields: [escalations.programId],\n    references: [programs.id],\n  }),\n  owner: one(users, {\n    fields: [escalations.ownerId],\n    references: [users.id],\n  }),\n  reporter: one(users, {\n    fields: [escalations.reporterId],\n    references: [users.id],\n  }),\n}));\n\nexport const reportsRelations = relations(reports, ({ one }) => ({\n  program: one(programs, {\n    fields: [reports.programId],\n    references: [programs.id],\n  }),\n  generatedBy: one(users, {\n    fields: [reports.generatedBy],\n    references: [users.id],\n  }),\n}));\n\n// Insert Schemas\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertPlatformSchema = createInsertSchema(platforms).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertProgramSchema = createInsertSchema(programs).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertMilestoneSchema = createInsertSchema(milestones).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n}).extend({\n  dueDate: z.string().optional().transform(val => val ? new Date(val) : undefined),\n  completedDate: z.string().optional().transform(val => val ? new Date(val) : undefined),\n});\n\nexport const insertRiskSchema = createInsertSchema(risks).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertDependencySchema = createInsertSchema(dependencies).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertAdopterSchema = createInsertSchema(adopters).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertEscalationSchema = createInsertSchema(escalations).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertIntegrationSchema = createInsertSchema(integrations).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertReportSchema = createInsertSchema(reports).omit({\n  id: true,\n  createdAt: true,\n});\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport type Platform = typeof platforms.$inferSelect;\nexport type InsertPlatform = z.infer<typeof insertPlatformSchema>;\n\nexport type Program = typeof programs.$inferSelect;\nexport type InsertProgram = z.infer<typeof insertProgramSchema>;\n\nexport type Milestone = typeof milestones.$inferSelect;\nexport type InsertMilestone = z.infer<typeof insertMilestoneSchema>;\n\nexport type Risk = typeof risks.$inferSelect;\nexport type InsertRisk = z.infer<typeof insertRiskSchema>;\n\nexport type Dependency = typeof dependencies.$inferSelect;\nexport type InsertDependency = z.infer<typeof insertDependencySchema>;\n\nexport type Adopter = typeof adopters.$inferSelect;\nexport type InsertAdopter = z.infer<typeof insertAdopterSchema>;\n\nexport type Escalation = typeof escalations.$inferSelect;\nexport type InsertEscalation = z.infer<typeof insertEscalationSchema>;\n\nexport type Integration = typeof integrations.$inferSelect;\nexport type InsertIntegration = z.infer<typeof insertIntegrationSchema>;\n\nexport type Report = typeof reports.$inferSelect;\nexport type InsertReport = z.infer<typeof insertReportSchema>;\n\n// Stakeholder tracking with leadership styles and predictive analysis\nexport const stakeholders = pgTable(\"stakeholders\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  email: varchar(\"email\"),\n  role: varchar(\"role\"),\n  department: varchar(\"department\"),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  projectId: varchar(\"project_id\").references(() => projects.id),\n  leadershipStyle: varchar(\"leadership_style\"), // Autocratic, Democratic, Laissez-faire, Transformational, etc.\n  communicationStyle: varchar(\"communication_style\"), // Direct, Analytical, Expressive, Amiable\n  decisionMakingStyle: varchar(\"decision_making_style\"), // Data-driven, Intuitive, Consensus-seeking, Quick\n  influenceLevel: integer(\"influence_level\"), // 1-5 scale\n  supportLevel: integer(\"support_level\"), // 1-5 scale for project support\n  preferredCommunication: jsonb(\"preferred_communication\"), // Email, Slack, Face-to-face, etc.\n  responsePatterns: jsonb(\"response_patterns\"), // Historical response analysis\n  predictiveScore: decimal(\"predictive_score\", { precision: 5, scale: 2 }), // AI prediction accuracy\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Stakeholder interactions tracking\nexport const stakeholderInteractions = pgTable(\"stakeholder_interactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  stakeholderId: varchar(\"stakeholder_id\").references(() => stakeholders.id),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  projectId: varchar(\"project_id\").references(() => projects.id),\n  interactionType: varchar(\"interaction_type\"), // Meeting, Email, Decision, Escalation\n  context: text(\"context\"), // What was discussed or decided\n  predictedResponse: text(\"predicted_response\"), // AI predicted response\n  actualResponse: text(\"actual_response\"), // What actually happened\n  accuracy: decimal(\"accuracy\", { precision: 5, scale: 2 }), // Prediction accuracy score\n  recommendations: jsonb(\"recommendations\"), // AI recommendations for this stakeholder\n  followUpRequired: boolean(\"follow_up_required\").default(false),\n  followUpDate: timestamp(\"follow_up_date\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// PMP best practices tracking and recommendations\nexport const pmpRecommendations = pgTable(\"pmp_recommendations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  programId: varchar(\"program_id\").references(() => programs.id),\n  projectId: varchar(\"project_id\").references(() => projects.id),\n  pmpPhase: varchar(\"pmp_phase\").notNull(), // Initiating, Planning, Executing, Monitoring, Closing\n  knowledgeArea: varchar(\"knowledge_area\"), // Integration, Scope, Schedule, Cost, Quality, Resource, Communications, Risk, Procurement, Stakeholder\n  recommendation: text(\"recommendation\").notNull(),\n  reasoning: text(\"reasoning\"), // Why this recommendation was made\n  priority: integer(\"priority\"), // 1-5 priority level\n  status: varchar(\"status\").default(\"pending\"), // pending, accepted, implemented, rejected\n  implementedDate: timestamp(\"implemented_date\"),\n  feedback: text(\"feedback\"), // User feedback on the recommendation\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// Insert schemas for new entities\nexport const insertInitiativeSchema = createInsertSchema(initiatives).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertProjectSchema = createInsertSchema(projects).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertStakeholderSchema = createInsertSchema(stakeholders).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertStakeholderInteractionSchema = createInsertSchema(stakeholderInteractions).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertPmpRecommendationSchema = createInsertSchema(pmpRecommendations).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\n// Insert schemas for new hierarchical entities\nexport const insertMilestoneStepSchema = createInsertSchema(milestoneSteps).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertJiraBepicSchema = createInsertSchema(jiraBepics).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertJiraEpicSchema = createInsertSchema(jiraEpics).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertJiraStorySchema = createInsertSchema(jiraStories).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertProgramPhaseSchema = createInsertSchema(programPhases).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertPhaseStageSchema = createInsertSchema(phaseStages).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\n// Types for new entities\nexport type Initiative = typeof initiatives.$inferSelect;\nexport type InsertInitiative = z.infer<typeof insertInitiativeSchema>;\nexport type Project = typeof projects.$inferSelect;\nexport type InsertProject = z.infer<typeof insertProjectSchema>;\nexport type Stakeholder = typeof stakeholders.$inferSelect;\nexport type InsertStakeholder = z.infer<typeof insertStakeholderSchema>;\nexport type StakeholderInteraction = typeof stakeholderInteractions.$inferSelect;\nexport type InsertStakeholderInteraction = z.infer<typeof insertStakeholderInteractionSchema>;\nexport type PmpRecommendation = typeof pmpRecommendations.$inferSelect;\nexport type InsertPmpRecommendation = z.infer<typeof insertPmpRecommendationSchema>;\n\n// Types for hierarchical entities\nexport type MilestoneStep = typeof milestoneSteps.$inferSelect;\nexport type InsertMilestoneStep = z.infer<typeof insertMilestoneStepSchema>;\nexport type JiraBepic = typeof jiraBepics.$inferSelect;\nexport type InsertJiraBepic = z.infer<typeof insertJiraBepicSchema>;\nexport type JiraEpic = typeof jiraEpics.$inferSelect;\nexport type InsertJiraEpic = z.infer<typeof insertJiraEpicSchema>;\nexport type JiraStory = typeof jiraStories.$inferSelect;\nexport type InsertJiraStory = z.infer<typeof insertJiraStorySchema>;\nexport type ProgramPhase = typeof programPhases.$inferSelect;\nexport type InsertProgramPhase = z.infer<typeof insertProgramPhaseSchema>;\nexport type PhaseStage = typeof phaseStages.$inferSelect;\nexport type InsertPhaseStage = z.infer<typeof insertPhaseStageSchema>;\n\n// Dashboard metrics type\nexport type DashboardMetrics = {\n  activePrograms: number;\n  criticalRisks: number;\n  upcomingMilestones: number;\n  adopterScore: number;\n};\n","size_bytes":29446},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { Sidebar } from \"@/components/layout/Sidebar\";\nimport Dashboard from \"@/pages/Dashboard\";\n\nimport AIAssistant from \"@/pages/AIAssistant\";\nimport Programs from \"@/pages/Programs\";\nimport ProgramDetails from \"@/pages/ProgramDetails\";\nimport Milestones from \"@/pages/Milestones\";\nimport RiskManagement from \"@/pages/RiskManagement\";\nimport Dependencies from \"@/pages/Dependencies\";\nimport AdopterSupport from \"@/pages/AdopterSupport\";\nimport Escalations from \"@/pages/Escalations\";\nimport ExecutiveReports from \"@/pages/ExecutiveReports\";\nimport Settings from \"@/pages/Settings\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      <Sidebar />\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <Switch>\n          <Route path=\"/\" component={AIAssistant} />\n          <Route path=\"/dashboard\" component={Dashboard} />\n          <Route path=\"/programs\" component={Programs} />\n          <Route path=\"/programs/:id\">\n            {(params) => <ProgramDetails programId={params.id} />}\n          </Route>\n          <Route path=\"/milestones\" component={Milestones} />\n          <Route path=\"/risk-management\" component={RiskManagement} />\n          <Route path=\"/dependencies\" component={Dependencies} />\n          <Route path=\"/adopter-support\" component={AdopterSupport} />\n          <Route path=\"/escalations\" component={Escalations} />\n          <Route path=\"/executive-reports\" component={ExecutiveReports} />\n          <Route path=\"/settings\" component={Settings} />\n          <Route component={NotFound} />\n        </Switch>\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2134},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0, 0%, 100%);\n  --foreground: hsl(20, 14.3%, 4.1%);\n  --muted: hsl(60, 4.8%, 95.9%);\n  --muted-foreground: hsl(25, 5.3%, 44.7%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(20, 14.3%, 4.1%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(20, 14.3%, 4.1%);\n  --border: hsl(20, 5.9%, 90%);\n  --input: hsl(20, 5.9%, 90%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(60, 4.8%, 95.9%);\n  --secondary-foreground: hsl(24, 9.8%, 10%);\n  --accent: hsl(60, 4.8%, 95.9%);\n  --accent-foreground: hsl(24, 9.8%, 10%);\n  --destructive: hsl(0, 84.2%, 60.2%);\n  --destructive-foreground: hsl(60, 9.1%, 97.8%);\n  --ring: hsl(20, 14.3%, 4.1%);\n  --radius: 0.5rem;\n  \n  /* TPM Platform specific colors */\n  --primary-50: hsl(210, 100%, 95%);\n  --primary-100: hsl(210, 100%, 90%);\n  --primary-500: hsl(207, 90%, 54%);\n  --primary-600: hsl(213, 94%, 42%);\n  --primary-700: hsl(217, 91%, 24%);\n  --success: hsl(122, 39%, 49%);\n  --warning: hsl(35, 100%, 55%);\n  --danger: hsl(4, 90%, 58%);\n  --gray-50: hsl(0, 0%, 98%);\n  --gray-100: hsl(0, 0%, 96%);\n  --gray-200: hsl(0, 0%, 93%);\n  --gray-300: hsl(0, 0%, 88%);\n  --gray-400: hsl(0, 0%, 74%);\n  --gray-500: hsl(0, 0%, 62%);\n  --gray-600: hsl(0, 0%, 46%);\n  --gray-700: hsl(0, 0%, 38%);\n  --gray-800: hsl(0, 0%, 26%);\n  --gray-900: hsl(0, 0%, 13%);\n}\n\n.dark {\n  --background: hsl(240, 10%, 3.9%);\n  --foreground: hsl(0, 0%, 98%);\n  --muted: hsl(240, 3.7%, 15.9%);\n  --muted-foreground: hsl(240, 5%, 64.9%);\n  --popover: hsl(240, 10%, 3.9%);\n  --popover-foreground: hsl(0, 0%, 98%);\n  --card: hsl(240, 10%, 3.9%);\n  --card-foreground: hsl(0, 0%, 98%);\n  --border: hsl(240, 3.7%, 15.9%);\n  --input: hsl(240, 3.7%, 15.9%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --secondary: hsl(240, 3.7%, 15.9%);\n  --secondary-foreground: hsl(0, 0%, 98%);\n  --accent: hsl(240, 3.7%, 15.9%);\n  --accent-foreground: hsl(0, 0%, 98%);\n  --destructive: hsl(0, 62.8%, 30.6%);\n  --destructive-foreground: hsl(0, 0%, 98%);\n  --ring: hsl(240, 4.9%, 83.9%);\n  --radius: 0.5rem;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n    font-family: 'Inter', system-ui, sans-serif;\n  }\n}\n\n@layer utilities {\n  .text-primary-50 { color: var(--primary-50); }\n  .text-primary-100 { color: var(--primary-100); }\n  .text-primary-500 { color: var(--primary-500); }\n  .text-primary-600 { color: var(--primary-600); }\n  .text-primary-700 { color: var(--primary-700); }\n  .text-success { color: var(--success); }\n  .text-warning { color: var(--warning); }\n  .text-danger { color: var(--danger); }\n  \n  .bg-primary-50 { background-color: var(--primary-50); }\n  .bg-primary-100 { background-color: var(--primary-100); }\n  .bg-primary-500 { background-color: var(--primary-500); }\n  .bg-primary-600 { background-color: var(--primary-600); }\n  .bg-primary-700 { background-color: var(--primary-700); }\n  .bg-success { background-color: var(--success); }\n  .bg-warning { background-color: var(--warning); }\n  .bg-danger { background-color: var(--danger); }\n  \n  .hover\\:bg-primary-600:hover { background-color: var(--primary-600); }\n  .hover\\:text-primary-600:hover { color: var(--primary-600); }\n  \n  .border-primary-200 { border-color: var(--primary-100); }\n}\n\n/* Custom scrollbar styles */\n.custom-scrollbar::-webkit-scrollbar {\n  width: 6px;\n}\n\n.custom-scrollbar::-webkit-scrollbar-track {\n  background: var(--gray-100);\n}\n\n.custom-scrollbar::-webkit-scrollbar-thumb {\n  background: var(--gray-300);\n  border-radius: 3px;\n}\n\n.custom-scrollbar::-webkit-scrollbar-thumb:hover {\n  background: var(--gray-400);\n}\n\n/* Risk heatmap colors */\n.risk-low {\n  background-color: var(--success);\n}\n\n.risk-medium {\n  background-color: var(--warning);\n}\n\n.risk-high {\n  background-color: var(--danger);\n}\n\n/* Animation for loading states */\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n.animate-pulse {\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n\n/* Gradient backgrounds */\n.gradient-purple-blue {\n  background: linear-gradient(135deg, hsl(255, 100%, 98%) 0%, hsl(210, 100%, 98%) 100%);\n}\n","size_bytes":4299},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\n// Add global error handlers\nwindow.addEventListener('unhandledrejection', (event) => {\n  console.error('Unhandled promise rejection:', event.reason);\n  // Prevent the default browser behavior\n  event.preventDefault();\n});\n\nwindow.addEventListener('error', (event) => {\n  console.error('Global error:', event.error);\n});\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":479},"server/services/ai.ts":{"content":"import OpenAI from \"openai\";\nimport { storage } from \"../storage\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport type { \n  Program, \n  Milestone, \n  Risk, \n  Dependency, \n  Adopter,\n  Escalation,\n  InsertProgram,\n  InsertMilestone,\n  InsertRisk,\n  InsertDependency,\n  InsertAdopter,\n  InsertEscalation\n} from \"@shared/schema\";\n\n// the newest OpenAI model is \"gpt-4o\" which was released May 13, 2024. do not change this unless explicitly requested by the user\nconst openai = new OpenAI({ \n  apiKey: process.env.OPENAI_API_KEY || process.env.OPENAI_API_KEY_ENV_VAR || \"your-api-key-here\"\n});\n\nexport interface AICommand {\n  action: string;\n  parameters: Record<string, any>;\n  confidence: number;\n}\n\nexport interface AIAnalysis {\n  suggestions: string[];\n  risks: string[];\n  gaps: string[];\n  improvements: string[];\n}\n\nexport interface VoiceCommandResult {\n  success: boolean;\n  message: string;\n  data?: any;\n  followUp?: string[];\n}\n\nexport class AIService {\n  async summarizeText(text: string): Promise<string> {\n    try {\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: \"You are a technical program manager assistant. Summarize the following text concisely while maintaining key technical details and action items.\"\n          },\n          {\n            role: \"user\",\n            content: text\n          }\n        ],\n        max_tokens: 500\n      });\n\n      return response.choices[0].message.content || \"Unable to generate summary\";\n    } catch (error) {\n      console.error(\"Error in AI summarization:\", error);\n      throw new Error(\"Failed to summarize text\");\n    }\n  }\n\n  async extractActionItems(text: string): Promise<string[]> {\n    try {\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: \"You are a technical program manager assistant. Extract action items from the following text. Return the response as a JSON array of strings. Each action item should be clear and actionable.\"\n          },\n          {\n            role: \"user\",\n            content: text\n          }\n        ],\n        response_format: { type: \"json_object\" },\n        max_tokens: 500\n      });\n\n      const result = JSON.parse(response.choices[0].message.content || '{\"actions\": []}');\n      return result.actions || [];\n    } catch (error) {\n      console.error(\"Error extracting action items:\", error);\n      throw new Error(\"Failed to extract action items\");\n    }\n  }\n\n  async calculateRiskScore(riskDescription: string): Promise<number> {\n    try {\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: \"You are a risk assessment expert. Analyze the following risk description and provide a risk score from 1-100 based on potential impact and likelihood. Return the response as JSON with a 'score' field.\"\n          },\n          {\n            role: \"user\",\n            content: riskDescription\n          }\n        ],\n        response_format: { type: \"json_object\" },\n        max_tokens: 100\n      });\n\n      const result = JSON.parse(response.choices[0].message.content || '{\"score\": 50}');\n      return Math.max(1, Math.min(100, result.score));\n    } catch (error) {\n      console.error(\"Error calculating risk score:\", error);\n      return 50; // Default moderate risk score\n    }\n  }\n\n  async predictMilestoneDelays(programId: string): Promise<{\n    milestoneId: string;\n    delayProbability: number;\n    recommendedActions: string[];\n  }[]> {\n    try {\n      const milestones = await storage.getMilestones(programId);\n      const risks = await storage.getRisks(programId);\n      const dependencies = await storage.getDependencies(programId);\n\n      const analysisData = {\n        milestones: milestones.map(m => ({\n          id: m.id,\n          title: m.title,\n          status: m.status,\n          dueDate: m.dueDate\n        })),\n        risks: risks.map(r => ({\n          severity: r.severity,\n          status: r.status,\n          impact: r.impact\n        })),\n        dependencies: dependencies.map(d => ({\n          status: d.status\n        }))\n      };\n\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: \"You are a technical program manager AI assistant. Analyze the program data and predict milestone delay probabilities (0-100) and recommend specific actions. Return JSON with an array of predictions.\"\n          },\n          {\n            role: \"user\",\n            content: `Analyze this program data and predict delays: ${JSON.stringify(analysisData)}`\n          }\n        ],\n        response_format: { type: \"json_object\" },\n        max_tokens: 1000\n      });\n\n      const result = JSON.parse(response.choices[0].message.content || '{\"predictions\": []}');\n      return result.predictions || [];\n    } catch (error) {\n      console.error(\"Error predicting milestone delays:\", error);\n      throw new Error(\"Failed to predict milestone delays\");\n    }\n  }\n\n  async generateInsights(programId: string): Promise<{\n    riskPrediction: string;\n    adopterSupport: string;\n    programHealth: string;\n  }> {\n    try {\n      const program = await storage.getProgram(programId);\n      const risks = await storage.getRisks(programId);\n      const adopters = await storage.getAdopters(programId);\n      const milestones = await storage.getMilestones(programId);\n\n      const programData = {\n        program: {\n          name: program?.name,\n          status: program?.status\n        },\n        risks: risks.map(r => ({\n          severity: r.severity,\n          status: r.status,\n          title: r.title\n        })),\n        adopters: adopters.map(a => ({\n          teamName: a.teamName,\n          status: a.status,\n          readinessScore: a.readinessScore\n        })),\n        milestones: milestones.map(m => ({\n          title: m.title,\n          status: m.status,\n          dueDate: m.dueDate\n        }))\n      };\n\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: \"You are a senior technical program manager AI assistant. Analyze the program data and provide insights on risk prediction, adopter support needs, and overall program health. Return JSON with riskPrediction, adopterSupport, and programHealth fields.\"\n          },\n          {\n            role: \"user\",\n            content: `Analyze this program data: ${JSON.stringify(programData)}`\n          }\n        ],\n        response_format: { type: \"json_object\" },\n        max_tokens: 800\n      });\n\n      const result = JSON.parse(response.choices[0].message.content || '{}');\n      return {\n        riskPrediction: result.riskPrediction || \"No risk analysis available\",\n        adopterSupport: result.adopterSupport || \"No adopter analysis available\",\n        programHealth: result.programHealth || \"Program health analysis unavailable\"\n      };\n    } catch (error) {\n      console.error(\"Error generating AI insights:\", error);\n      throw new Error(\"Failed to generate AI insights\");\n    }\n  }\n\n  async generateReport(programId: string, type: string): Promise<any> {\n    try {\n      const program = await storage.getProgram(programId);\n      const risks = await storage.getRisks(programId);\n      const milestones = await storage.getMilestones(programId);\n      const adopters = await storage.getAdopters(programId);\n\n      const reportData = {\n        program,\n        risks,\n        milestones,\n        adopters,\n        type\n      };\n\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: `You are a technical program manager assistant. Generate a comprehensive ${type} report based on the program data. Include executive summary, key metrics, risk assessment, milestone progress, and recommendations.`\n          },\n          {\n            role: \"user\",\n            content: `Generate a ${type} report for this program data: ${JSON.stringify(reportData)}`\n          }\n        ],\n        response_format: { type: \"json_object\" },\n        max_tokens: 2000\n      });\n\n      const reportContent = JSON.parse(response.choices[0].message.content || '{}');\n      \n      // Save the generated report\n      const report = await storage.createReport({\n        title: `${type} Report - ${program?.name}`,\n        type,\n        programId,\n        content: reportContent,\n        generatedBy: \"ai-system\" // In a real app, this would be the current user ID\n      });\n\n      return report;\n    } catch (error) {\n      console.error(\"Error generating report:\", error);\n      throw new Error(\"Failed to generate report\");\n    }\n  }\n\n  // AI-FIRST FEATURES - Voice & Chat Interface\n\n  async processVoiceCommand(input: string): Promise<VoiceCommandResult> {\n    try {\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: `You are an AI-first Technical Program Manager assistant. Parse voice/text commands and extract actionable instructions.\n\nAvailable actions:\n- create_program: Create a new program\n- create_milestone: Add milestone to a program\n- create_risk: Add a risk\n- create_dependency: Track a dependency\n- analyze_program: Analyze program health\n- generate_report: Create executive report\n- escalate_issue: Create escalation\n\nReturn JSON with: action, parameters, confidence (0-100), and reasoning.\n\nExample: \"Create a new program called API Migration with deadline March 15th\"\nShould return: {\"action\": \"create_program\", \"parameters\": {\"name\": \"API Migration\", \"endDate\": \"2024-03-15\"}, \"confidence\": 95}`\n          },\n          {\n            role: \"user\",\n            content: input\n          }\n        ],\n        response_format: { type: \"json_object\" }\n      });\n\n      const parsed = JSON.parse(response.choices[0].message.content || '{}');\n      return await this.executeVoiceCommand(parsed);\n    } catch (error) {\n      console.error(\"Voice command processing error:\", error);\n      return {\n        success: false,\n        message: \"I couldn't understand that command. Try saying something like 'Create a new program called API Migration'\"\n      };\n    }\n  }\n\n  private async executeVoiceCommand(command: AICommand): Promise<VoiceCommandResult> {\n    try {\n      switch (command.action) {\n        case 'create_program':\n          const program = await storage.createProgram({\n            name: command.parameters.name,\n            description: command.parameters.description || `AI-created program: ${command.parameters.name}`,\n            status: 'planning',\n            ownerId: null, // Set based on authenticated user\n            startDate: command.parameters.startDate ? new Date(command.parameters.startDate) : new Date(),\n            endDate: command.parameters.endDate ? new Date(command.parameters.endDate) : null,\n            objectives: command.parameters.objectives || null,\n            kpis: command.parameters.kpis || null\n          });\n          \n          return {\n            success: true,\n            message: `Created program \"${program.name}\" successfully!`,\n            data: program,\n            followUp: [\n              \"Would you like to add milestones to this program?\",\n              \"Should I analyze potential risks for this program?\",\n              \"Want me to suggest team assignments?\"\n            ]\n          };\n\n        case 'create_milestone':\n          const milestone = await storage.createMilestone({\n            title: command.parameters.title,\n            description: command.parameters.description,\n            programId: command.parameters.programId,\n            status: 'not_started',\n            ownerId: null,\n            dueDate: command.parameters.dueDate ? new Date(command.parameters.dueDate) : null,\n            completedDate: null,\n            jiraEpicKey: null\n          });\n\n          return {\n            success: true,\n            message: `Added milestone \"${milestone.title}\" to the program!`,\n            data: milestone,\n            followUp: [\n              \"Should I identify potential risks for this milestone?\",\n              \"Want me to check for dependencies?\",\n              \"Need me to estimate the timeline?\"\n            ]\n          };\n\n        case 'analyze_program':\n          const analysis = await this.analyzeProgram(command.parameters.programId);\n          return {\n            success: true,\n            message: \"Here's my analysis of your program:\",\n            data: analysis,\n            followUp: [\n              \"Should I create tasks for the identified gaps?\",\n              \"Want me to escalate any critical risks?\",\n              \"Need a detailed report for stakeholders?\"\n            ]\n          };\n\n        default:\n          return {\n            success: false,\n            message: `I don't know how to ${command.action} yet. I'm learning new commands!`\n          };\n      }\n    } catch (error) {\n      console.error(\"Command execution error:\", error);\n      return {\n        success: false,\n        message: \"Something went wrong executing that command. Let me try to help another way.\"\n      };\n    }\n  }\n\n  async analyzeProgram(programId?: string): Promise<AIAnalysis> {\n    try {\n      // Get all program data\n      const programs = programId ? [await storage.getProgram(programId)] : await storage.getPrograms();\n      const milestones = await storage.getMilestones(programId);\n      const risks = await storage.getRisks(programId);\n      const dependencies = await storage.getDependencies(programId);\n      const adopters = await storage.getAdopters(programId);\n\n      const programData = {\n        programs: programs.filter(Boolean),\n        milestones,\n        risks,\n        dependencies,\n        adopters\n      };\n\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: `You are a senior Technical Program Manager AI analyzing program health. \n\nAnalyze the program data and provide:\n1. SUGGESTIONS: Actionable recommendations to improve the program\n2. RISKS: Potential risks that should be tracked (missing from current risks)\n3. GAPS: Missing components or information that could cause problems\n4. IMPROVEMENTS: Specific ways to optimize processes and outcomes\n\nFocus on:\n- Timeline feasibility and resource allocation\n- Missing dependencies or blockers\n- Team readiness and adoption challenges\n- Communication and stakeholder alignment\n- Technical debt and integration risks\n\nReturn JSON with arrays of specific, actionable insights.`\n          },\n          {\n            role: \"user\",\n            content: `Analyze this program data: ${JSON.stringify(programData, null, 2)}`\n          }\n        ],\n        response_format: { type: \"json_object\" },\n        max_tokens: 1500\n      });\n\n      const analysis = JSON.parse(response.choices[0].message.content || '{}');\n      \n      // Auto-create risks for critical gaps\n      if (analysis.risks && analysis.risks.length > 0) {\n        for (const riskDescription of analysis.risks.slice(0, 3)) { // Limit to top 3\n          const riskScore = await this.calculateRiskScore(riskDescription);\n          await storage.createRisk({\n            title: `AI-Identified: ${riskDescription.substring(0, 50)}...`,\n            description: riskDescription,\n            programId: programId || null,\n            severity: riskScore > 70 ? 'critical' : riskScore > 50 ? 'high' : riskScore > 30 ? 'medium' : 'low',\n            probability: Math.round(riskScore),\n            impact: Math.round(riskScore * 0.8),\n            status: 'identified',\n            ownerId: null,\n            mitigationPlan: `AI Suggestion: ${riskDescription}`,\n            jiraIssueKey: null\n          });\n        }\n      }\n\n      return {\n        suggestions: analysis.suggestions || [],\n        risks: analysis.risks || [],\n        gaps: analysis.gaps || [],\n        improvements: analysis.improvements || []\n      };\n    } catch (error) {\n      console.error(\"Program analysis error:\", error);\n      return {\n        suggestions: [\"Unable to analyze program at this time\"],\n        risks: [],\n        gaps: [],\n        improvements: []\n      };\n    }\n  }\n\n  async chatWithAI(message: string, context?: any): Promise<string> {\n    try {\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: `You are an AI-first Technical Program Manager assistant. You help manage engineering programs through conversation.\n\nYou can:\n- Answer questions about programs, milestones, risks, and dependencies\n- Provide advice on program management best practices\n- Suggest improvements and identify gaps\n- Help create and manage program artifacts\n- Escalate issues when needed\n\nKeep responses concise but helpful. Ask clarifying questions when needed. Always think like a senior TPM.\n\nCurrent context: ${context ? JSON.stringify(context) : 'General conversation'}`\n          },\n          {\n            role: \"user\",\n            content: message\n          }\n        ],\n        max_tokens: 500\n      });\n\n      return response.choices[0].message.content || \"I'm not sure how to help with that right now.\";\n    } catch (error) {\n      console.error(\"Chat error:\", error);\n      return \"I'm having trouble processing that right now. Could you try rephrasing?\";\n    }\n  }\n\n  async generateDailyBriefing(): Promise<{\n    summary: string;\n    priorities: string[];\n    alerts: string[];\n    recommendations: string[];\n  }> {\n    try {\n      // Get current program state\n      const programs = await storage.getPrograms();\n      const risks = await storage.getRisks();\n      const milestones = await storage.getMilestones();\n      \n      const today = new Date();\n      const oneWeek = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);\n      \n      const upcomingMilestones = milestones.filter(m => \n        m.dueDate && new Date(m.dueDate) <= oneWeek && new Date(m.dueDate) >= today\n      );\n      \n      const criticalRisks = risks.filter(r => \n        r.severity === 'critical' || r.severity === 'high'\n      );\n\n      const briefingData = {\n        totalPrograms: programs.length,\n        activePrograms: programs.filter(p => p.status === 'active').length,\n        upcomingMilestones: upcomingMilestones.length,\n        criticalRisks: criticalRisks.length,\n        programDetails: programs.map(p => ({\n          name: p.name,\n          status: p.status\n        })),\n        riskDetails: criticalRisks.map(r => ({\n          title: r.title,\n          severity: r.severity\n        }))\n      };\n\n      const response = await openai.chat.completions.create({\n        model: \"gpt-4o\",\n        messages: [\n          {\n            role: \"system\",\n            content: `You are an AI TPM assistant creating a daily briefing. Provide a concise summary, top priorities, critical alerts, and actionable recommendations.\n\nReturn JSON with:\n- summary: Brief overview of current state\n- priorities: Top 3-5 things to focus on today\n- alerts: Critical issues requiring immediate attention\n- recommendations: Specific actions to improve program health`\n          },\n          {\n            role: \"user\",\n            content: `Create daily briefing for: ${JSON.stringify(briefingData)}`\n          }\n        ],\n        response_format: { type: \"json_object\" }\n      });\n\n      return JSON.parse(response.choices[0].message.content || '{}');\n    } catch (error) {\n      console.error(\"Daily briefing error:\", error);\n      return {\n        summary: \"Unable to generate briefing at this time\",\n        priorities: [],\n        alerts: [],\n        recommendations: []\n      };\n    }\n  }\n}\n\nexport const aiService = new AIService();\n","size_bytes":20101},"server/services/integrations.ts":{"content":"import { storage } from \"../storage\";\nimport { Risk, Milestone, Escalation } from \"@shared/schema\";\n\nexport class IntegrationService {\n  async pushMilestoneToJira(milestone: Milestone): Promise<string> {\n    try {\n      const jiraIntegration = await storage.getIntegration(\"jira\");\n      \n      if (!jiraIntegration || jiraIntegration.status !== \"connected\") {\n        throw new Error(\"JIRA integration not configured or connected\");\n      }\n\n      // In a real implementation, this would make actual JIRA API calls\n      const jiraApiUrl = jiraIntegration.apiUrl;\n      const apiKey = jiraIntegration.apiKey;\n\n      // Mock JIRA API call - replace with actual implementation\n      const jiraResponse = await this.mockJiraCreateEpic({\n        summary: milestone.title,\n        description: milestone.description || \"\",\n        dueDate: milestone.dueDate?.toISOString().split('T')[0]\n      });\n\n      return jiraResponse.key;\n    } catch (error) {\n      console.error(\"Error pushing milestone to JIRA:\", error);\n      throw error;\n    }\n  }\n\n  async pushRiskToJira(risk: Risk): Promise<string> {\n    try {\n      const jiraIntegration = await storage.getIntegration(\"jira\");\n      \n      if (!jiraIntegration || jiraIntegration.status !== \"connected\") {\n        throw new Error(\"JIRA integration not configured or connected\");\n      }\n\n      // Mock JIRA API call - replace with actual implementation\n      const jiraResponse = await this.mockJiraCreateIssue({\n        summary: risk.title,\n        description: risk.description || \"\",\n        priority: this.mapRiskSeverityToJiraPriority(risk.severity),\n        issueType: \"Task\" // Could be configurable: Task, Bug, Risk\n      });\n\n      return jiraResponse.key;\n    } catch (error) {\n      console.error(\"Error pushing risk to JIRA:\", error);\n      throw error;\n    }\n  }\n\n  async sendEscalation(escalation: Escalation): Promise<void> {\n    try {\n      const promises: Promise<void>[] = [];\n\n      if (escalation.sendToSlack) {\n        promises.push(this.sendToSlack(escalation));\n      }\n\n      if (escalation.sendToTeams) {\n        promises.push(this.sendToTeams(escalation));\n      }\n\n      if (escalation.sendToEmail) {\n        promises.push(this.sendToEmail(escalation));\n      }\n\n      await Promise.allSettled(promises);\n    } catch (error) {\n      console.error(\"Error sending escalation:\", error);\n      throw error;\n    }\n  }\n\n  private async sendToSlack(escalation: Escalation): Promise<void> {\n    try {\n      const slackIntegration = await storage.getIntegration(\"slack\");\n      \n      if (!slackIntegration || slackIntegration.status !== \"connected\") {\n        throw new Error(\"Slack integration not configured\");\n      }\n\n      // Mock Slack webhook call - replace with actual implementation\n      const message = {\n        text: `🚨 Escalation: ${escalation.summary}`,\n        blocks: [\n          {\n            type: \"section\",\n            text: {\n              type: \"mrkdwn\",\n              text: `*Escalation:* ${escalation.summary}\\n*Urgency:* ${escalation.urgency}\\n*Description:* ${escalation.description}`\n            }\n          }\n        ]\n      };\n\n      console.log(\"Would send to Slack:\", message);\n      // await fetch(slackIntegration.webhookUrl, {\n      //   method: 'POST',\n      //   headers: { 'Content-Type': 'application/json' },\n      //   body: JSON.stringify(message)\n      // });\n    } catch (error) {\n      console.error(\"Error sending to Slack:\", error);\n      throw error;\n    }\n  }\n\n  private async sendToTeams(escalation: Escalation): Promise<void> {\n    try {\n      const teamsIntegration = await storage.getIntegration(\"teams\");\n      \n      if (!teamsIntegration || teamsIntegration.status !== \"connected\") {\n        throw new Error(\"Teams integration not configured\");\n      }\n\n      // Mock Teams webhook call - replace with actual implementation\n      const message = {\n        \"@type\": \"MessageCard\",\n        \"@context\": \"http://schema.org/extensions\",\n        themeColor: escalation.urgency === 'critical' ? 'FF0000' : 'FFA500',\n        summary: escalation.summary,\n        sections: [{\n          activityTitle: `Escalation: ${escalation.summary}`,\n          activitySubtitle: `Urgency: ${escalation.urgency}`,\n          text: escalation.description\n        }]\n      };\n\n      console.log(\"Would send to Teams:\", message);\n    } catch (error) {\n      console.error(\"Error sending to Teams:\", error);\n      throw error;\n    }\n  }\n\n  private async sendToEmail(escalation: Escalation): Promise<void> {\n    try {\n      // Mock email sending - replace with actual email service\n      const emailContent = {\n        subject: `Program Escalation: ${escalation.summary}`,\n        body: `\n          Escalation Details:\n          \n          Summary: ${escalation.summary}\n          Urgency: ${escalation.urgency}\n          Description: ${escalation.description}\n          Impact: ${escalation.impact}\n          \n          Please review and take appropriate action.\n        `\n      };\n\n      console.log(\"Would send email:\", emailContent);\n    } catch (error) {\n      console.error(\"Error sending email:\", error);\n      throw error;\n    }\n  }\n\n  private mapRiskSeverityToJiraPriority(severity: string | null): string {\n    switch (severity) {\n      case 'critical': return 'Highest';\n      case 'high': return 'High';\n      case 'medium': return 'Medium';\n      case 'low': return 'Low';\n      default: return 'Medium';\n    }\n  }\n\n  // Mock JIRA API methods - replace with actual JIRA API calls\n  private async mockJiraCreateEpic(data: any): Promise<{ key: string }> {\n    // Simulate API delay\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    return {\n      key: `PROJ-${Math.floor(Math.random() * 1000)}`\n    };\n  }\n\n  private async mockJiraCreateIssue(data: any): Promise<{ key: string }> {\n    // Simulate API delay\n    await new Promise(resolve => setTimeout(resolve, 1000));\n    \n    return {\n      key: `RISK-${Math.floor(Math.random() * 1000)}`\n    };\n  }\n\n  async syncFromJira(): Promise<void> {\n    try {\n      const jiraIntegration = await storage.getIntegration(\"jira\");\n      \n      if (!jiraIntegration || jiraIntegration.status !== \"connected\") {\n        console.log(\"JIRA integration not available for sync\");\n        return;\n      }\n\n      // Mock sync from JIRA - in real implementation, fetch updates from JIRA\n      console.log(\"Syncing updates from JIRA...\");\n      \n      // Update last sync timestamp\n      await storage.updateIntegration(\"jira\", {\n        lastSync: new Date()\n      });\n    } catch (error) {\n      console.error(\"Error syncing from JIRA:\", error);\n      throw error;\n    }\n  }\n}\n\nexport const integrationService = new IntegrationService();\n","size_bytes":6695},"server/services/pmp.ts":{"content":"import { storage } from \"../storage\";\nimport type { \n  Program, \n  Project, \n  PmpRecommendation, \n  InsertPmpRecommendation \n} from \"@shared/schema\";\n\n// PMI PMP Knowledge Areas and Phase mapping\nconst PMP_PHASES = [\n  'Initiating',\n  'Planning', \n  'Executing',\n  'Monitoring & Controlling',\n  'Closing'\n];\n\nconst PMP_KNOWLEDGE_AREAS = [\n  'Integration Management',\n  'Scope Management', \n  'Schedule Management',\n  'Cost Management',\n  'Quality Management',\n  'Resource Management',\n  'Communications Management',\n  'Risk Management',\n  'Procurement Management',\n  'Stakeholder Management'\n];\n\n// PMP best practice recommendations by phase and context\nconst PMP_BEST_PRACTICES = {\n  'Initiating': {\n    'Integration Management': [\n      'Develop project charter to formally authorize the project',\n      'Identify and document stakeholders early in the project',\n      'Define project scope at a high level',\n      'Establish initial project objectives and constraints'\n    ],\n    'Stakeholder Management': [\n      'Conduct comprehensive stakeholder analysis',\n      'Create stakeholder register with influence/interest matrix',\n      'Plan stakeholder engagement strategies',\n      'Establish communication protocols with key stakeholders'\n    ]\n  },\n  'Planning': {\n    'Scope Management': [\n      'Create detailed Work Breakdown Structure (WBS)',\n      'Define scope baseline with clear acceptance criteria',\n      'Establish scope change control process',\n      'Validate scope with stakeholders before execution'\n    ],\n    'Schedule Management': [\n      'Develop realistic project schedule using critical path method',\n      'Identify schedule dependencies and critical path',\n      'Build in appropriate buffers for schedule risks',\n      'Establish schedule baseline and change control'\n    ],\n    'Risk Management': [\n      'Conduct comprehensive risk identification workshops',\n      'Perform qualitative and quantitative risk analysis',\n      'Develop risk response strategies for high-priority risks',\n      'Create risk register with ownership assignments'\n    ]\n  },\n  'Executing': {\n    'Resource Management': [\n      'Acquire and develop the project team effectively',\n      'Manage team performance and resolve conflicts promptly',\n      'Optimize resource allocation across project activities',\n      'Conduct regular team building and development activities'\n    ],\n    'Communications Management': [\n      'Execute communication management plan consistently',\n      'Hold regular status meetings with appropriate stakeholders',\n      'Maintain transparent project reporting and dashboards',\n      'Address communication gaps and conflicts immediately'\n    ]\n  },\n  'Monitoring & Controlling': {\n    'Integration Management': [\n      'Monitor work performance and compare against baselines',\n      'Implement integrated change control process',\n      'Update project management plan as needed',\n      'Ensure deliverables meet quality standards'\n    ],\n    'Quality Management': [\n      'Perform quality assurance activities regularly',\n      'Control quality through inspections and testing',\n      'Implement corrective actions for quality issues',\n      'Document lessons learned for future projects'\n    ]\n  },\n  'Closing': {\n    'Integration Management': [\n      'Complete formal project closure activities',\n      'Obtain final acceptance of deliverables',\n      'Transfer project outputs to operations team',\n      'Document lessons learned and best practices'\n    ],\n    'Procurement Management': [\n      'Close all procurement contracts properly',\n      'Conduct vendor performance evaluations',\n      'Archive procurement documentation',\n      'Release project resources back to organization'\n    ]\n  }\n};\n\ninterface ProjectContext {\n  program?: Program;\n  project?: Project;\n  currentPhase?: string;\n  challenges?: string[];\n  recentActivities?: string[];\n}\n\nexport class PMPService {\n  \n  async generateRecommendations(context: ProjectContext): Promise<PmpRecommendation[]> {\n    const recommendations: InsertPmpRecommendation[] = [];\n    \n    // Determine current phase if not provided\n    const currentPhase = context.currentPhase || this.inferCurrentPhase(context);\n    \n    // Get relevant knowledge areas based on context\n    const relevantAreas = this.getRelevantKnowledgeAreas(context);\n    \n    // Generate phase-specific recommendations\n    for (const area of relevantAreas) {\n      const phaseRecommendations = PMP_BEST_PRACTICES[currentPhase]?.[area] || [];\n      \n      for (const rec of phaseRecommendations) {\n        recommendations.push({\n          programId: context.program?.id || null,\n          projectId: context.project?.id || null,\n          pmpPhase: currentPhase,\n          knowledgeArea: area,\n          recommendation: rec,\n          reasoning: `PMI PMP best practice for ${area} during ${currentPhase} phase`,\n          priority: this.calculatePriority(rec, context),\n          status: 'pending'\n        });\n      }\n    }\n    \n    // Add context-specific recommendations\n    recommendations.push(...this.generateContextSpecificRecommendations(context));\n    \n    // Create recommendations in database\n    const createdRecommendations: PmpRecommendation[] = [];\n    for (const rec of recommendations) {\n      try {\n        const created = await storage.createPmpRecommendation(rec);\n        createdRecommendations.push(created);\n      } catch (error) {\n        console.error('Error creating PMP recommendation:', error);\n      }\n    }\n    \n    return createdRecommendations;\n  }\n  \n  private inferCurrentPhase(context: ProjectContext): string {\n    const program = context.program;\n    const project = context.project;\n    \n    if (!program && !project) return 'Initiating';\n    \n    const entity = project || program;\n    \n    switch (entity?.status) {\n      case 'planning':\n        return 'Planning';\n      case 'active':\n        return 'Executing';\n      case 'on_hold':\n        return 'Monitoring & Controlling';\n      case 'completed':\n        return 'Closing';\n      default:\n        return 'Initiating';\n    }\n  }\n  \n  private getRelevantKnowledgeAreas(context: ProjectContext): string[] {\n    const areas: string[] = [];\n    \n    // Always include Integration Management\n    areas.push('Integration Management');\n    \n    // Add areas based on context\n    if (context.challenges?.some(c => c.toLowerCase().includes('stakeholder'))) {\n      areas.push('Stakeholder Management');\n    }\n    \n    if (context.challenges?.some(c => c.toLowerCase().includes('schedule') || c.toLowerCase().includes('delay'))) {\n      areas.push('Schedule Management');\n    }\n    \n    if (context.challenges?.some(c => c.toLowerCase().includes('risk'))) {\n      areas.push('Risk Management');\n    }\n    \n    if (context.challenges?.some(c => c.toLowerCase().includes('communication'))) {\n      areas.push('Communications Management');\n    }\n    \n    if (context.challenges?.some(c => c.toLowerCase().includes('scope'))) {\n      areas.push('Scope Management');\n    }\n    \n    // Default relevant areas if none specified\n    if (areas.length === 1) {\n      areas.push('Stakeholder Management', 'Communications Management', 'Risk Management');\n    }\n    \n    return [...new Set(areas)]; // Remove duplicates\n  }\n  \n  private calculatePriority(recommendation: string, context: ProjectContext): number {\n    // Higher priority for recommendations that address current challenges\n    if (context.challenges?.some(challenge => \n      recommendation.toLowerCase().includes(challenge.toLowerCase().split(' ')[0])\n    )) {\n      return 5;\n    }\n    \n    // Medium priority for proactive recommendations\n    if (recommendation.includes('Establish') || recommendation.includes('Create') || recommendation.includes('Develop')) {\n      return 3;\n    }\n    \n    // Lower priority for maintenance activities\n    return 2;\n  }\n  \n  private generateContextSpecificRecommendations(context: ProjectContext): InsertPmpRecommendation[] {\n    const recommendations: InsertPmpRecommendation[] = [];\n    \n    // Risk-based recommendations\n    if (context.challenges?.length) {\n      recommendations.push({\n        programId: context.program?.id || null,\n        projectId: context.project?.id || null,\n        pmpPhase: this.inferCurrentPhase(context),\n        knowledgeArea: 'Risk Management',\n        recommendation: `Address current challenges: ${context.challenges.join(', ')}. Implement risk response strategies.`,\n        reasoning: 'Context-specific recommendation based on identified challenges',\n        priority: 5,\n        status: 'pending'\n      });\n    }\n    \n    // Stakeholder engagement recommendations\n    recommendations.push({\n      programId: context.program?.id || null,\n      projectId: context.project?.id || null,\n      pmpPhase: this.inferCurrentPhase(context),\n      knowledgeArea: 'Stakeholder Management',\n      recommendation: 'Schedule regular stakeholder check-ins to maintain engagement and gather feedback',\n      reasoning: 'Proactive stakeholder management to prevent issues',\n      priority: 4,\n      status: 'pending'\n    });\n    \n    return recommendations;\n  }\n  \n  async getRecommendationsByEntity(programId?: string, projectId?: string): Promise<PmpRecommendation[]> {\n    return await storage.getPmpRecommendations(programId, projectId);\n  }\n  \n  async updateRecommendationStatus(id: string, status: string, feedback?: string): Promise<PmpRecommendation> {\n    return await storage.updatePmpRecommendation(id, { \n      status, \n      feedback,\n      implementedDate: status === 'implemented' ? new Date() : undefined \n    });\n  }\n  \n  getPMPPhases(): string[] {\n    return PMP_PHASES;\n  }\n  \n  getKnowledgeAreas(): string[] {\n    return PMP_KNOWLEDGE_AREAS;\n  }\n}\n\nexport const pmpService = new PMPService();","size_bytes":9771},"server/services/stakeholder.ts":{"content":"import { storage } from \"../storage\";\nimport type { \n  Stakeholder, \n  StakeholderInteraction, \n  InsertStakeholderInteraction \n} from \"@shared/schema\";\n\n// Leadership style characteristics and response patterns\nconst LEADERSHIP_STYLES = {\n  'Autocratic': {\n    characteristics: ['Directive', 'Decisive', 'Top-down communication', 'Limited delegation'],\n    communicationPreferences: ['Brief updates', 'Clear recommendations', 'Direct communication'],\n    decisionPatterns: ['Quick decisions', 'Prefers options with clear outcomes', 'Values efficiency'],\n    responseTime: 'Fast',\n    preferredFormat: 'Executive summary'\n  },\n  'Democratic': {\n    characteristics: ['Collaborative', 'Consensus-seeking', 'Team-oriented', 'Inclusive'],\n    communicationPreferences: ['Team discussions', 'Multiple perspectives', 'Collaborative meetings'],\n    decisionPatterns: ['Seeks input', 'Considers multiple options', 'Values team buy-in'],\n    responseTime: 'Moderate',\n    preferredFormat: 'Detailed analysis with options'\n  },\n  'Laissez-faire': {\n    characteristics: ['Hands-off', 'Trusts team autonomy', 'Minimal oversight', 'Flexible'],\n    communicationPreferences: ['High-level updates', 'Exception reporting', 'Minimal meetings'],\n    decisionPatterns: ['Delegates decisions', 'Prefers team autonomy', 'Intervenes minimally'],\n    responseTime: 'Variable',\n    preferredFormat: 'Brief status updates'\n  },\n  'Transformational': {\n    characteristics: ['Visionary', 'Inspiring', 'Change-oriented', 'Future-focused'],\n    communicationPreferences: ['Strategic discussions', 'Vision alignment', 'Innovation focus'],\n    decisionPatterns: ['Strategic thinking', 'Long-term view', 'Innovation emphasis'],\n    responseTime: 'Thoughtful',\n    preferredFormat: 'Strategic impact analysis'\n  },\n  'Transactional': {\n    characteristics: ['Results-focused', 'Process-oriented', 'Reward-based', 'Structured'],\n    communicationPreferences: ['Metrics and KPIs', 'Performance data', 'Clear deliverables'],\n    decisionPatterns: ['Data-driven', 'ROI-focused', 'Process adherence'],\n    responseTime: 'Systematic',\n    preferredFormat: 'Data-driven reports'\n  }\n};\n\nconst COMMUNICATION_STYLES = {\n  'Direct': {\n    approach: 'Straightforward, factual, no-nonsense',\n    preferences: ['Clear action items', 'Bottom-line up front', 'Minimal small talk'],\n    avoidances: ['Lengthy explanations', 'Ambiguous language', 'Indecisiveness']\n  },\n  'Analytical': {\n    approach: 'Data-focused, detailed, systematic',\n    preferences: ['Supporting data', 'Logical reasoning', 'Thorough analysis'],\n    avoidances: ['Emotional appeals', 'Rushed decisions', 'Incomplete information']\n  },\n  'Expressive': {\n    approach: 'Enthusiastic, relationship-focused, big-picture',\n    preferences: ['Stories and examples', 'Visual presentations', 'Personal connections'],\n    avoidances: ['Too much detail', 'Dry presentations', 'Impersonal communication']\n  },\n  'Amiable': {\n    approach: 'Supportive, patient, team-oriented',\n    preferences: ['Consensus building', 'Team impact consideration', 'Gentle approach'],\n    avoidances: ['Aggressive tactics', 'Rushed timelines', 'Conflict']\n  }\n};\n\ninterface PredictionContext {\n  stakeholder: Stakeholder;\n  interactionType: string;\n  context: string;\n  programId?: string;\n  projectId?: string;\n}\n\nexport class StakeholderService {\n  \n  async predictStakeholderResponse(context: PredictionContext): Promise<{\n    predictedResponse: string;\n    confidence: number;\n    recommendations: string[];\n  }> {\n    const { stakeholder, interactionType, context: situationContext } = context;\n    \n    // Get stakeholder's historical patterns\n    const interactions = await storage.getStakeholderInteractions(stakeholder.id);\n    const patterns = this.analyzeResponsePatterns(interactions);\n    \n    // Generate prediction based on leadership and communication styles\n    const prediction = this.generatePrediction(stakeholder, interactionType, situationContext, patterns);\n    \n    // Calculate confidence based on historical accuracy\n    const confidence = this.calculateConfidence(stakeholder, patterns);\n    \n    // Generate tailored recommendations\n    const recommendations = this.generateRecommendations(stakeholder, interactionType, situationContext);\n    \n    return {\n      predictedResponse: prediction,\n      confidence,\n      recommendations\n    };\n  }\n  \n  private analyzeResponsePatterns(interactions: StakeholderInteraction[]): any {\n    const patterns = {\n      responseTime: 'Unknown',\n      decisionStyle: 'Unknown',\n      communicationPreference: 'Unknown',\n      commonConcerns: [] as string[],\n      successFactors: [] as string[]\n    };\n    \n    if (interactions.length === 0) return patterns;\n    \n    // Analyze response times\n    const responseTimes = interactions\n      .filter(i => i.actualResponse)\n      .map(i => {\n        const created = new Date(i.createdAt);\n        const updated = new Date(i.updatedAt);\n        return updated.getTime() - created.getTime();\n      });\n    \n    if (responseTimes.length > 0) {\n      const avgResponseTime = responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length;\n      patterns.responseTime = avgResponseTime < 24 * 60 * 60 * 1000 ? 'Fast' : \n                             avgResponseTime < 72 * 60 * 60 * 1000 ? 'Moderate' : 'Slow';\n    }\n    \n    // Extract common concerns and success factors\n    interactions.forEach(interaction => {\n      if (interaction.actualResponse) {\n        if (interaction.actualResponse.toLowerCase().includes('concern') || \n            interaction.actualResponse.toLowerCase().includes('risk')) {\n          patterns.commonConcerns.push(interaction.context || '');\n        }\n        if (interaction.actualResponse.toLowerCase().includes('approve') || \n            interaction.actualResponse.toLowerCase().includes('support')) {\n          patterns.successFactors.push(interaction.context || '');\n        }\n      }\n    });\n    \n    return patterns;\n  }\n  \n  private generatePrediction(\n    stakeholder: Stakeholder, \n    interactionType: string, \n    context: string, \n    patterns: any\n  ): string {\n    const leadershipStyle = LEADERSHIP_STYLES[stakeholder.leadershipStyle as keyof typeof LEADERSHIP_STYLES];\n    const communicationStyle = COMMUNICATION_STYLES[stakeholder.communicationStyle as keyof typeof COMMUNICATION_STYLES];\n    \n    let prediction = `Based on ${stakeholder.name}'s ${stakeholder.leadershipStyle} leadership style and ${stakeholder.communicationStyle} communication approach, `;\n    \n    switch (interactionType.toLowerCase()) {\n      case 'decision':\n        if (leadershipStyle) {\n          prediction += `they will likely ${leadershipStyle.decisionPatterns.join(' and ')}. `;\n          prediction += `Expect ${leadershipStyle.responseTime.toLowerCase()} decision-making. `;\n        }\n        break;\n        \n      case 'escalation':\n        if (stakeholder.leadershipStyle === 'Autocratic') {\n          prediction += 'they will want immediate action items and clear resolution steps. ';\n        } else if (stakeholder.leadershipStyle === 'Democratic') {\n          prediction += 'they will want to understand team impact and seek input on resolution. ';\n        }\n        break;\n        \n      case 'status_update':\n        if (communicationStyle) {\n          prediction += `they prefer ${communicationStyle.preferences.join(' and ')}. `;\n          prediction += `Avoid ${communicationStyle.avoidances.join(' and ')}. `;\n        }\n        break;\n        \n      default:\n        prediction += 'they will respond according to their established patterns. ';\n    }\n    \n    // Add historical context if available\n    if (patterns.commonConcerns.length > 0) {\n      prediction += `Historically, they have shown concern about similar situations. `;\n    }\n    \n    return prediction;\n  }\n  \n  private calculateConfidence(stakeholder: Stakeholder, patterns: any): number {\n    let baseConfidence = 50; // Start with 50% confidence\n    \n    // Increase confidence if we have historical data\n    if (stakeholder.responsePatterns && Object.keys(stakeholder.responsePatterns as any).length > 0) {\n      baseConfidence += 20;\n    }\n    \n    // Increase confidence based on predictive score\n    if (stakeholder.predictiveScore) {\n      baseConfidence += Number(stakeholder.predictiveScore) * 0.3;\n    }\n    \n    // Increase confidence if leadership and communication styles are defined\n    if (stakeholder.leadershipStyle && stakeholder.communicationStyle) {\n      baseConfidence += 15;\n    }\n    \n    return Math.min(Math.max(baseConfidence, 0), 100);\n  }\n  \n  private generateRecommendations(\n    stakeholder: Stakeholder, \n    interactionType: string, \n    context: string\n  ): string[] {\n    const recommendations: string[] = [];\n    const leadershipStyle = LEADERSHIP_STYLES[stakeholder.leadershipStyle as keyof typeof LEADERSHIP_STYLES];\n    const communicationStyle = COMMUNICATION_STYLES[stakeholder.communicationStyle as keyof typeof COMMUNICATION_STYLES];\n    \n    // Leadership style-based recommendations\n    if (leadershipStyle) {\n      recommendations.push(`Communication approach: ${leadershipStyle.communicationPreferences.join(', ')}`);\n      recommendations.push(`Present information in: ${leadershipStyle.preferredFormat}`);\n    }\n    \n    // Communication style-based recommendations\n    if (communicationStyle) {\n      recommendations.push(`Use ${communicationStyle.approach} approach`);\n      recommendations.push(`Include: ${communicationStyle.preferences.join(', ')}`);\n      recommendations.push(`Avoid: ${communicationStyle.avoidances.join(', ')}`);\n    }\n    \n    // Interaction type-specific recommendations\n    switch (interactionType.toLowerCase()) {\n      case 'escalation':\n        recommendations.push('Prepare clear action items and timeline');\n        recommendations.push('Have solution options ready');\n        recommendations.push('Include impact assessment');\n        break;\n        \n      case 'decision':\n        recommendations.push('Provide clear recommendation with rationale');\n        recommendations.push('Include risk analysis');\n        recommendations.push('Present options with pros/cons');\n        break;\n        \n      case 'status_update':\n        recommendations.push('Focus on key metrics and progress');\n        recommendations.push('Highlight any risks or blockers');\n        recommendations.push('Include next steps and timeline');\n        break;\n    }\n    \n    return recommendations;\n  }\n  \n  async recordInteraction(interaction: InsertStakeholderInteraction): Promise<StakeholderInteraction> {\n    return await storage.createStakeholderInteraction(interaction);\n  }\n  \n  async updateInteractionWithActual(\n    id: string, \n    actualResponse: string\n  ): Promise<StakeholderInteraction> {\n    const interaction = await storage.getStakeholderInteraction(id);\n    if (!interaction) {\n      throw new Error('Interaction not found');\n    }\n    \n    // Calculate accuracy if we had a prediction\n    let accuracy = null;\n    if (interaction.predictedResponse) {\n      accuracy = this.calculatePredictionAccuracy(interaction.predictedResponse, actualResponse);\n    }\n    \n    const updated = await storage.updateStakeholderInteraction(id, {\n      actualResponse,\n      accuracy: accuracy ? Number(accuracy.toFixed(2)) : null\n    });\n    \n    // Update stakeholder's predictive score\n    if (accuracy !== null) {\n      await this.updateStakeholderPredictiveScore(interaction.stakeholderId, accuracy);\n    }\n    \n    return updated;\n  }\n  \n  private calculatePredictionAccuracy(predicted: string, actual: string): number {\n    // Simple similarity calculation - in production, use more sophisticated NLP\n    const predictedWords = predicted.toLowerCase().split(' ');\n    const actualWords = actual.toLowerCase().split(' ');\n    \n    let matches = 0;\n    for (const word of predictedWords) {\n      if (actualWords.includes(word)) {\n        matches++;\n      }\n    }\n    \n    return (matches / Math.max(predictedWords.length, actualWords.length)) * 100;\n  }\n  \n  private async updateStakeholderPredictiveScore(stakeholderId: string, newAccuracy: number): Promise<void> {\n    const stakeholder = await storage.getStakeholder(stakeholderId);\n    if (!stakeholder) return;\n    \n    const currentScore = Number(stakeholder.predictiveScore) || 0;\n    const updatedScore = (currentScore * 0.8) + (newAccuracy * 0.2); // Weighted average\n    \n    await storage.updateStakeholder(stakeholderId, {\n      predictiveScore: Number(updatedScore.toFixed(2))\n    });\n  }\n  \n  async getStakeholderInsights(stakeholderId: string): Promise<{\n    stakeholder: Stakeholder;\n    recentInteractions: StakeholderInteraction[];\n    predictiveAccuracy: number;\n    recommendations: string[];\n  }> {\n    const stakeholder = await storage.getStakeholder(stakeholderId);\n    if (!stakeholder) {\n      throw new Error('Stakeholder not found');\n    }\n    \n    const interactions = await storage.getStakeholderInteractions(stakeholderId);\n    const recentInteractions = interactions.slice(0, 10); // Last 10 interactions\n    \n    const predictiveAccuracy = Number(stakeholder.predictiveScore) || 0;\n    \n    const recommendations = this.generateRecommendations(\n      stakeholder, \n      'general', \n      'General stakeholder engagement'\n    );\n    \n    return {\n      stakeholder,\n      recentInteractions,\n      predictiveAccuracy,\n      recommendations\n    };\n  }\n  \n  getLeadershipStyles(): Record<string, any> {\n    return LEADERSHIP_STYLES;\n  }\n  \n  getCommunicationStyles(): Record<string, any> {\n    return COMMUNICATION_STYLES;\n  }\n}\n\nexport const stakeholderService = new StakeholderService();","size_bytes":13644},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useMode.tsx":{"content":"import { useAppStore } from '@/stores/appStore';\n\nexport function useMode() {\n  const { mode, setMode } = useAppStore();\n  \n  const isTestMode = mode === 'test';\n  const isLiveMode = mode === 'live';\n  \n  const toggleMode = () => {\n    setMode(mode === 'test' ? 'live' : 'test');\n  };\n  \n  return {\n    mode,\n    isTestMode,\n    isLiveMode,\n    setMode,\n    toggleMode,\n  };\n}\n","size_bytes":377},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  url: string,\n  method: string,\n  data?: unknown | undefined,\n): Promise<any> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return await res.json();\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n      onError: (error: Error) => {\n        console.error('Mutation error:', error);\n      },\n    },\n  },\n});\n","size_bytes":1484},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/AIAssistant.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { useAppStore } from \"@/stores/appStore\";\nimport { \n  Mic, \n  MicOff, \n  Send, \n  Bot, \n  User,\n  Volume2,\n  FileText,\n  Image,\n  Download,\n  Zap,\n  CheckCircle,\n  AlertCircle,\n  ExternalLink\n} from \"lucide-react\";\nimport type { Program, Risk, Milestone, Adopter, Dependency } from \"@shared/schema\";\n\n// Global types for Speech Recognition\ndeclare global {\n  interface Window {\n    SpeechRecognition: any;\n    webkitSpeechRecognition: any;\n  }\n}\n\ninterface SpeechRecognition extends EventTarget {\n  continuous: boolean;\n  interimResults: boolean;\n  lang: string;\n  onresult: (event: SpeechRecognitionEvent) => void;\n  onerror: (event: SpeechRecognitionErrorEvent) => void;\n  onend: () => void;\n  start(): void;\n  stop(): void;\n}\n\ninterface SpeechRecognitionEvent extends Event {\n  results: SpeechRecognitionResultList;\n  resultIndex: number;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n  error: string;\n  message: string;\n}\n\ninterface SpeechRecognitionResultList {\n  length: number;\n  item(index: number): SpeechRecognitionResult;\n  [index: number]: SpeechRecognitionResult;\n}\n\ninterface SpeechRecognitionResult {\n  length: number;\n  item(index: number): SpeechRecognitionAlternative;\n  [index: number]: SpeechRecognitionAlternative;\n  isFinal: boolean;\n}\n\ninterface SpeechRecognitionAlternative {\n  transcript: string;\n  confidence: number;\n}\n\ninterface ChatMessage {\n  id: string;\n  type: 'user' | 'ai';\n  content: string;\n  timestamp: Date;\n  responseType?: 'text' | 'image' | 'file' | 'action' | 'success' | 'error';\n  attachments?: {\n    type: 'image' | 'file';\n    url: string;\n    name: string;\n  }[];\n  actions?: {\n    type: 'navigate' | 'create' | 'update' | 'delete';\n    target: string;\n    data?: any;\n  }[];\n  createdItems?: {\n    type: 'program' | 'risk' | 'milestone' | 'adopter' | 'dependency';\n    id: string;\n    name: string;\n  }[];\n}\n\nexport default function AIAssistant() {\n  // Use global chat state from zustand store for persistence across navigation\n  const { chatMessages, setChatMessages, addChatMessage, clearChatHistory } = useAppStore();\n  \n  const [inputValue, setInputValue] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const recognitionRef = useRef<SpeechRecognition | null>(null);\n  const chatContainerRef = useRef<HTMLDivElement>(null);\n  \n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  // Load current data for context\n  const { data: programs = [] } = useQuery<Program[]>({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const { data: risks = [] } = useQuery<Risk[]>({\n    queryKey: [\"/api/risks\"],\n  });\n\n  const { data: milestones = [] } = useQuery<Milestone[]>({\n    queryKey: [\"/api/milestones\"],\n  });\n\n  const { data: adopters = [] } = useQuery<Adopter[]>({\n    queryKey: [\"/api/adopters\"],\n  });\n\n  const { data: dependencies = [] } = useQuery<Dependency[]>({\n    queryKey: [\"/api/dependencies\"],\n  });\n\n  // AI action processing mutation\n  const aiActionMutation = useMutation({\n    mutationFn: async (request: string) => {\n      return await apiRequest('/api/ai/process-request', 'POST', { \n        request,\n        context: {\n          programCount: programs.length,\n          riskCount: risks.length,\n          milestoneCount: milestones.length,\n          programs: programs.map(p => ({ id: p.id, name: p.name, status: p.status }))\n        }\n      });\n    },\n    onSuccess: (response) => {\n      const aiResponse: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'ai',\n        content: response.message || 'Action completed successfully!',\n        timestamp: new Date(),\n        responseType: response.success ? 'success' : 'error',\n        createdItems: response.createdItems,\n        actions: response.actions\n      };\n      \n      addChatMessage(aiResponse);\n      setIsProcessing(false);\n      \n      // Auto-scroll to bottom when new message is added\n      setTimeout(() => {\n        if (chatContainerRef.current) {\n          chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n        }\n      }, 100);\n\n      // If items were created, invalidate ALL relevant caches to ensure dashboard updates\n      if (response.createdItems && response.createdItems.length > 0) {\n        // Invalidate all major query caches to ensure dashboard and all pages update\n        queryClient.invalidateQueries({ queryKey: [\"/api/programs\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/risks\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/milestones\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/adopters\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/dependencies\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/initiatives\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/platforms\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/projects\"] });\n        \n        \n        toast({\n          title: \"Success\",\n          description: `${response.createdItems.length} item(s) created successfully`,\n        });\n      }\n\n      // Handle navigation actions\n      if (response.actions && response.actions.length > 0) {\n        response.actions.forEach((action: any) => {\n          if (action.type === 'navigate') {\n            setTimeout(() => {\n              setLocation(action.target);\n            }, 1000);\n          }\n        });\n      }\n\n      // Speak the response if voice was used\n      if (response.success && response.message) {\n        speakText(response.message);\n      }\n    },\n    onError: (error) => {\n      const aiResponse: ChatMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'ai',\n        content: `Sorry, I encountered an error: ${error.message}. Please try again or be more specific about what you'd like me to do.`,\n        timestamp: new Date(),\n        responseType: 'error'\n      };\n      \n      addChatMessage(aiResponse);\n      setIsProcessing(false);\n      \n      // Auto-scroll to bottom when new message is added\n      setTimeout(() => {\n        if (chatContainerRef.current) {\n          chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n        }\n      }, 100);\n      \n      toast({\n        title: \"Error\",\n        description: \"Failed to process your request. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const handleSendMessage = async () => {\n    if (!inputValue.trim() || isProcessing) return;\n\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: inputValue,\n      timestamp: new Date()\n    };\n\n    addChatMessage(userMessage);\n    const currentInput = inputValue;\n    setInputValue('');\n    setIsProcessing(true);\n\n    // Process the request with the AI\n    aiActionMutation.mutate(currentInput);\n  };\n\n  // Initialize speech recognition\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      const recognition = new SpeechRecognition();\n      recognitionRef.current = recognition;\n      \n      if (recognitionRef.current) {\n        recognitionRef.current.continuous = false;\n        recognitionRef.current.interimResults = false;\n        recognitionRef.current.lang = 'en-US';\n\n        recognitionRef.current.onresult = (event: SpeechRecognitionEvent) => {\n          const transcript = event.results[0][0].transcript;\n          setInputValue(transcript);\n          \n          // Automatically send the voice command\n          setTimeout(() => {\n            handleVoiceCommand(transcript);\n          }, 500);\n        };\n\n        recognitionRef.current.onend = () => {\n          setIsListening(false);\n        };\n\n        recognitionRef.current.onerror = (event: SpeechRecognitionErrorEvent) => {\n          console.error('Speech recognition error:', event.error);\n          setIsListening(false);\n          toast({\n            title: \"Voice Recognition Error\",\n            description: \"Unable to process voice input. Please try again.\",\n            variant: \"destructive\"\n          });\n        };\n      }\n    }\n  }, []);\n\n  const handleVoiceCommand = async (command: string) => {\n    if (!command.trim() || isProcessing) return;\n\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: `🎤 ${command}`,\n      timestamp: new Date()\n    };\n\n    addChatMessage(userMessage);\n    setInputValue('');\n    setIsProcessing(true);\n    \n    // Auto-scroll to bottom when new message is added\n    setTimeout(() => {\n      if (chatContainerRef.current) {\n        chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n      }\n    }, 100);\n\n    // Process the voice command with the AI\n    aiActionMutation.mutate(command);\n  };\n\n  const toggleVoiceRecognition = () => {\n    if (isListening) {\n      // Stop listening\n      if (recognitionRef.current) {\n        recognitionRef.current.stop();\n      }\n      setIsListening(false);\n    } else {\n      // Start listening\n      if (recognitionRef.current) {\n        setIsListening(true);\n        recognitionRef.current.start();\n        toast({\n          title: \"Listening...\",\n          description: \"Speak your command now\",\n        });\n      } else {\n        toast({\n          title: \"Voice Recognition Unavailable\",\n          description: \"Voice recognition is not supported in this browser\",\n          variant: \"destructive\"\n        });\n      }\n    }\n  };\n\n  const speakText = (text: string) => {\n    if ('speechSynthesis' in window) {\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.rate = 0.9;\n      utterance.pitch = 1;\n      speechSynthesis.speak(utterance);\n    }\n  };\n\n  const formatTime = (date: Date) => {\n    const dateObj = new Date(date);\n    return dateObj.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  const getResponseIcon = (responseType: string) => {\n    switch (responseType) {\n      case 'image': return <Image className=\"h-4 w-4\" />;\n      case 'file': return <FileText className=\"h-4 w-4\" />;\n      case 'action': return <Zap className=\"h-4 w-4\" />;\n      case 'success': return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\n      case 'error': return <AlertCircle className=\"h-4 w-4 text-red-600\" />;\n      default: return <Bot className=\"h-4 w-4\" />;\n    }\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <Header\n        title=\"AI Assistant\"\n        subtitle=\"Chat and voice commands for intelligent program management\"\n      />\n\n      <main className=\"flex-1 flex flex-col overflow-hidden p-6\">\n        {/* Chat Messages Area */}\n        <Card className=\"flex-1 flex flex-col border border-gray-200 mb-6\">\n          <CardHeader className=\"border-b border-gray-100 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"flex items-center gap-2\">\n                <Bot className=\"h-5 w-5 text-primary-600\" />\n                AI Chat Assistant\n              </CardTitle>\n              <div className=\"flex items-center gap-2\">\n                <Badge variant={isListening ? \"default\" : \"secondary\"} className=\"flex items-center gap-1\">\n                  {isListening ? <Mic className=\"h-3 w-3\" /> : <MicOff className=\"h-3 w-3\" />}\n                  {isListening ? 'Listening...' : 'Voice Ready'}\n                </Badge>\n              </div>\n            </div>\n          </CardHeader>\n          \n          <CardContent className=\"flex-1 flex flex-col p-0\">\n            {/* Messages */}\n            <div \n              ref={chatContainerRef}\n              className=\"flex-1 overflow-y-auto p-6 space-y-4 max-h-[60vh] min-h-[400px]\"\n            >\n              {chatMessages.map((message) => (\n                <div\n                  key={message.id}\n                  className={`flex gap-3 ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n                >\n                  {message.type === 'ai' && (\n                    <div className=\"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0\">\n                      {getResponseIcon(message.responseType || 'text')}\n                    </div>\n                  )}\n                  \n                  <div className={`max-w-[70%] ${message.type === 'user' ? 'order-2' : ''}`}>\n                    <div\n                      className={`rounded-lg p-4 ${\n                        message.type === 'user'\n                          ? 'bg-primary-500 text-white'\n                          : 'bg-gray-100 text-gray-900'\n                      }`}\n                    >\n                      <p className=\"text-sm\">{message.content}</p>\n                      \n                      {/* Created Items */}\n                      {message.createdItems && message.createdItems.length > 0 && (\n                        <div className=\"mt-3 space-y-2\">\n                          <div className=\"text-xs font-medium text-green-600 mb-2\">✓ Created Items:</div>\n                          {message.createdItems.map((item, index) => (\n                            <div \n                              key={index}\n                              className=\"flex items-center gap-2 p-2 bg-green-50 rounded border border-green-200\"\n                            >\n                              <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                              <span className=\"text-xs flex-1\">\n                                <span className=\"font-medium capitalize\">{item.type}</span>: {item.name}\n                              </span>\n                              <Button \n                                size=\"sm\" \n                                variant=\"ghost\" \n                                className=\"h-6 w-6 p-0 text-blue-600\"\n                                onClick={() => {\n                                  if (item.type === 'program') {\n                                    setLocation(`/programs/${item.id}`);\n                                  } else if (item.type === 'risk') {\n                                    setLocation(`/risk-management?riskId=${item.id}`);\n                                  }\n                                }}\n                              >\n                                <ExternalLink className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n\n                      {/* Actions */}\n                      {message.actions && message.actions.length > 0 && (\n                        <div className=\"mt-3 space-y-2\">\n                          <div className=\"text-xs font-medium text-blue-600 mb-2\">⚡ Actions Available:</div>\n                          {message.actions.map((action, index) => (\n                            <div \n                              key={index}\n                              className=\"flex items-center gap-2\"\n                            >\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                className=\"h-7 text-xs\"\n                                onClick={() => {\n                                  if (action.type === 'navigate') {\n                                    setLocation(action.target);\n                                  }\n                                }}\n                              >\n                                {action.type === 'navigate' ? 'Go to ' : action.type + ' '}\n                                {action.target.replace('/api/', '').replace('/', ' ')}\n                                <ExternalLink className=\"h-3 w-3 ml-1\" />\n                              </Button>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n\n                      {/* Attachments */}\n                      {message.attachments && message.attachments.length > 0 && (\n                        <div className=\"mt-3 space-y-2\">\n                          {message.attachments.map((attachment, index) => (\n                            <div \n                              key={index}\n                              className=\"flex items-center gap-2 p-2 bg-white/10 rounded border\"\n                            >\n                              {attachment.type === 'image' ? (\n                                <Image className=\"h-4 w-4\" />\n                              ) : (\n                                <FileText className=\"h-4 w-4\" />\n                              )}\n                              <span className=\"text-xs flex-1\">{attachment.name}</span>\n                              <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0\">\n                                <Download className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className={`text-xs text-gray-500 mt-1 ${message.type === 'user' ? 'text-right' : ''}`}>\n                      {formatTime(message.timestamp)}\n                    </div>\n                  </div>\n                  \n                  {message.type === 'user' && (\n                    <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0 order-3\">\n                      <User className=\"h-4 w-4 text-blue-600\" />\n                    </div>\n                  )}\n                </div>\n              ))}\n              \n              {/* Processing Indicator */}\n              {isProcessing && (\n                <div className=\"flex gap-3 justify-start\">\n                  <div className=\"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0\">\n                    <Bot className=\"h-4 w-4 animate-pulse\" />\n                  </div>\n                  <div className=\"max-w-[70%]\">\n                    <div className=\"rounded-lg p-4 bg-gray-100\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"flex gap-1\">\n                          <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                          <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                          <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                        </div>\n                        <span className=\"text-sm text-gray-600\">AI is thinking...</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            {/* Input Area */}\n            <div className=\"border-t border-gray-100 p-4\">\n              <div className=\"flex items-center gap-3\">\n                <Button\n                  variant={isListening ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={toggleVoiceRecognition}\n                  className={`flex items-center gap-2 ${isListening ? 'bg-red-500 hover:bg-red-600' : ''}`}\n                >\n                  {isListening ? (\n                    <>\n                      <MicOff className=\"h-4 w-4\" />\n                      Stop\n                    </>\n                  ) : (\n                    <>\n                      <Mic className=\"h-4 w-4\" />\n                      Voice\n                    </>\n                  )}\n                </Button>\n                \n                <div className=\"flex-1 flex gap-2\">\n                  <Input\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    placeholder=\"Type your message or ask a question...\"\n                    onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\n                    disabled={isProcessing}\n                    className=\"flex-1\"\n                  />\n                  <Button\n                    onClick={handleSendMessage}\n                    disabled={!inputValue.trim() || isProcessing}\n                    size=\"sm\"\n                  >\n                    <Send className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                \n                <Button\n                  onClick={clearChatHistory}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"text-gray-500 hover:text-gray-700\"\n                  title=\"Clear chat history\"\n                >\n                  Clear Chat\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Response Showcase Area */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* Quick Commands */}\n          <Card className=\"border border-gray-200\">\n            <CardHeader>\n              <CardTitle className=\"text-sm\">Quick Commands</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"w-full justify-start text-xs\"\n                onClick={() => setInputValue(\"Analyze program risks\")}\n              >\n                <Zap className=\"h-3 w-3 mr-2\" />\n                Analyze program risks\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"w-full justify-start text-xs\"\n                onClick={() => setInputValue(\"Show overdue milestones\")}\n              >\n                <Zap className=\"h-3 w-3 mr-2\" />\n                Show overdue milestones\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"w-full justify-start text-xs\"\n                onClick={() => setInputValue(\"Generate status report\")}\n              >\n                <Zap className=\"h-3 w-3 mr-2\" />\n                Generate status report\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                className=\"w-full justify-start text-xs\"\n                onClick={() => setInputValue(\"Check team readiness\")}\n              >\n                <Zap className=\"h-3 w-3 mr-2\" />\n                Check team readiness\n              </Button>\n            </CardContent>\n          </Card>\n\n          {/* Response Types */}\n          <Card className=\"border border-gray-200\">\n            <CardHeader>\n              <CardTitle className=\"text-sm\">Response Capabilities</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex items-center gap-3 text-sm\">\n                <Bot className=\"h-4 w-4 text-blue-500\" />\n                <span>Text analysis & recommendations</span>\n              </div>\n              <div className=\"flex items-center gap-3 text-sm\">\n                <FileText className=\"h-4 w-4 text-green-500\" />\n                <span>Generate reports & documents</span>\n              </div>\n              <div className=\"flex items-center gap-3 text-sm\">\n                <Image className=\"h-4 w-4 text-purple-500\" />\n                <span>Create charts & visualizations</span>\n              </div>\n              <div className=\"flex items-center gap-3 text-sm\">\n                <Volume2 className=\"h-4 w-4 text-orange-500\" />\n                <span>Voice responses & audio</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Voice Commands */}\n          <Card className=\"border border-gray-200\">\n            <CardHeader>\n              <CardTitle className=\"text-sm\">Voice Commands</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"text-xs space-y-2\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                  <span className=\"text-gray-600\">\"Show me critical risks\"</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                  <span className=\"text-gray-600\">\"Create new milestone\"</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                  <span className=\"text-gray-600\">\"Generate weekly report\"</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                  <span className=\"text-gray-600\">\"What's my program health?\"</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </main>\n    </div>\n  );\n}","size_bytes":25717},"client/src/pages/AdopterSupport.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Users, \n  Plus, \n  Filter, \n  MessageCircle, \n  Calendar, \n  CheckCircle, \n  AlertCircle,\n  Clock,\n  TrendingUp,\n  FileText,\n  Mail\n} from \"lucide-react\";\nimport type { Adopter, Program } from \"@shared/schema\";\n\nexport default function AdopterSupport() {\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const [formData, setFormData] = useState({\n    teamName: \"\",\n    description: \"\",\n    programId: \"\",\n    status: \"not_started\",\n    readinessScore: 0,\n    contactId: \"\",\n    onboardingNotes: \"\",\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: adopters = [], isLoading } = useQuery<Adopter[]>({\n    queryKey: [\"/api/adopters\"],\n  });\n\n  const { data: programs = [] } = useQuery<Program[]>({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const createAdopterMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"/api/adopters\", \"POST\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Adopter team created successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/adopters\"] });\n      setShowCreateModal(false);\n      resetForm();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create adopter team\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      teamName: \"\",\n      description: \"\",\n      programId: \"\",\n      status: \"not_started\",\n      readinessScore: 0,\n      contactId: \"\",\n      onboardingNotes: \"\",\n    });\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    createAdopterMutation.mutate(formData);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case \"completed\": \n      case \"ready\": return \"bg-green-100 text-green-800\";\n      case \"in_progress\": return \"bg-blue-100 text-blue-800\";\n      case \"blocked\": return \"bg-red-100 text-red-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case \"completed\":\n      case \"ready\": return CheckCircle;\n      case \"in_progress\": return Clock;\n      case \"blocked\": return AlertCircle;\n      default: return Clock;\n    }\n  };\n\n  const getReadinessColor = (score: number) => {\n    if (score >= 85) return \"text-green-600\";\n    if (score >= 60) return \"text-yellow-600\";\n    return \"text-red-600\";\n  };\n\n  const filteredAdopters = adopters.filter((adopter: any) => \n    filterStatus === \"all\" || adopter.status === filterStatus\n  );\n\n  const handleNewAdopter = () => {\n    setShowCreateModal(true);\n  };\n\n  const getAverageReadinessScore = () => {\n    if (adopters.length === 0) return 0;\n    const total = adopters.reduce((sum: number, adopter: any) => sum + (adopter.readinessScore || 0), 0);\n    return Math.round(total / adopters.length);\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <Header\n        title=\"Adopter Support\"\n        subtitle=\"Track internal feature/API adopters with onboarding status and readiness scoring\"\n        onNewClick={handleNewAdopter}\n        newButtonText=\"Add Team\"\n      />\n\n      <main className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\n        <Tabs defaultValue=\"overview\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n            <TabsTrigger value=\"teams\">Adopter Teams</TabsTrigger>\n            <TabsTrigger value=\"scorecards\">Readiness Scorecards</TabsTrigger>\n            <TabsTrigger value=\"feedback\">Feedback & Support</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"overview\" className=\"space-y-6\">\n            {/* Key Metrics */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Total Teams</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{adopters.length}</p>\n                    </div>\n                    <Users className=\"text-blue-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Ready Teams</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">\n                        {adopters.filter((a: any) => a.status === \"ready\" || a.status === \"completed\").length}\n                      </p>\n                    </div>\n                    <CheckCircle className=\"text-green-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Avg Readiness</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{getAverageReadinessScore()}%</p>\n                    </div>\n                    <TrendingUp className=\"text-purple-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Blocked Teams</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">\n                        {adopters.filter((a: any) => a.status === \"blocked\").length}\n                      </p>\n                    </div>\n                    <AlertCircle className=\"text-red-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Recent Activity */}\n            <Card className=\"border border-gray-200\">\n              <CardHeader>\n                <CardTitle>Recent Adopter Activity</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {adopters.slice(0, 5).map((adopter: any) => (\n                    <div key={adopter.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                        <div>\n                          <p className=\"font-medium text-gray-900\">{adopter.teamName}</p>\n                          <p className=\"text-sm text-gray-600\">Readiness score updated</p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <Badge className={getStatusColor(adopter.status)}>\n                          {adopter.status?.replace(\"_\", \" \") || \"not started\"}\n                        </Badge>\n                      </div>\n                    </div>\n                  ))}\n                  {adopters.length === 0 && (\n                    <p className=\"text-center text-gray-500 py-4\">No adopter activity yet</p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"teams\" className=\"space-y-6\">\n            {/* Filters */}\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <Filter size={16} className=\"text-gray-500\" />\n                <Label className=\"text-sm font-medium\">Status:</Label>\n                <Select value={filterStatus} onValueChange={setFilterStatus}>\n                  <SelectTrigger className=\"w-40\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Statuses</SelectItem>\n                    <SelectItem value=\"not_started\">Not Started</SelectItem>\n                    <SelectItem value=\"in_progress\">In Progress</SelectItem>\n                    <SelectItem value=\"ready\">Ready</SelectItem>\n                    <SelectItem value=\"blocked\">Blocked</SelectItem>\n                    <SelectItem value=\"completed\">Completed</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            {/* Adopters Grid */}\n            {isLoading ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {Array.from({ length: 6 }).map((_, i) => (\n                  <Card key={i} className=\"border border-gray-200\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"animate-pulse\">\n                        <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                        <div className=\"h-3 bg-gray-200 rounded w-full mb-4\"></div>\n                        <div className=\"h-2 bg-gray-200 rounded w-full mb-2\"></div>\n                        <div className=\"h-6 bg-gray-200 rounded w-1/3\"></div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : filteredAdopters.length === 0 ? (\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-12 text-center\">\n                  <Users size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No adopter teams found</h3>\n                  <div className=\"text-gray-500 mb-4\">\n                    {filterStatus === \"all\" \n                      ? programs.length > 0 \n                        ? (\n                          <div>\n                            <p className=\"mb-3\">The following programs are missing adopter tracking:</p>\n                            <ul className=\"space-y-2 mb-4\">\n                              {programs.map(program => (\n                                <li key={program.id} className=\"flex items-center gap-2 text-sm bg-green-50 px-3 py-2 rounded border-l-4 border-green-400\">\n                                  <div className=\"w-2 h-2 bg-green-400 rounded-full\"></div>\n                                  <span className=\"font-medium\">Program \"</span>\n                                  <button \n                                    className=\"font-medium text-primary-600 hover:text-primary-700 hover:underline\"\n                                    onClick={() => setLocation(`/program-planning?id=${program.id}`)}\n                                  >\n                                    {program.name}\n                                  </button>\n                                  <span className=\"font-medium\">\"</span>\n                                  <span className=\"text-gray-600\">has no teams tracked</span>\n                                </li>\n                              ))}\n                            </ul>\n                            <p>Get started by adding teams and tracking their adoption readiness.</p>\n                          </div>\n                        )\n                        : <p>Get started by adding adopter teams to track their onboarding progress.</p>\n                      : <p>No teams with status \"{filterStatus.replace(\"_\", \" \")}\" found.</p>\n                    }\n                  </div>\n                  <Button onClick={handleNewAdopter} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                    <Plus size={16} className=\"mr-2\" />\n                    Add Adopter Team\n                  </Button>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {filteredAdopters.map((adopter: any) => {\n                  const StatusIcon = getStatusIcon(adopter.status);\n                  const readinessScore = adopter.readinessScore || 0;\n                  \n                  return (\n                    <Card key={adopter.id} className=\"border border-gray-200\">\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-start justify-between mb-4\">\n                          <div className=\"flex-1\">\n                            <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\n                              {adopter.teamName}\n                            </h3>\n                            <p className=\"text-sm text-gray-600 mb-3\">\n                              {adopter.description || \"No description provided\"}\n                            </p>\n                          </div>\n                          <StatusIcon size={20} className={getStatusColor(adopter.status).includes('green') ? 'text-green-500' : \n                                                           getStatusColor(adopter.status).includes('red') ? 'text-red-500' : \n                                                           getStatusColor(adopter.status).includes('blue') ? 'text-blue-500' : 'text-gray-500'} />\n                        </div>\n\n                        <div className=\"space-y-3\">\n                          <div>\n                            <div className=\"flex items-center justify-between mb-1\">\n                              <span className=\"text-sm text-gray-600\">Readiness Score</span>\n                              <span className={`text-sm font-semibold ${getReadinessColor(readinessScore)}`}>\n                                {readinessScore}%\n                              </span>\n                            </div>\n                            <Progress value={readinessScore} className=\"h-2\" />\n                          </div>\n\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm text-gray-500\">Status:</span>\n                            <Badge className={`${getStatusColor(adopter.status)} font-medium capitalize`}>\n                              {adopter.status?.replace(\"_\", \" \") || \"not started\"}\n                            </Badge>\n                          </div>\n\n                          {adopter.contact && (\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-sm text-gray-500\">Contact:</span>\n                              <span className=\"text-sm font-medium text-gray-900\">\n                                {adopter.contact.name}\n                              </span>\n                            </div>\n                          )}\n\n                          {adopter.lastCheckIn && (\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-sm text-gray-500\">Last Check-in:</span>\n                              <span className=\"text-sm text-gray-900\">\n                                {new Date(adopter.lastCheckIn).toLocaleDateString()}\n                              </span>\n                            </div>\n                          )}\n                        </div>\n\n                        <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                          <div className=\"flex gap-2\">\n                            <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n                              <MessageCircle size={14} className=\"mr-1\" />\n                              Message\n                            </Button>\n                            <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n                              <Calendar size={14} className=\"mr-1\" />\n                              Schedule\n                            </Button>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  );\n                })}\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"scorecards\" className=\"space-y-6\">\n            <Card className=\"border border-gray-200\">\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle>Readiness Scorecards</CardTitle>\n                  <Button size=\"sm\" className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                    <FileText size={14} className=\"mr-1\" />\n                    Export All Scorecards\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {adopters.map((adopter: any) => (\n                    <div key={adopter.id} className=\"p-4 border border-gray-200 rounded-lg\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <h4 className=\"font-semibold text-gray-900\">{adopter.teamName}</h4>\n                        <div className=\"flex items-center gap-2\">\n                          <span className={`font-bold ${getReadinessColor(adopter.readinessScore || 0)}`}>\n                            {adopter.readinessScore || 0}%\n                          </span>\n                          <Button variant=\"outline\" size=\"sm\">\n                            <FileText size={14} className=\"mr-1\" />\n                            Export\n                          </Button>\n                        </div>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                        <div>\n                          <div className=\"text-sm text-gray-600 mb-1\">Technical Setup</div>\n                          <div className=\"flex items-center gap-2\">\n                            <Progress value={Math.random() * 100} className=\"flex-1 h-2\" />\n                            <span className=\"text-xs font-medium\">{Math.round(Math.random() * 100)}%</span>\n                          </div>\n                        </div>\n                        <div>\n                          <div className=\"text-sm text-gray-600 mb-1\">Integration</div>\n                          <div className=\"flex items-center gap-2\">\n                            <Progress value={Math.random() * 100} className=\"flex-1 h-2\" />\n                            <span className=\"text-xs font-medium\">{Math.round(Math.random() * 100)}%</span>\n                          </div>\n                        </div>\n                        <div>\n                          <div className=\"text-sm text-gray-600 mb-1\">Testing</div>\n                          <div className=\"flex items-center gap-2\">\n                            <Progress value={Math.random() * 100} className=\"flex-1 h-2\" />\n                            <span className=\"text-xs font-medium\">{Math.round(Math.random() * 100)}%</span>\n                          </div>\n                        </div>\n                        <div>\n                          <div className=\"text-sm text-gray-600 mb-1\">Documentation</div>\n                          <div className=\"flex items-center gap-2\">\n                            <Progress value={Math.random() * 100} className=\"flex-1 h-2\" />\n                            <span className=\"text-xs font-medium\">{Math.round(Math.random() * 100)}%</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                  {adopters.length === 0 && (\n                    <p className=\"text-center text-gray-500 py-8\">No adopter teams to display scorecards for</p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"feedback\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Feedback Collection</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"p-3 bg-blue-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <MessageCircle className=\"text-blue-500\" size={16} />\n                        <span className=\"font-medium text-blue-700\">Mobile App Team</span>\n                      </div>\n                      <p className=\"text-sm text-blue-600\">\n                        \"The API documentation is comprehensive, but we need more examples for edge cases.\"\n                      </p>\n                    </div>\n                    \n                    <div className=\"p-3 bg-yellow-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <MessageCircle className=\"text-yellow-500\" size={16} />\n                        <span className=\"font-medium text-yellow-700\">Web Platform Team</span>\n                      </div>\n                      <p className=\"text-sm text-yellow-600\">\n                        \"Integration is smooth, but authentication flow needs clarification.\"\n                      </p>\n                    </div>\n                    \n                    <div className=\"p-3 bg-green-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <MessageCircle className=\"text-green-500\" size={16} />\n                        <span className=\"font-medium text-green-700\">DevOps Team</span>\n                      </div>\n                      <p className=\"text-sm text-green-600\">\n                        \"Deployment process is well documented and straightforward.\"\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Support Actions</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <Button className=\"w-full justify-start bg-primary-500 text-white hover:bg-primary-600\">\n                      <Mail size={16} className=\"mr-2\" />\n                      Send Support Update\n                    </Button>\n                    <Button variant=\"outline\" className=\"w-full justify-start\">\n                      <Calendar size={16} className=\"mr-2\" />\n                      Schedule Team Check-ins\n                    </Button>\n                    <Button variant=\"outline\" className=\"w-full justify-start\">\n                      <FileText size={16} className=\"mr-2\" />\n                      Generate Summary Report\n                    </Button>\n                    <Button variant=\"outline\" className=\"w-full justify-start\">\n                      <MessageCircle size={16} className=\"mr-2\" />\n                      Create Support Ticket\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </main>\n\n      {/* Create Adopter Modal */}\n      <Dialog open={showCreateModal} onOpenChange={setShowCreateModal}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Add Adopter Team</DialogTitle>\n          </DialogHeader>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"teamName\">Team Name</Label>\n              <Input\n                id=\"teamName\"\n                value={formData.teamName}\n                onChange={(e) => setFormData(prev => ({ ...prev, teamName: e.target.value }))}\n                placeholder=\"e.g., Mobile App Team, Data Analytics Team\"\n                required\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"description\">Description</Label>\n              <Textarea\n                id=\"description\"\n                value={formData.description}\n                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                placeholder=\"Describe the team's integration needs and use case\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"program\">Program</Label>\n                <Select value={formData.programId} onValueChange={(value) => setFormData(prev => ({ ...prev, programId: value }))}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select program\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {programs.map((program: any) => (\n                      <SelectItem key={program.id} value={program.id}>\n                        {program.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"status\">Status</Label>\n                <Select value={formData.status} onValueChange={(value) => setFormData(prev => ({ ...prev, status: value }))}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"not_started\">Not Started</SelectItem>\n                    <SelectItem value=\"in_progress\">In Progress</SelectItem>\n                    <SelectItem value=\"ready\">Ready</SelectItem>\n                    <SelectItem value=\"blocked\">Blocked</SelectItem>\n                    <SelectItem value=\"completed\">Completed</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div>\n              <Label htmlFor=\"readinessScore\">Initial Readiness Score (0-100)</Label>\n              <Input\n                id=\"readinessScore\"\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                value={formData.readinessScore}\n                onChange={(e) => setFormData(prev => ({ ...prev, readinessScore: parseInt(e.target.value) || 0 }))}\n                placeholder=\"0\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"onboardingNotes\">Onboarding Notes</Label>\n              <Textarea\n                id=\"onboardingNotes\"\n                value={formData.onboardingNotes}\n                onChange={(e) => setFormData(prev => ({ ...prev, onboardingNotes: e.target.value }))}\n                placeholder=\"Any specific notes about the team's onboarding requirements\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <Button type=\"button\" variant=\"outline\" onClick={() => setShowCreateModal(false)}>\n                Cancel\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"bg-primary-500 text-white hover:bg-primary-600\"\n                disabled={createAdopterMutation.isPending}\n              >\n                {createAdopterMutation.isPending ? \"Adding...\" : \"Add Adopter Team\"}\n              </Button>\n            </div>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":28835},"client/src/pages/Dashboard.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/layout/Header\";\nimport { MetricsCard } from \"@/components/dashboard/MetricsCard\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { MissingComponentsModal } from \"@/components/modals/MissingComponentsModal\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { \n  ChartGantt, \n  AlertTriangle, \n  Flag, \n  Users,\n  GitBranch,\n  Calendar,\n  ArrowRight,\n  Eye,\n  Clock,\n  CheckCircle,\n  Target,\n  FileText,\n  Play,\n  ChevronRight,\n  Plus,\n  Pause,\n  ExternalLink\n} from \"lucide-react\";\nimport { calculateProgramHealth, getHealthBadge } from \"@/lib/healthCalculation\";\nimport type { Program, Risk, Milestone, Adopter, Dependency, JiraEpic, JiraBepic, JiraStory } from \"@shared/schema\";\n\nexport default function Dashboard() {\n  const [selectedProgram, setSelectedProgram] = useState<Program | null>(null);\n  const [analysisData, setAnalysisData] = useState<any>(null);\n  const [showMissingComponentsModal, setShowMissingComponentsModal] = useState(false);\n  const [showNewProgramModal, setShowNewProgramModal] = useState(false);\n  const [showPrioritiesModal, setShowPrioritiesModal] = useState(false);\n  const [showAIRecommendationsModal, setShowAIRecommendationsModal] = useState(false);\n  const [newProgramForm, setNewProgramForm] = useState({\n    name: \"\",\n    description: \"\",\n    status: \"planning\" as const,\n    platform: \"\",\n    initiative: \"\"\n  });\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  // Auto-generate missing component risks on component mount\n  useEffect(() => {\n    const generateMissingRisks = async () => {\n      try {\n        // Run comprehensive gap detection (includes missing components + other gaps)\n        await apiRequest('/api/programs/detect-all-gaps', 'POST');\n        console.log('Comprehensive gap detection completed for all programs');\n        // Refresh risks data to show the new auto-generated risks\n        queryClient.invalidateQueries({ queryKey: [\"/api/risks\"] });\n      } catch (error) {\n        console.error('Failed to run gap detection:', error);\n      }\n    };\n    \n    // Only run once when component mounts\n    generateMissingRisks();\n  }, []);\n\n  // WebSocket connection for real-time updates\n  useEffect(() => {\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const host = window.location.host;\n    const wsUrl = `${protocol}//${host}/ws`;\n    \n    const ws = new WebSocket(wsUrl);\n    \n    ws.onopen = () => {\n      console.log('Connected to WebSocket for real-time updates');\n    };\n    \n    ws.onmessage = (event) => {\n      try {\n        const message = JSON.parse(event.data);\n        \n        if (message.type === 'data_changed') {\n          console.log('Received data change notification:', message.data.type);\n          \n          // Invalidate all relevant queries to refresh dashboard data automatically\n          queryClient.invalidateQueries({ queryKey: [\"/api/programs\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/risks\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/milestones\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/adopters\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/dependencies\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/initiatives\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/platforms\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/projects\"] });\n          queryClient.invalidateQueries({ queryKey: [\"/api/dashboard/metrics\"] });\n          \n          // Show toast notification for data changes\n          toast({\n            title: \"Data Updated\",\n            description: \"Dashboard has been refreshed with latest changes\",\n            duration: 2000,\n          });\n        }\n      } catch (error) {\n        console.error('Error parsing WebSocket message:', error);\n      }\n    };\n    \n    ws.onclose = () => {\n      console.log('WebSocket connection closed');\n    };\n    \n    ws.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n    \n    // Cleanup WebSocket connection on component unmount\n    return () => {\n      if (ws.readyState === WebSocket.OPEN) {\n        ws.close();\n      }\n    };\n  }, [queryClient, toast]);\n\n  const { data: programs = [], isLoading: programsLoading } = useQuery<Program[]>({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const { data: risks = [] } = useQuery<Risk[]>({\n    queryKey: [\"/api/risks\"],\n  });\n\n  const { data: milestones = [] } = useQuery<Milestone[]>({\n    queryKey: [\"/api/milestones\"],\n  });\n\n  const { data: adopters = [] } = useQuery<Adopter[]>({\n    queryKey: [\"/api/adopters\"],\n  });\n\n  const { data: dependencies = [] } = useQuery<Dependency[]>({\n    queryKey: [\"/api/dependencies\"],\n  });\n\n  const { data: jiraEpics = [] } = useQuery<JiraEpic[]>({\n    queryKey: [\"/api/jira-epics\"],\n  });\n\n  const { data: jiraBepics = [] } = useQuery<JiraBepic[]>({\n    queryKey: [\"/api/jira-bepics\"],\n  });\n\n  const { data: jiraStories = [] } = useQuery<JiraStory[]>({\n    queryKey: [\"/api/jira-stories\"],\n  });\n\n  const { data: milestoneSteps = [] } = useQuery<any[]>({\n    queryKey: [\"/api/milestone-steps\"],\n  });\n\n  const activePendingPrograms = programs.filter(p => p.status === 'active' || p.status === 'planning');\n  const completedPrograms = programs.filter(p => p.status === 'completed');\n  const onHoldPrograms = programs.filter(p => p.status === 'on_hold');\n\n  // Generate today's priorities based on program health analysis\n  const generateTodaysPriorities = () => {\n    const priorities = [];\n    \n    // Critical risks that need immediate attention\n    const criticalRisks = risks.filter(r => r.severity === 'critical' || r.severity === 'high').slice(0, 3);\n    criticalRisks.forEach(risk => {\n      const program = programs.find(p => p.id === risk.programId);\n      priorities.push({\n        type: 'risk',\n        title: `Address ${risk.severity} risk in ${program?.name || 'Unknown Program'}`,\n        description: risk.title,\n        urgency: 'critical',\n        action: 'Review mitigation plan and assign owners'\n      });\n    });\n\n    // Overdue milestones\n    const overdueMilestones = milestones.filter(m => {\n      if (!m.dueDate) return false;\n      const dueDate = new Date(m.dueDate);\n      return dueDate < new Date() && m.status !== 'completed';\n    }).slice(0, 3);\n    \n    overdueMilestones.forEach(milestone => {\n      const program = programs.find(p => p.id === milestone.programId);\n      priorities.push({\n        type: 'milestone',\n        title: `Overdue milestone in ${program?.name || 'Unknown Program'}`,\n        description: milestone.title,\n        urgency: 'high',\n        action: 'Update timeline and communicate delays'\n      });\n    });\n\n    // Programs missing critical components\n    programs.forEach(program => {\n      const programRisks = risks.filter(r => r.programId === program.id);\n      const programMilestones = milestones.filter(m => m.programId === program.id);\n      const programAdopters = adopters.filter(a => a.programId === program.id);\n      \n      if (program.status === 'active' && (programRisks.length === 0 || programMilestones.length === 0)) {\n        priorities.push({\n          type: 'completeness',\n          title: `${program.name} missing critical components`,\n          description: `Missing: ${programRisks.length === 0 ? 'Risk Assessment' : ''} ${programMilestones.length === 0 ? 'Milestones' : ''}`.trim(),\n          urgency: 'medium',\n          action: 'Complete program setup to ensure proper tracking'\n        });\n      }\n    });\n\n    return priorities.slice(0, 8); // Top 8 priorities\n  };\n\n  // Generate PMI-based recommendations\n  const generatePMIRecommendations = () => {\n    const recommendations = [];\n    \n    // Analyze ALL programs (not just active ones) for completeness\n    programs.forEach(program => {\n      const programRisks = risks.filter(r => r.programId === program.id);\n      const programMilestones = milestones.filter(m => m.programId === program.id);\n      const programDependencies = dependencies.filter(d => d.programId === program.id);\n      const programAdopters = adopters.filter(a => a.programId === program.id);\n      \n      // Initiating Process Group - Program Charter & Documentation\n      if (!program.description || program.description.length < 50) {\n        recommendations.push({\n          category: 'Initiating',\n          title: `Develop Program Charter for ${program.name}`,\n          description: 'PMI requires comprehensive program charter with clear scope, objectives, and success criteria',\n          pmiReference: 'PMBOK 7th Edition - Project Charter Development',\n          priority: 'high'\n        });\n      }\n\n      if (!program.ownerId) {\n        recommendations.push({\n          category: 'Initiating',\n          title: `Assign Program Manager for ${program.name}`,\n          description: 'PMI mandates clear ownership and accountability through designated program leadership',\n          pmiReference: 'PMBOK - Project Manager Role Definition',\n          priority: 'high'\n        });\n      }\n\n      if (!program.startDate) {\n        recommendations.push({\n          category: 'Initiating',\n          title: `Define Start Date for ${program.name}`,\n          description: 'PMI requires clear timeline boundaries for proper program initiation',\n          pmiReference: 'PMBOK - Schedule Management Planning',\n          priority: 'medium'\n        });\n      }\n\n      if (!program.endDate) {\n        recommendations.push({\n          category: 'Initiating',\n          title: `Establish End Date for ${program.name}`,\n          description: 'PMI emphasizes time-bound objectives for successful program closure',\n          pmiReference: 'PMBOK - Schedule Management Planning',\n          priority: 'medium'\n        });\n      }\n\n      // Planning Process Group - Work Breakdown & Risk Management\n      if (programMilestones.length === 0) {\n        recommendations.push({\n          category: 'Planning',\n          title: `Create Work Breakdown Structure for ${program.name}`,\n          description: 'PMI requires detailed milestone planning and work decomposition',\n          pmiReference: 'PMBOK - Work Breakdown Structure',\n          priority: 'critical'\n        });\n      }\n\n      if (programRisks.length === 0) {\n        recommendations.push({\n          category: 'Planning',\n          title: `Conduct Risk Assessment for ${program.name}`,\n          description: 'PMI mandates proactive risk identification and management planning',\n          pmiReference: 'PMBOK - Risk Management Process',\n          priority: 'high'\n        });\n      }\n\n      if (!program.objectives || (Array.isArray(program.objectives) && program.objectives.length === 0)) {\n        recommendations.push({\n          category: 'Planning',\n          title: `Define SMART Objectives for ${program.name}`,\n          description: 'PMI requires specific, measurable, achievable, relevant, time-bound objectives',\n          pmiReference: 'PMBOK - Scope Management',\n          priority: 'high'\n        });\n      }\n\n      if (!program.kpis || (Array.isArray(program.kpis) && program.kpis.length === 0)) {\n        recommendations.push({\n          category: 'Planning',\n          title: `Establish KPIs for ${program.name}`,\n          description: 'PMI emphasizes measurable success criteria and performance indicators',\n          pmiReference: 'PMBOK - Quality Management',\n          priority: 'medium'\n        });\n      }\n\n      // Executing Process Group - Stakeholder & Resource Management\n      if (programAdopters.length === 0) {\n        recommendations.push({\n          category: 'Executing',\n          title: `Identify Stakeholders for ${program.name}`,\n          description: 'PMI requires comprehensive stakeholder identification and engagement planning',\n          pmiReference: 'PMBOK - Stakeholder Management',\n          priority: 'high'\n        });\n      }\n\n      if (programDependencies.length === 0) {\n        recommendations.push({\n          category: 'Planning',\n          title: `Map Dependencies for ${program.name}`,\n          description: 'PMI emphasizes dependency identification for critical path management',\n          pmiReference: 'PMBOK - Schedule Management',\n          priority: 'medium'\n        });\n      }\n\n      // Monitoring & Controlling - Active Risk Management\n      const criticalRisks = programRisks.filter(r => r.severity === 'critical' || r.severity === 'high');\n      if (criticalRisks.length > 0) {\n        recommendations.push({\n          category: 'Monitoring',\n          title: `Implement Risk Response Plans for ${program.name}`,\n          description: 'PMI requires immediate response strategies for high-impact risks',\n          pmiReference: 'PMBOK - Risk Response Implementation',\n          priority: 'critical'\n        });\n      }\n\n      // Communication Management\n      const blockedDependencies = programDependencies.filter(d => d.status === 'blocked');\n      if (blockedDependencies.length > 0) {\n        recommendations.push({\n          category: 'Executing',\n          title: `Resolve Blocked Dependencies in ${program.name}`,\n          description: 'PMI emphasizes clear communication and escalation for dependency resolution',\n          pmiReference: 'PMBOK - Communications Management',\n          priority: 'critical'\n        });\n      }\n    });\n\n    // Portfolio-Level PMI Recommendations\n    if (programs.length > 2) {\n      recommendations.push({\n        category: 'Integration',\n        title: 'Establish Program Management Office (PMO)',\n        description: 'PMI recommends PMO governance for portfolio consistency and standardization',\n        pmiReference: 'PMI - Program Management Standard',\n        priority: 'medium'\n      });\n    }\n\n    // Quality Assurance\n    const programsWithoutProperDocumentation = programs.filter(p => \n      !p.description || p.description.length < 50 || !p.objectives || !p.kpis\n    );\n    \n    if (programsWithoutProperDocumentation.length > 0) {\n      recommendations.push({\n        category: 'Quality',\n        title: 'Standardize Program Documentation',\n        description: 'PMI requires consistent documentation standards across all programs',\n        pmiReference: 'PMBOK - Quality Management',\n        priority: 'medium'\n      });\n    }\n\n    // Risk Management Portfolio View\n    const totalRisks = risks.length;\n    const totalPrograms = programs.length;\n    if (totalPrograms > 0 && (totalRisks / totalPrograms) < 2) {\n      recommendations.push({\n        category: 'Planning',\n        title: 'Enhance Portfolio Risk Assessment',\n        description: 'PMI recommends comprehensive risk identification across all programs',\n        pmiReference: 'PMBOK - Portfolio Risk Management',\n        priority: 'high'\n      });\n    }\n\n    // Sort by priority and return top recommendations\n    const priorityOrder = { 'critical': 4, 'high': 3, 'medium': 2, 'low': 1 };\n    return recommendations\n      .sort((a, b) => priorityOrder[b.priority] - priorityOrder[a.priority])\n      .slice(0, 15); // Top 15 recommendations\n  };\n\n  const analyzeProgramMutation = useMutation({\n    mutationFn: async (programId: string) => {\n      return await apiRequest(\"/api/analyze-program\", \"POST\", { programId });\n    },\n    onSuccess: (data: any, programId: string) => {\n      const program = programs.find(p => p.id === programId);\n      const analysis = data.analysis?.[0];\n      if (analysis && program) {\n        setSelectedProgram(program);\n        setAnalysisData(analysis);\n        setShowMissingComponentsModal(true);\n        \n        toast({\n          title: `${program.name} Analysis Complete`,\n          description: `Found ${analysis.riskAlerts?.length || 0} missing components. Opening detailed view...`,\n          variant: analysis.riskAlerts?.length > 0 ? \"destructive\" : \"default\",\n        });\n      }\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Analysis Failed\",\n        description: \"Unable to analyze program at this time\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const createProgramMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return apiRequest(\"/api/programs\", \"POST\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Program created successfully\",\n      });\n      setShowNewProgramModal(false);\n      setNewProgramForm({ name: \"\", description: \"\", status: \"planning\", platform: \"\", initiative: \"\" });\n      // Refresh programs list\n      queryClient.invalidateQueries({ queryKey: [\"/api/programs\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to create program\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleNewProgram = () => {\n    setShowNewProgramModal(true);\n  };\n\n  const handleCreateProgram = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newProgramForm.name.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Program name is required\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    createProgramMutation.mutate(newProgramForm);\n  };\n\n  const handleCheckRisks = (programId: string) => {\n    analyzeProgramMutation.mutate(programId);\n  };\n\n  const handleNavigateToComponent = (component: string, programId: string) => {\n    switch (component) {\n      case 'Milestones':\n        toast({\n          title: \"No Milestones Found\",\n          description: \"This program has no milestones. Navigate to Milestones page to add some.\",\n          variant: \"default\",\n        });\n        setLocation('/milestones');\n        break;\n      case 'Risks':\n        toast({\n          title: \"No Additional Risks Found\", \n          description: \"Navigate to Risk Management to add more risks for this program.\",\n          variant: \"default\",\n        });\n        setLocation('/risk-management');\n        break;\n      case 'Dependencies':\n        toast({\n          title: \"No Dependencies Found\",\n          description: \"This program has no dependencies. Navigate to Dependencies page to add some.\",\n          variant: \"default\",\n        });\n        setLocation('/dependencies');\n        break;\n      case 'Adopters':\n        toast({\n          title: \"No Adopter Teams Found\",\n          description: \"This program has no adopter teams. Navigate to Adopter Support to add some.\",\n          variant: \"default\",\n        });\n        setLocation('/adopter-support');\n        break;\n      default:\n        toast({\n          title: `Missing ${component}`,\n          description: `This program is missing ${component}. This component needs to be added for completeness.`,\n          variant: \"default\",\n        });\n    }\n  };\n\n  const getProgramRisks = (programId: string) => {\n    return risks.filter(r => r.programId === programId);\n  };\n\n  const getProgramMilestones = (programId: string) => {\n    return milestones.filter(m => m.programId === programId);\n  };\n\n  const getProgramAdopters = (programId: string) => {\n    return adopters.filter(a => a.programId === programId);\n  };\n\n  const getProgramDependencies = (programId: string) => {\n    return dependencies.filter(d => d.programId === programId);\n  };\n\n  // Helper function to calculate program completeness\n  const getProgramCompleteness = (programId: string) => {\n    const programRisks = risks.filter(r => r.programId === programId);\n    const programMilestones = milestones.filter(m => m.programId === programId);\n    const programDependencies = dependencies.filter(d => d.programId === programId);\n    const programAdopters = adopters.filter(a => a.programId === programId);\n    \n    const programMilestoneIds = programMilestones.map(m => m.id);\n    const programStepIds = milestoneSteps.filter(s => \n      programMilestoneIds.includes(s.milestoneId || \"\")\n    ).map(s => s.id);\n    \n    const programBepics = jiraBepics.filter(b => programStepIds.includes(b.stepId || \"\"));\n    const programBepicIds = programBepics.map(b => b.id);\n    const programEpics = jiraEpics.filter(e => programBepicIds.includes(e.bepicId || \"\"));\n    const programEpicIds = programEpics.map(e => e.id);\n    const programStories = jiraStories.filter(s => programEpicIds.includes(s.epicId || \"\"));\n    \n    const program = programs.find(p => p.id === programId);\n    \n    const requiredComponents = [\n      { name: 'Description', exists: !!program?.description },\n      { name: 'Start Date', exists: !!program?.startDate },\n      { name: 'End Date', exists: !!program?.endDate },\n      { name: 'Milestones', exists: programMilestones.length > 0 },\n      { name: 'Risks', exists: programRisks.length > 0 },\n      { name: 'Dependencies', exists: programDependencies.length > 0 },\n      { name: 'Adopters', exists: programAdopters.length > 0 },\n      { name: 'Business Epics', exists: programBepics.length > 0 },\n      { name: 'Epics', exists: programEpics.length > 0 },\n      { name: 'Stories', exists: programStories.length > 0 }\n    ];\n    \n    const completed = requiredComponents.filter(c => c.exists).length;\n    const total = requiredComponents.length;\n    const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;\n    \n    const missing = requiredComponents.filter(c => !c.exists);\n    \n    return {\n      percentage,\n      completed,\n      total,\n      missing,\n      requiredComponents\n    };\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case 'active': return 'bg-green-100 text-green-800';\n      case 'planning': return 'bg-blue-100 text-blue-800';\n      case 'on_hold': return 'bg-yellow-100 text-yellow-800';\n      case 'completed': return 'bg-gray-100 text-gray-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n\n\n  const getStatusIcon = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case 'active': return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\n      case 'planning': return <Clock className=\"h-4 w-4 text-blue-600\" />;\n      case 'on_hold': return <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />;\n      case 'completed': return <Flag className=\"h-4 w-4 text-gray-600\" />;\n      default: return <ChartGantt className=\"h-4 w-4 text-gray-600\" />;\n    }\n  };\n\n  // Helper function to determine current PMP phase and next steps\n  const getProgramPhase = (program: Program) => {\n    switch (program.status?.toLowerCase()) {\n      case 'planning': return { \n        name: 'Planning', \n        icon: <FileText size={16} />, \n        color: 'text-blue-600',\n        nextStep: 'Complete scope definition and work breakdown structure'\n      };\n      case 'active': return { \n        name: 'Executing', \n        icon: <Play size={16} />, \n        color: 'text-green-600',\n        nextStep: 'Monitor team performance and deliverable quality'\n      };\n      case 'completed': return { \n        name: 'Closed', \n        icon: <CheckCircle size={16} />, \n        color: 'text-gray-600',\n        nextStep: 'Archive project documents and capture lessons learned'\n      };\n      case 'on_hold': return { \n        name: 'On Hold', \n        icon: <Clock size={16} />, \n        color: 'text-yellow-600',\n        nextStep: 'Review hold reasons and develop resumption plan'\n      };\n      default: return { \n        name: 'Initiation', \n        icon: <Target size={16} />, \n        color: 'text-purple-600',\n        nextStep: 'Develop project charter and identify stakeholders'\n      };\n    }\n  };\n\n  // Calculate overall metrics for AI Insights section\n  const overallMetrics = {\n    totalPrograms: programs.length,\n    activePrograms: programs.filter(p => p.status === 'active' || p.status === 'planning').length,\n    criticalRisks: risks.filter(r => r.severity === 'critical' || r.severity === 'high').length,\n    overdueMilestones: milestones.filter(m => \n      m.dueDate && new Date(m.dueDate) < new Date() && m.status !== 'completed'\n    ).length\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <Header\n        title=\"Program Dashboard\"\n        subtitle=\"Overview of all active programs and initiatives\"\n        onNewClick={handleNewProgram}\n      />\n\n      <main className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\n        {/* Program Snapshot Section */}\n        <div className=\"mb-4\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <div>\n              <h2 className=\"text-lg font-semibold text-gray-900\">Program Snapshot</h2>\n              <p className=\"text-xs text-gray-600\">Overview of all programs across platforms and initiatives</p>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <select className=\"text-xs border border-gray-300 rounded-md px-2 py-1 bg-white\">\n                <option>All Platforms</option>\n                <option>Platform A</option>\n                <option>Platform B</option>\n                <option>Platform C</option>\n              </select>\n              <select className=\"text-xs border border-gray-300 rounded-md px-2 py-1 bg-white\">\n                <option>All Initiatives</option>\n                <option>Digital Transformation</option>\n                <option>Cloud Migration</option>\n                <option>Customer Experience</option>\n              </select>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-2 mb-3\">\n            <MetricsCard\n              title=\"Active Programs\"\n              value={activePendingPrograms.length}\n              change={`${programs.length} total`}\n              changeType=\"neutral\"\n              icon={ChartGantt}\n              iconColor=\"bg-green-100\"\n              navigateTo=\"/programs?filter=active\"\n            />\n            <MetricsCard\n              title=\"Programs on Hold\"\n              value={onHoldPrograms.length}\n              change=\"currently paused\"\n              changeType=\"neutral\"\n              icon={AlertTriangle}\n              iconColor=\"bg-yellow-100\"\n              navigateTo=\"/programs?filter=on_hold\"\n            />\n            <MetricsCard\n              title=\"All Risks\"\n              value={risks.length}\n              change=\"across programs\"\n              changeType=\"neutral\"\n              icon={AlertTriangle}\n              iconColor=\"bg-red-100\"\n              navigateTo=\"/risk-management\"\n            />\n            <MetricsCard\n              title=\"Dependencies\"\n              value={dependencies.length}\n              change=\"cross-program\"\n              changeType=\"neutral\"\n              icon={GitBranch}\n              iconColor=\"bg-purple-100\"\n              navigateTo=\"/dependencies\"\n            />\n            <Button \n              variant=\"outline\" \n              onClick={() => setLocation(\"/programs\")}\n              className=\"h-10 flex flex-col items-center justify-center gap-0.5 border-blue-200 text-blue-700 hover:bg-blue-50 text-xs px-2\"\n            >\n              <Eye className=\"h-3 w-3\" />\n              <span>View All</span>\n            </Button>\n            <Button \n              onClick={handleNewProgram}\n              className=\"h-10 flex flex-col items-center justify-center gap-0.5 bg-primary-600 text-white hover:bg-primary-700 text-xs px-2\"\n            >\n              <Plus className=\"h-3 w-3\" />\n              <span>New</span>\n            </Button>\n          </div>\n        </div>\n\n        {/* Recently Visited Programs Section */}\n        <div className=\"mb-8\" id=\"active-programs\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900\">Recent Programs</h2>\n              <p className=\"text-sm text-gray-600\">Recently updated programs</p>\n            </div>\n          </div>\n\n          {programsLoading ? (\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {Array.from({ length: 2 }).map((_, i) => (\n                <Card key={i} className=\"border border-gray-200\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"animate-pulse space-y-4\">\n                      <div className=\"h-6 bg-gray-200 rounded w-3/4\"></div>\n                      <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n                      <div className=\"grid grid-cols-4 gap-4\">\n                        <div className=\"h-12 bg-gray-200 rounded\"></div>\n                        <div className=\"h-12 bg-gray-200 rounded\"></div>\n                        <div className=\"h-12 bg-gray-200 rounded\"></div>\n                        <div className=\"h-12 bg-gray-200 rounded\"></div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : programs.length === 0 ? (\n            <Card className=\"border border-gray-200\">\n              <CardContent className=\"p-12 text-center\">\n                <ChartGantt size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No programs found</h3>\n                <p className=\"text-gray-500 mb-4\">Create your first program to start tracking progress and managing initiatives.</p>\n                <Button onClick={handleNewProgram} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                  Create First Program\n                </Button>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"max-h-96 overflow-y-auto space-y-4 custom-scrollbar\">\n              {programs\n                .sort((a, b) => new Date(b.updatedAt || b.createdAt || 0).getTime() - new Date(a.updatedAt || a.createdAt || 0).getTime())\n                .map((program) => {\n                const programRisks = getProgramRisks(program.id);\n                const programMilestones = getProgramMilestones(program.id);\n                const programAdopters = getProgramAdopters(program.id);\n                const programDependencies = getProgramDependencies(program.id);\n                \n                const criticalRisks = programRisks.filter(r => r.severity === 'critical' || r.severity === 'high');\n                const overdueMilestones = programMilestones.filter(m => \n                  m.dueDate && new Date(m.dueDate) < new Date() && m.status !== 'completed'\n                );\n                const blockedDependencies = programDependencies.filter(d => d.status === 'blocked');\n\n                // Calculate missing components for health scoring - MUST MATCH PROGRAM DETAILS EXACTLY\n                const getMissingComponents = () => {\n                  const missing = [];\n                  if (!program.description || program.description.trim().length < 10) missing.push('Description');\n                  if (!program.ownerId) missing.push('Owner');\n                  if (!program.startDate) missing.push('Start Date');\n                  if (!program.endDate) missing.push('End Date');\n                  if (!program.objectives || (Array.isArray(program.objectives) && !program.objectives.length)) missing.push('Objectives');\n                  if (!program.kpis || (Array.isArray(program.kpis) && !program.kpis.length)) missing.push('KPIs');\n                  if (programRisks.length === 0) missing.push('Risks');\n                  if (programMilestones.length === 0) missing.push('Milestones');\n                  if (programAdopters.length === 0) missing.push('Adopter Teams');\n                  return missing;\n                };\n\n                const missingComponents = getMissingComponents();\n\n                // Calculate program health using centralized utility\n                const healthMetrics = calculateProgramHealth({\n                  risks: programRisks,\n                  milestones: programMilestones,\n                  dependencies: programDependencies,\n                  missingComponents: missingComponents.length\n                });\n\n                const healthBadge = getHealthBadge(healthMetrics.score);\n\n                return (\n                  <Card key={program.id} className=\"border border-gray-200 hover:border-primary-300 transition-colors\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start justify-between mb-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-3 mb-2\">\n                            {getStatusIcon(program.status || 'active')}\n                            <h3 className=\"text-lg font-semibold text-gray-900\">{program.name}</h3>\n                            <Badge className={getStatusColor(program.status || 'active')}>\n                              {program.status?.replace('_', ' ') || 'active'}\n                            </Badge>\n                          </div>\n                          <p className=\"text-sm text-gray-600 mb-3\">{program.description}</p>\n                          <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                            <span>Owner: {program.ownerId || 'Unassigned'}</span>\n                            {program.startDate && (\n                              <span>Started: {new Date(program.startDate).toLocaleDateString()}</span>\n                            )}\n                            {program.endDate && (\n                              <span>Due: {new Date(program.endDate).toLocaleDateString()}</span>\n                            )}\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"text-xs text-gray-500 mb-1\">Program Health</div>\n                          <Badge className={healthBadge.color}>\n                            {healthBadge.label} ({healthMetrics.score}%)\n                          </Badge>\n                          <div className=\"mt-2\">\n                            <div className=\"text-xs text-gray-500 mb-1\">Current Phase</div>\n                            <div className={`text-xs font-medium ${getProgramPhase(program).color}`}>\n                              {getProgramPhase(program).name}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n\n                      {/* Program Components Summary */}\n                      <div className=\"grid grid-cols-4 gap-4 mb-4\">\n                        <button\n                          className=\"text-center p-2 rounded hover:bg-gray-50 transition-colors\"\n                          onClick={() => setLocation(`/risk-management?programId=${program.id}`)}\n                        >\n                          <div className=\"flex items-center justify-center mb-1\">\n                            <AlertTriangle className=\"h-4 w-4 text-red-500 mr-1\" />\n                            <span className=\"text-lg font-semibold text-gray-900\">{programRisks.length}</span>\n                          </div>\n                          <div className=\"text-xs text-gray-500\">Total Risks</div>\n                          {criticalRisks.length > 0 && (\n                            <div className=\"text-xs text-red-600 font-medium\">\n                              {criticalRisks.length} critical\n                            </div>\n                          )}\n                        </button>\n\n                        <button\n                          className=\"text-center p-2 rounded hover:bg-gray-50 transition-colors\"\n                          onClick={() => setLocation(`/milestones?programId=${program.id}`)}\n                        >\n                          <div className=\"flex items-center justify-center mb-1\">\n                            <Flag className=\"h-4 w-4 text-yellow-500 mr-1\" />\n                            <span className=\"text-lg font-semibold text-gray-900\">{programMilestones.length}</span>\n                          </div>\n                          <div className=\"text-xs text-gray-500\">Milestones</div>\n                          {overdueMilestones.length > 0 && (\n                            <div className=\"text-xs text-red-600 font-medium\">{overdueMilestones.length} overdue</div>\n                          )}\n                        </button>\n\n                        <button\n                          className=\"text-center p-2 rounded hover:bg-gray-50 transition-colors\"\n                          onClick={() => setLocation(`/adopter-support?programId=${program.id}`)}\n                        >\n                          <div className=\"flex items-center justify-center mb-1\">\n                            <Users className=\"h-4 w-4 text-blue-500 mr-1\" />\n                            <span className=\"text-lg font-semibold text-gray-900\">{programAdopters.length}</span>\n                          </div>\n                          <div className=\"text-xs text-gray-500\">Adopters</div>\n                          {programAdopters.filter(a => a.status === 'blocked' || a.status === 'not_started').length > 0 && (\n                            <div className=\"text-xs text-red-600 font-medium\">\n                              {programAdopters.filter(a => a.status === 'blocked' || a.status === 'not_started').length} need help\n                            </div>\n                          )}\n                        </button>\n\n                        <button\n                          className=\"text-center p-2 rounded hover:bg-gray-50 transition-colors\"\n                          onClick={() => setLocation(`/dependencies?programId=${program.id}`)}\n                        >\n                          <div className=\"flex items-center justify-center mb-1\">\n                            <GitBranch className=\"h-4 w-4 text-purple-500 mr-1\" />\n                            <span className=\"text-lg font-semibold text-gray-900\">{programDependencies.length}</span>\n                          </div>\n                          <div className=\"text-xs text-gray-500\">Dependencies</div>\n                          {blockedDependencies.length > 0 && (\n                            <div className=\"text-xs text-red-600 font-medium\">{blockedDependencies.length} blocked</div>\n                          )}\n                        </button>\n                      </div>\n\n                      {/* PMI Phase Next Steps */}\n                      <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                        <div className=\"flex items-start gap-2\">\n                          {getProgramPhase(program).icon}\n                          <div>\n                            <h4 className=\"text-sm font-medium text-blue-800 mb-1\">Next PMI Step</h4>\n                            <p className=\"text-xs text-blue-700\">\n                              {getProgramPhase(program).nextStep}\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Missing Components Alert */}\n                      {missingComponents.length > 0 && (\n                        <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n                          <div className=\"flex items-start gap-2\">\n                            <AlertTriangle className=\"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0\" />\n                            <div>\n                              <h4 className=\"text-sm font-medium text-red-800 mb-1\">Missing Components</h4>\n                              <p className=\"text-xs text-red-700\">\n                                This program is missing essential components: {missingComponents.join(', ')}\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Quick Actions */}\n                      <div className=\"flex items-center justify-end pt-4 border-t border-gray-100\">\n                        <Button \n                          size=\"sm\" \n                          variant=\"ghost\" \n                          onClick={() => setLocation(`/programs/${program.id}`)}\n                          className=\"text-primary-600 hover:text-primary-700\"\n                        >\n                          <Eye className=\"h-3 w-3 mr-1\" />\n                          View Details\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                );\n              })}\n            </div>\n          )}\n        </div>\n\n        {/* Other Programs Summary */}\n        {(completedPrograms.length > 0 || onHoldPrograms.length > 0) && (\n          <div className=\"mb-8\">\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Other Programs</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {completedPrograms.length > 0 && (\n                <Card className=\"border border-gray-200\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2 text-gray-700\">\n                      <CheckCircle className=\"h-5 w-5 text-green-600\" />\n                      Completed Programs ({completedPrograms.length})\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      {completedPrograms.slice(0, 3).map(program => (\n                        <div key={program.id} className=\"flex items-center justify-between py-2\">\n                          <span className=\"text-sm text-gray-700\">{program.name}</span>\n                          <Badge className=\"bg-green-100 text-green-800\">Completed</Badge>\n                        </div>\n                      ))}\n                      {completedPrograms.length > 3 && (\n                        <p className=\"text-xs text-gray-500 text-center py-2\">\n                          {completedPrograms.length - 3} more completed programs\n                        </p>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n\n              {onHoldPrograms.length > 0 && (\n                <Card className=\"border border-gray-200\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2 text-gray-700\">\n                      <AlertTriangle className=\"h-5 w-5 text-yellow-600\" />\n                      On Hold Programs ({onHoldPrograms.length})\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      {onHoldPrograms.slice(0, 3).map(program => (\n                        <div key={program.id} className=\"flex items-center justify-between py-2\">\n                          <span className=\"text-sm text-gray-700\">{program.name}</span>\n                          <Badge className=\"bg-yellow-100 text-yellow-800\">On Hold</Badge>\n                        </div>\n                      ))}\n                      {onHoldPrograms.length > 3 && (\n                        <p className=\"text-xs text-gray-500 text-center py-2\">\n                          {onHoldPrograms.length - 3} more on hold programs\n                        </p>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          </div>\n        )}\n\n\n\n        {/* AI Insights Section */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900\">AI Insights & Recommendations</h2>\n              <p className=\"text-sm text-gray-600\">AI-powered analysis and prioritized actions</p>\n            </div>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {/* Today's Priorities */}\n            <Card className=\"border border-gray-200 cursor-pointer hover:border-blue-300 transition-colors\" onClick={() => setShowPrioritiesModal(true)}>\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-sm font-medium text-gray-700\">Today's Priorities</h3>\n                  <Calendar className=\"h-5 w-5 text-blue-500\" />\n                </div>\n                <div className=\"text-3xl font-bold text-blue-600 mb-1\">\n                  {overallMetrics.overdueMilestones + overallMetrics.criticalRisks}\n                </div>\n                <div className=\"text-sm text-gray-500\">Critical items</div>\n              </CardContent>\n            </Card>\n\n            {/* Risk Alerts */}\n            <Card className=\"border border-gray-200 cursor-pointer hover:border-red-300 transition-colors\" onClick={() => setLocation(\"/risk-management\")}>\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-sm font-medium text-gray-700\">Risk Alerts</h3>\n                  <AlertTriangle className=\"h-5 w-5 text-red-500\" />\n                </div>\n                <div className=\"text-3xl font-bold text-red-600 mb-1\">{overallMetrics.criticalRisks}</div>\n                <div className=\"text-sm text-gray-500\">Critical risks</div>\n              </CardContent>\n            </Card>\n\n            {/* AI Recommendations */}\n            <Card className=\"border border-gray-200 cursor-pointer hover:border-yellow-300 transition-colors\" onClick={() => setShowAIRecommendationsModal(true)}>\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-sm font-medium text-gray-700\">PMI Suggestions</h3>\n                  <div className=\"w-5 h-5 rounded-full bg-yellow-100 flex items-center justify-center\">\n                    <div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n                  </div>\n                </div>\n                <div className=\"text-3xl font-bold text-yellow-600 mb-1\">\n                  {Math.max(3, Math.floor(overallMetrics.totalPrograms * 0.5))}\n                </div>\n                <div className=\"text-sm text-gray-500\">PMI Recommendations</div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n\n        {/* Quick Navigation to Components */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <Button \n            variant=\"outline\" \n            onClick={() => setLocation(\"/risk-management\")}\n            className=\"h-16 flex flex-col items-center justify-center gap-2 border-red-200 text-red-700 hover:bg-red-50\"\n          >\n            <AlertTriangle className=\"h-5 w-5\" />\n            <span className=\"text-sm\">All Risks</span>\n          </Button>\n          \n          <Button \n            variant=\"outline\" \n            onClick={() => setLocation(\"/milestones\")}\n            className=\"h-16 flex flex-col items-center justify-center gap-2 border-yellow-200 text-yellow-700 hover:bg-yellow-50\"\n          >\n            <Flag className=\"h-5 w-5\" />\n            <span className=\"text-sm\">All Milestones</span>\n          </Button>\n          \n          <Button \n            variant=\"outline\" \n            onClick={() => setLocation(\"/dependencies\")}\n            className=\"h-16 flex flex-col items-center justify-center gap-2 border-purple-200 text-purple-700 hover:bg-purple-50\"\n          >\n            <GitBranch className=\"h-5 w-5\" />\n            <span className=\"text-sm\">Dependencies</span>\n          </Button>\n        </div>\n      </main>\n\n      {/* Missing Components Modal */}\n      {showMissingComponentsModal && selectedProgram && analysisData && (\n        <MissingComponentsModal\n          open={showMissingComponentsModal}\n          onClose={() => setShowMissingComponentsModal(false)}\n          program={selectedProgram}\n          analysis={analysisData}\n        />\n      )}\n\n      {/* New Program Modal */}\n      <Dialog open={showNewProgramModal} onOpenChange={setShowNewProgramModal}>\n        <DialogContent className=\"sm:max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Create New Program</DialogTitle>\n          </DialogHeader>\n          <form onSubmit={handleCreateProgram} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"name\">Program Name</Label>\n              <Input\n                id=\"name\"\n                value={newProgramForm.name}\n                onChange={(e) => setNewProgramForm(prev => ({ ...prev, name: e.target.value }))}\n                placeholder=\"Enter program name\"\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"description\">Description</Label>\n              <Textarea\n                id=\"description\"\n                value={newProgramForm.description}\n                onChange={(e) => setNewProgramForm(prev => ({ ...prev, description: e.target.value }))}\n                placeholder=\"Enter program description\"\n                rows={3}\n              />\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"platform\">Platform</Label>\n                <Select value={newProgramForm.platform} onValueChange={(value) => setNewProgramForm(prev => ({ ...prev, platform: value }))}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select platform\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"\">All Platforms</SelectItem>\n                    <SelectItem value=\"Platform A\">Platform A</SelectItem>\n                    <SelectItem value=\"Platform B\">Platform B</SelectItem>\n                    <SelectItem value=\"Platform C\">Platform C</SelectItem>\n                    <SelectItem value=\"Platform D\">Platform D</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label htmlFor=\"initiative\">Initiative</Label>\n                <Select value={newProgramForm.initiative} onValueChange={(value) => setNewProgramForm(prev => ({ ...prev, initiative: value }))}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select initiative\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"\">All Initiatives</SelectItem>\n                    <SelectItem value=\"Digital Transformation\">Digital Transformation</SelectItem>\n                    <SelectItem value=\"Cloud Migration\">Cloud Migration</SelectItem>\n                    <SelectItem value=\"Customer Experience\">Customer Experience</SelectItem>\n                    <SelectItem value=\"AI/ML Integration\">AI/ML Integration</SelectItem>\n                    <SelectItem value=\"Security Enhancement\">Security Enhancement</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n            <div className=\"flex justify-end gap-3\">\n              <Button type=\"button\" variant=\"outline\" onClick={() => setShowNewProgramModal(false)}>\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={createProgramMutation.isPending}>\n                {createProgramMutation.isPending ? \"Creating...\" : \"Create Program\"}\n              </Button>\n            </div>\n          </form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Today's Priorities Modal */}\n      <Dialog open={showPrioritiesModal} onOpenChange={setShowPrioritiesModal}>\n        <DialogContent className=\"sm:max-w-2xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Calendar className=\"h-5 w-5 text-blue-500\" />\n              Today's Priorities\n            </DialogTitle>\n            <p className=\"text-sm text-gray-600\">Critical items requiring immediate attention based on program health analysis</p>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            {generateTodaysPriorities().map((priority, index) => (\n              <Card key={index} className=\"border border-gray-200\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      {priority.type === 'risk' && <AlertTriangle className=\"h-4 w-4 text-red-500\" />}\n                      {priority.type === 'milestone' && <Clock className=\"h-4 w-4 text-orange-500\" />}\n                      {priority.type === 'completeness' && <CheckCircle className=\"h-4 w-4 text-blue-500\" />}\n                      <h4 className=\"font-medium text-gray-900\">{priority.title}</h4>\n                    </div>\n                    <Badge className={\n                      priority.urgency === 'critical' ? 'bg-red-100 text-red-800' :\n                      priority.urgency === 'high' ? 'bg-orange-100 text-orange-800' :\n                      'bg-yellow-100 text-yellow-800'\n                    }>\n                      {priority.urgency}\n                    </Badge>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-2\">{priority.description}</p>\n                  <div className=\"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded\">\n                    Action: {priority.action}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n            {generateTodaysPriorities().length === 0 && (\n              <div className=\"text-center py-8 text-gray-500\">\n                <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-3\" />\n                <p>No critical priorities at this time. All programs are on track!</p>\n              </div>\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* PMI Recommendations Modal */}\n      <Dialog open={showAIRecommendationsModal} onOpenChange={setShowAIRecommendationsModal}>\n        <DialogContent className=\"sm:max-w-3xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <div className=\"w-5 h-5 rounded-full bg-yellow-100 flex items-center justify-center\">\n                <div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n              </div>\n              PMI-Based Recommendations\n            </DialogTitle>\n            <p className=\"text-sm text-gray-600\">Suggestions based on Project Management Institute (PMI) best practices to improve program health</p>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            {generatePMIRecommendations().map((rec, index) => (\n              <Card key={index} className=\"border border-gray-200\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center\">\n                        <span className=\"text-xs font-medium text-blue-600\">{rec.category.charAt(0)}</span>\n                      </div>\n                      <div>\n                        <h4 className=\"font-medium text-gray-900\">{rec.title}</h4>\n                        <span className=\"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded\">{rec.category} Process</span>\n                      </div>\n                    </div>\n                    <Badge className={\n                      rec.priority === 'critical' ? 'bg-red-100 text-red-800' :\n                      rec.priority === 'high' ? 'bg-orange-100 text-orange-800' :\n                      rec.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-green-100 text-green-800'\n                    }>\n                      {rec.priority}\n                    </Badge>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-2\">{rec.description}</p>\n                  <div className=\"text-xs text-gray-500 italic\">\n                    PMI Reference: {rec.pmiReference}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n            {generatePMIRecommendations().length === 0 && (\n              <div className=\"text-center py-8 text-gray-500\">\n                <Target className=\"h-12 w-12 text-green-500 mx-auto mb-3\" />\n                <p>All programs are following PMI best practices!</p>\n              </div>\n            )}\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":57394},"client/src/pages/Dependencies.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ComponentContextCard } from \"@/components/layout/ComponentContextCard\";\nimport { ComponentAnalytics } from \"@/components/layout/ComponentAnalytics\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { GitBranch, Plus, Filter, Eye, AlertTriangle, Clock, CheckCircle, XCircle } from \"lucide-react\";\nimport { useMode } from \"@/hooks/useMode\";\nimport type { Dependency, Program } from \"@shared/schema\";\n\nexport default function Dependencies() {\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const [filterType, setFilterType] = useState(\"all\");\n  const [selectedDependency, setSelectedDependency] = useState<Dependency | null>(null);\n  const [contextData, setContextData] = useState<any>(null);\n  const [showContextModal, setShowContextModal] = useState(false);\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    programId: \"\",\n    type: \"internal\",\n    status: \"open\",\n    priority: \"medium\",\n    ownerTeam: \"\",\n    dependentTeam: \"\",\n    dueDate: \"\",\n    resolution: \"\",\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { isTestMode } = useMode();\n  const [, setLocation] = useLocation();\n\n  const { data: dependencies = [], isLoading } = useQuery<Dependency[]>({\n    queryKey: [\"/api/dependencies\"],\n  });\n\n  const { data: programs = [] } = useQuery<Program[]>({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const createDependencyMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"/api/dependencies\", \"POST\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Dependency created successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/dependencies\"] });\n      setShowCreateModal(false);\n      resetForm();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create dependency\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const fetchContextMutation = useMutation({\n    mutationFn: async (dependencyId: string) => {\n      return await apiRequest(`/api/dependencies/${dependencyId}/context`, \"GET\");\n    },\n    onSuccess: (data: any) => {\n      setContextData(data);\n      setShowContextModal(true);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load dependency context\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      title: \"\",\n      description: \"\",\n      programId: \"\",\n      type: \"internal\",\n      status: \"open\",\n      priority: \"medium\",\n      ownerTeam: \"\",\n      dependentTeam: \"\",\n      dueDate: \"\",\n      resolution: \"\",\n    });\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    createDependencyMutation.mutate(formData);\n  };\n\n  const handleNewDependency = () => {\n    setShowCreateModal(true);\n  };\n\n  const handleViewDependencyContext = (dependency: Dependency) => {\n    setSelectedDependency(dependency);\n    fetchContextMutation.mutate(dependency.id);\n  };\n\n  const handleViewComponent = (type: string, programId?: string) => {\n    switch (type) {\n      case 'milestones':\n        setLocation(`/milestones${programId ? `?programId=${programId}` : ''}`);\n        break;\n      case 'risks':\n        setLocation(`/risk-management${programId ? `?programId=${programId}` : ''}`);\n        break;\n      case 'adopters':\n        setLocation(`/adopter-support${programId ? `?programId=${programId}` : ''}`);\n        break;\n      case 'programs':\n        setLocation(`/programs`);\n        break;\n      case 'projects':\n        setLocation(`/program-planning${programId ? `?programId=${programId}` : ''}`);\n        break;\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case \"resolved\": return \"bg-green-100 text-green-800\";\n      case \"in_progress\": return \"bg-yellow-100 text-yellow-800\";\n      case \"blocked\": return \"bg-red-100 text-red-800\";\n      case \"open\": return \"bg-blue-100 text-blue-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority?.toLowerCase()) {\n      case \"high\": return \"bg-red-100 text-red-800\";\n      case \"medium\": return \"bg-yellow-100 text-yellow-800\";\n      case \"low\": return \"bg-green-100 text-green-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case \"resolved\": return <CheckCircle size={16} className=\"text-green-600\" />;\n      case \"blocked\": return <XCircle size={16} className=\"text-red-600\" />;\n      case \"in_progress\": return <Clock size={16} className=\"text-yellow-600\" />;\n      default: return <GitBranch size={16} className=\"text-blue-600\" />;\n    }\n  };\n\n  const filteredDependencies = dependencies.filter((dep: any) => {\n    const statusMatch = filterStatus === \"all\" || dep.status === filterStatus;\n    const typeMatch = filterType === \"all\" || dep.type === filterType;\n    return statusMatch && typeMatch;\n  });\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <Header\n        title=\"Dependencies\"\n        subtitle=\"Track cross-team dependencies and unblock critical paths\"\n        onNewClick={handleNewDependency}\n        newButtonText=\"Add Dependency\"\n      />\n\n      <main className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\n        <Tabs defaultValue=\"dependencies\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"dependencies\">Dependency Registry</TabsTrigger>\n            <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"dependencies\" className=\"space-y-6\">\n            {/* Filters */}\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <Filter size={16} className=\"text-gray-500\" />\n                <Label className=\"text-sm font-medium\">Status:</Label>\n                <Select value={filterStatus} onValueChange={setFilterStatus}>\n                  <SelectTrigger className=\"w-32\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All</SelectItem>\n                    <SelectItem value=\"open\">Open</SelectItem>\n                    <SelectItem value=\"in_progress\">In Progress</SelectItem>\n                    <SelectItem value=\"resolved\">Resolved</SelectItem>\n                    <SelectItem value=\"blocked\">Blocked</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <Label className=\"text-sm font-medium\">Type:</Label>\n                <Select value={filterType} onValueChange={setFilterType}>\n                  <SelectTrigger className=\"w-32\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All</SelectItem>\n                    <SelectItem value=\"internal\">Internal</SelectItem>\n                    <SelectItem value=\"external\">External</SelectItem>\n                    <SelectItem value=\"vendor\">Vendor</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            {/* Dependencies Table */}\n            <Card className=\"border border-gray-200\">\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle>Dependency Registry</CardTitle>\n                  <Button size=\"sm\" onClick={handleNewDependency} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                    <Plus size={14} className=\"mr-1\" />\n                    New Dependency\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                {isLoading ? (\n                  <div className=\"p-12\">\n                    <div className=\"space-y-4\">\n                      {Array.from({ length: 5 }).map((_, i) => (\n                        <div key={i} className=\"h-16 bg-gray-200 rounded animate-pulse\"></div>\n                      ))}\n                    </div>\n                  </div>\n                ) : filteredDependencies.length === 0 ? (\n                  <div className=\"p-12 text-center\">\n                    <GitBranch size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No dependencies found</h3>\n                    <div className=\"text-gray-500 mb-4\">\n                      {filterStatus === \"all\" && filterType === \"all\"\n                        ? programs.length > 0 \n                          ? (\n                            <div>\n                              <p className=\"mb-3\">The following programs are missing dependency tracking:</p>\n                              <ul className=\"space-y-2 mb-4\">\n                                {programs.map(program => (\n                                  <li key={program.id} className=\"flex items-center gap-2 text-sm bg-blue-50 px-3 py-2 rounded border-l-4 border-blue-400\">\n                                    <div className=\"w-2 h-2 bg-blue-400 rounded-full\"></div>\n                                    <span className=\"font-medium\">Program \"</span>\n                                    <button \n                                      className=\"font-medium text-primary-600 hover:text-primary-700 hover:underline\"\n                                      onClick={() => setLocation(`/program-planning?id=${program.id}`)}\n                                    >\n                                      {program.name}\n                                    </button>\n                                    <span className=\"font-medium\">\"</span>\n                                    <span className=\"text-gray-600\">has no dependencies documented</span>\n                                  </li>\n                                ))}\n                              </ul>\n                              <p>Get started by documenting cross-team dependencies to prevent blockers.</p>\n                            </div>\n                          )\n                          : <p>Start by documenting cross-team dependencies.</p>\n                        : <p>No dependencies match the selected filters.</p>\n                      }\n                    </div>\n                    <Button onClick={handleNewDependency} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                      <Plus size={16} className=\"mr-2\" />\n                      Create Dependency\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"w-full\">\n                      <thead className=\"bg-gray-50\">\n                        <tr>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Dependency\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Program\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Type\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Status\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Priority\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Due Date\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Actions\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {filteredDependencies.map((dependency: any) => {\n                          const program = programs.find(p => p.id === dependency.programId);\n                          return (\n                            <tr key={dependency.id}>\n                              <td className=\"px-6 py-4\">\n                                <div>\n                                  <div className=\"text-sm font-medium text-gray-900 flex items-center gap-2\">\n                                    {getStatusIcon(dependency.status)}\n                                    {dependency.title}\n                                  </div>\n                                  <div className=\"text-sm text-gray-500 max-w-xs truncate\">\n                                    {dependency.description}\n                                  </div>\n                                </div>\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                                <Badge variant=\"outline\" className=\"text-xs\">\n                                  {program?.name || \"N/A\"}\n                                </Badge>\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap\">\n                                <Badge variant=\"outline\" className=\"capitalize\">\n                                  {dependency.type || \"internal\"}\n                                </Badge>\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap\">\n                                <Badge className={`${getStatusColor(dependency.status)} font-semibold capitalize`}>\n                                  {dependency.status?.replace(\"_\", \" \") || \"open\"}\n                                </Badge>\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap\">\n                                <Badge className={`${getPriorityColor(dependency.priority)} font-semibold capitalize`}>\n                                  {dependency.priority || \"medium\"}\n                                </Badge>\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                                {dependency.dueDate ? new Date(dependency.dueDate).toLocaleDateString() : \"Not set\"}\n                              </td>\n                              <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                                <Button variant=\"ghost\" size=\"sm\" onClick={() => handleViewDependencyContext(dependency)} className=\"text-blue-600 hover:text-blue-800\">\n                                  <Eye size={14} className=\"mr-1\" />\n                                  View Context\n                                </Button>\n                              </td>\n                            </tr>\n                          );\n                        })}\n                      </tbody>\n                    </table>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"analytics\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardHeader className=\"pb-2\">\n                  <CardTitle className=\"text-sm text-gray-600\">Total Dependencies</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold\">{dependencies.length}</div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader className=\"pb-2\">\n                  <CardTitle className=\"text-sm text-gray-600\">Blocked</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold text-red-600\">\n                    {dependencies.filter((d: any) => d.status === 'blocked').length}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader className=\"pb-2\">\n                  <CardTitle className=\"text-sm text-gray-600\">Resolved</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold text-green-600\">\n                    {dependencies.filter((d: any) => d.status === 'resolved').length}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </main>\n\n      {/* Create Dependency Modal */}\n      <Dialog open={showCreateModal} onOpenChange={setShowCreateModal}>\n        <DialogContent className=\"max-w-3xl\">\n          <DialogHeader>\n            <DialogTitle>Create New Dependency</DialogTitle>\n          </DialogHeader>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"title\">Dependency Title</Label>\n              <Input\n                id=\"title\"\n                value={formData.title}\n                onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\n                placeholder=\"Describe the dependency clearly\"\n                required\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"description\">Description</Label>\n              <Textarea\n                id=\"description\"\n                value={formData.description}\n                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                placeholder=\"Provide detailed description of the dependency\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"programId\">Program</Label>\n                <Select value={formData.programId} onValueChange={(value) => setFormData(prev => ({ ...prev, programId: value }))}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select program\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {programs.map((program: Program) => (\n                      <SelectItem key={program.id} value={program.id}>\n                        {program.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"type\">Type</Label>\n                <Select value={formData.type} onValueChange={(value) => setFormData(prev => ({ ...prev, type: value }))}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"internal\">Internal</SelectItem>\n                    <SelectItem value=\"external\">External</SelectItem>\n                    <SelectItem value=\"vendor\">Vendor</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div>\n                <Label htmlFor=\"status\">Status</Label>\n                <Select value={formData.status} onValueChange={(value) => setFormData(prev => ({ ...prev, status: value }))}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"open\">Open</SelectItem>\n                    <SelectItem value=\"in_progress\">In Progress</SelectItem>\n                    <SelectItem value=\"resolved\">Resolved</SelectItem>\n                    <SelectItem value=\"blocked\">Blocked</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"priority\">Priority</Label>\n                <Select value={formData.priority} onValueChange={(value) => setFormData(prev => ({ ...prev, priority: value }))}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"low\">Low</SelectItem>\n                    <SelectItem value=\"medium\">Medium</SelectItem>\n                    <SelectItem value=\"high\">High</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"dueDate\">Due Date</Label>\n                <Input\n                  id=\"dueDate\"\n                  type=\"date\"\n                  value={formData.dueDate}\n                  onChange={(e) => setFormData(prev => ({ ...prev, dueDate: e.target.value }))}\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"ownerTeam\">Owner Team</Label>\n                <Input\n                  id=\"ownerTeam\"\n                  value={formData.ownerTeam}\n                  onChange={(e) => setFormData(prev => ({ ...prev, ownerTeam: e.target.value }))}\n                  placeholder=\"Team responsible for resolving\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"dependentTeam\">Dependent Team</Label>\n                <Input\n                  id=\"dependentTeam\"\n                  value={formData.dependentTeam}\n                  onChange={(e) => setFormData(prev => ({ ...prev, dependentTeam: e.target.value }))}\n                  placeholder=\"Team waiting on this dependency\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <Label htmlFor=\"resolution\">Resolution Plan</Label>\n              <Textarea\n                id=\"resolution\"\n                value={formData.resolution}\n                onChange={(e) => setFormData(prev => ({ ...prev, resolution: e.target.value }))}\n                placeholder=\"Describe the plan to resolve this dependency\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-3\">\n              <Button type=\"button\" variant=\"outline\" onClick={() => setShowCreateModal(false)}>\n                Cancel\n              </Button>\n              <Button type=\"submit\" className=\"bg-primary-500 text-white hover:bg-primary-600\" disabled={createDependencyMutation.isPending}>\n                {createDependencyMutation.isPending ? \"Creating...\" : \"Create Dependency\"}\n              </Button>\n            </div>\n          </form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Dependency Context Modal */}\n      <Dialog open={showContextModal} onOpenChange={setShowContextModal}>\n        <DialogContent className=\"max-w-6xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <GitBranch className=\"text-blue-600\" size={20} />\n              Dependency Context: {selectedDependency?.title}\n            </DialogTitle>\n          </DialogHeader>\n\n          {contextData && (\n            <div className=\"space-y-6\">\n              <ComponentContextCard \n                title=\"Related Milestones\"\n                items={contextData.relatedComponents.milestones || []}\n                type=\"milestones\"\n                onViewAll={() => handleViewComponent('milestones', contextData.program?.id)}\n              />\n              \n              <ComponentContextCard \n                title=\"Related Risks\"\n                items={contextData.relatedComponents.risks || []}\n                type=\"risks\"\n                onViewAll={() => handleViewComponent('risks', contextData.program?.id)}\n              />\n              \n              <ComponentContextCard \n                title=\"Related Adopters\"\n                items={contextData.relatedComponents.adopters || []}\n                type=\"adopters\"\n                onViewAll={() => handleViewComponent('adopters', contextData.program?.id)}\n              />\n            </div>\n          )}\n\n          {fetchContextMutation.isPending && (\n            <div className=\"flex items-center justify-center py-8\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500\"></div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":26048},"client/src/pages/Escalations.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { EscalationModal } from \"@/components/modals/EscalationModal\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  TrendingUp, \n  Plus, \n  Filter, \n  Clock, \n  CheckCircle, \n  AlertCircle,\n  MessageSquare,\n  Mail,\n  FileText,\n  ExternalLink\n} from \"lucide-react\";\n\nexport default function Escalations() {\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const [filterUrgency, setFilterUrgency] = useState(\"all\");\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: escalations = [], isLoading } = useQuery({\n    queryKey: [\"/api/escalations\"],\n  });\n\n  const updateEscalationMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      return await apiRequest(\"PUT\", `/api/escalations/${id}`, { status });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/escalations\"] });\n      toast({\n        title: \"Success\",\n        description: \"Escalation status updated\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update escalation\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const getUrgencyColor = (urgency: string) => {\n    switch (urgency?.toLowerCase()) {\n      case \"critical\": return \"bg-red-100 text-red-800\";\n      case \"high\": return \"bg-orange-100 text-orange-800\";\n      case \"medium\": return \"bg-yellow-100 text-yellow-800\";\n      case \"low\": return \"bg-green-100 text-green-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case \"resolved\": \n      case \"closed\": return \"bg-green-100 text-green-800\";\n      case \"in_progress\": return \"bg-blue-100 text-blue-800\";\n      case \"open\": return \"bg-yellow-100 text-yellow-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case \"resolved\":\n      case \"closed\": return CheckCircle;\n      case \"in_progress\": return Clock;\n      case \"open\": return AlertCircle;\n      default: return AlertCircle;\n    }\n  };\n\n  const filteredEscalations = escalations.filter((escalation: any) => {\n    const statusMatch = filterStatus === \"all\" || escalation.status === filterStatus;\n    const urgencyMatch = filterUrgency === \"all\" || escalation.urgency === filterUrgency;\n    return statusMatch && urgencyMatch;\n  });\n\n  const handleNewEscalation = () => {\n    setShowCreateModal(true);\n  };\n\n  const handleStatusChange = (escalationId: string, newStatus: string) => {\n    updateEscalationMutation.mutate({ id: escalationId, status: newStatus });\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  const getEscalationMetrics = () => {\n    const open = escalations.filter((e: any) => e.status === \"open\").length;\n    const inProgress = escalations.filter((e: any) => e.status === \"in_progress\").length;\n    const resolved = escalations.filter((e: any) => e.status === \"resolved\" || e.status === \"closed\").length;\n    const critical = escalations.filter((e: any) => e.urgency === \"critical\").length;\n    \n    return { open, inProgress, resolved, critical };\n  };\n\n  const metrics = getEscalationMetrics();\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <Header\n        title=\"Escalation Workflow\"\n        subtitle=\"Structured escalation management with multi-channel communication\"\n        onNewClick={handleNewEscalation}\n      />\n\n      <main className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\n        <Tabs defaultValue=\"dashboard\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"dashboard\">Dashboard</TabsTrigger>\n            <TabsTrigger value=\"escalations\">Escalations</TabsTrigger>\n            <TabsTrigger value=\"templates\">Templates</TabsTrigger>\n            <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"dashboard\" className=\"space-y-6\">\n            {/* Key Metrics */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Open</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{metrics.open}</p>\n                    </div>\n                    <AlertCircle className=\"text-yellow-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">In Progress</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{metrics.inProgress}</p>\n                    </div>\n                    <Clock className=\"text-blue-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Resolved</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{metrics.resolved}</p>\n                    </div>\n                    <CheckCircle className=\"text-green-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Critical</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{metrics.critical}</p>\n                    </div>\n                    <TrendingUp className=\"text-red-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Recent Escalations */}\n            <Card className=\"border border-gray-200\">\n              <CardHeader>\n                <CardTitle>Recent Escalations</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {escalations.slice(0, 5).map((escalation: any) => {\n                    const StatusIcon = getStatusIcon(escalation.status);\n                    return (\n                      <div key={escalation.id} className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg\">\n                        <div className=\"flex items-center gap-3\">\n                          <StatusIcon size={20} className={\n                            escalation.status === 'resolved' || escalation.status === 'closed' ? 'text-green-500' :\n                            escalation.status === 'in_progress' ? 'text-blue-500' : 'text-yellow-500'\n                          } />\n                          <div>\n                            <h4 className=\"font-medium text-gray-900\">{escalation.summary}</h4>\n                            <p className=\"text-sm text-gray-600\">\n                              Created {formatDate(escalation.createdAt)}\n                            </p>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Badge className={`${getUrgencyColor(escalation.urgency)} font-medium capitalize`}>\n                            {escalation.urgency}\n                          </Badge>\n                          <Badge className={`${getStatusColor(escalation.status)} font-medium capitalize`}>\n                            {escalation.status?.replace(\"_\", \" \")}\n                          </Badge>\n                        </div>\n                      </div>\n                    );\n                  })}\n                  {escalations.length === 0 && (\n                    <p className=\"text-center text-gray-500 py-8\">No escalations yet</p>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"escalations\" className=\"space-y-6\">\n            {/* Filters */}\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <Filter size={16} className=\"text-gray-500\" />\n                <Label className=\"text-sm font-medium\">Status:</Label>\n                <Select value={filterStatus} onValueChange={setFilterStatus}>\n                  <SelectTrigger className=\"w-32\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All</SelectItem>\n                    <SelectItem value=\"open\">Open</SelectItem>\n                    <SelectItem value=\"in_progress\">In Progress</SelectItem>\n                    <SelectItem value=\"resolved\">Resolved</SelectItem>\n                    <SelectItem value=\"closed\">Closed</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <Label className=\"text-sm font-medium\">Urgency:</Label>\n                <Select value={filterUrgency} onValueChange={setFilterUrgency}>\n                  <SelectTrigger className=\"w-32\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All</SelectItem>\n                    <SelectItem value=\"critical\">Critical</SelectItem>\n                    <SelectItem value=\"high\">High</SelectItem>\n                    <SelectItem value=\"medium\">Medium</SelectItem>\n                    <SelectItem value=\"low\">Low</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            {/* Escalations Table */}\n            <Card className=\"border border-gray-200\">\n              <CardHeader>\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle>Escalation Management</CardTitle>\n                  <Button size=\"sm\" onClick={handleNewEscalation} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                    <Plus size={14} className=\"mr-1\" />\n                    New Escalation\n                  </Button>\n                </div>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                {isLoading ? (\n                  <div className=\"p-6\">\n                    <div className=\"animate-pulse space-y-4\">\n                      {Array.from({ length: 5 }).map((_, i) => (\n                        <div key={i} className=\"h-16 bg-gray-200 rounded\"></div>\n                      ))}\n                    </div>\n                  </div>\n                ) : filteredEscalations.length === 0 ? (\n                  <div className=\"p-12 text-center\">\n                    <TrendingUp size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No escalations found</h3>\n                    <p className=\"text-gray-500 mb-4\">\n                      {filterStatus === \"all\" && filterUrgency === \"all\"\n                        ? \"Create an escalation to track and manage critical program issues.\"\n                        : \"No escalations match the selected filters.\"\n                      }\n                    </p>\n                    <Button onClick={handleNewEscalation} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                      <Plus size={16} className=\"mr-2\" />\n                      Create Escalation\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"w-full\">\n                      <thead className=\"bg-gray-50\">\n                        <tr>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Escalation\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Urgency\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Owner\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Channels\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Status\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Actions\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {filteredEscalations.map((escalation: any) => (\n                          <tr key={escalation.id}>\n                            <td className=\"px-6 py-4\">\n                              <div>\n                                <div className=\"text-sm font-medium text-gray-900\">{escalation.summary}</div>\n                                <div className=\"text-sm text-gray-500\">\n                                  {formatDate(escalation.createdAt)}\n                                </div>\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <Badge className={`${getUrgencyColor(escalation.urgency)} font-semibold capitalize`}>\n                                {escalation.urgency}\n                              </Badge>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                              {escalation.owner?.name || \"Unassigned\"}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <div className=\"flex gap-1\">\n                                {escalation.sendToSlack && (\n                                  <MessageSquare size={14} className=\"text-blue-500\" title=\"Slack\" />\n                                )}\n                                {escalation.sendToTeams && (\n                                  <MessageSquare size={14} className=\"text-purple-500\" title=\"Teams\" />\n                                )}\n                                {escalation.sendToEmail && (\n                                  <Mail size={14} className=\"text-green-500\" title=\"Email\" />\n                                )}\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <Select \n                                value={escalation.status} \n                                onValueChange={(value) => handleStatusChange(escalation.id, value)}\n                              >\n                                <SelectTrigger className=\"w-32\">\n                                  <SelectValue>\n                                    <Badge className={`${getStatusColor(escalation.status)} font-medium capitalize`}>\n                                      {escalation.status?.replace(\"_\", \" \")}\n                                    </Badge>\n                                  </SelectValue>\n                                </SelectTrigger>\n                                <SelectContent>\n                                  <SelectItem value=\"open\">Open</SelectItem>\n                                  <SelectItem value=\"in_progress\">In Progress</SelectItem>\n                                  <SelectItem value=\"resolved\">Resolved</SelectItem>\n                                  <SelectItem value=\"closed\">Closed</SelectItem>\n                                </SelectContent>\n                              </Select>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                              <div className=\"flex gap-2\">\n                                <Button variant=\"ghost\" size=\"sm\">Edit</Button>\n                                <Button variant=\"ghost\" size=\"sm\">\n                                  <ExternalLink size={14} />\n                                </Button>\n                              </div>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"templates\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Escalation Templates</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <div className=\"p-3 border border-gray-200 rounded-lg\">\n                      <h4 className=\"font-medium text-gray-900 mb-1\">Technical Issue Escalation</h4>\n                      <p className=\"text-sm text-gray-600 mb-2\">\n                        Template for technical problems affecting program delivery\n                      </p>\n                      <Button variant=\"outline\" size=\"sm\">Use Template</Button>\n                    </div>\n                    \n                    <div className=\"p-3 border border-gray-200 rounded-lg\">\n                      <h4 className=\"font-medium text-gray-900 mb-1\">Resource Constraint</h4>\n                      <p className=\"text-sm text-gray-600 mb-2\">\n                        Template for resource allocation and capacity issues\n                      </p>\n                      <Button variant=\"outline\" size=\"sm\">Use Template</Button>\n                    </div>\n                    \n                    <div className=\"p-3 border border-gray-200 rounded-lg\">\n                      <h4 className=\"font-medium text-gray-900 mb-1\">Timeline Delay</h4>\n                      <p className=\"text-sm text-gray-600 mb-2\">\n                        Template for milestone delays and schedule impacts\n                      </p>\n                      <Button variant=\"outline\" size=\"sm\">Use Template</Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Communication Channels</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2\">\n                        <MessageSquare className=\"text-blue-500\" size={16} />\n                        <span className=\"font-medium text-blue-700\">Slack Integration</span>\n                      </div>\n                      <Badge className=\"bg-green-100 text-green-800\">Connected</Badge>\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between p-3 bg-purple-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2\">\n                        <MessageSquare className=\"text-purple-500\" size={16} />\n                        <span className=\"font-medium text-purple-700\">Teams Integration</span>\n                      </div>\n                      <Badge className=\"bg-gray-100 text-gray-800\">Disconnected</Badge>\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between p-3 bg-green-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2\">\n                        <Mail className=\"text-green-500\" size={16} />\n                        <span className=\"font-medium text-green-700\">Email Notifications</span>\n                      </div>\n                      <Badge className=\"bg-green-100 text-green-800\">Active</Badge>\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2\">\n                        <FileText className=\"text-gray-500\" size={16} />\n                        <span className=\"font-medium text-gray-700\">PDF Export</span>\n                      </div>\n                      <Badge className=\"bg-green-100 text-green-800\">Available</Badge>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"analytics\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Resolution Time Trends</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded\">\n                    <div className=\"text-center\">\n                      <TrendingUp size={32} className=\"mx-auto text-gray-400 mb-2\" />\n                      <p className=\"text-gray-500\">Resolution time analytics would be displayed here</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Escalation Categories</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">Technical Issues:</span>\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"w-24 h-2 bg-gray-200 rounded\">\n                          <div className=\"w-3/4 h-2 bg-blue-500 rounded\"></div>\n                        </div>\n                        <span className=\"text-sm font-medium\">45%</span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">Resource Constraints:</span>\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"w-24 h-2 bg-gray-200 rounded\">\n                          <div className=\"w-1/2 h-2 bg-yellow-500 rounded\"></div>\n                        </div>\n                        <span className=\"text-sm font-medium\">30%</span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">Timeline Delays:</span>\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"w-24 h-2 bg-gray-200 rounded\">\n                          <div className=\"w-1/4 h-2 bg-red-500 rounded\"></div>\n                        </div>\n                        <span className=\"text-sm font-medium\">25%</span>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </main>\n\n      <EscalationModal\n        open={showCreateModal}\n        onOpenChange={setShowCreateModal}\n      />\n    </div>\n  );\n}\n","size_bytes":25486},"client/src/pages/ExecutiveReports.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  BarChart3, \n  Plus, \n  Download, \n  Send, \n  Calendar, \n  FileText,\n  Share2,\n  ExternalLink,\n  TrendingUp,\n  PieChart,\n  Brain,\n  Clock,\n  Users,\n  AlertTriangle,\n  CheckCircle\n} from \"lucide-react\";\nimport { useMode } from \"@/hooks/useMode\";\n\nexport default function ExecutiveReports() {\n  const [showGenerateModal, setShowGenerateModal] = useState(false);\n  const [selectedReportType, setSelectedReportType] = useState(\"weekly\");\n  const [selectedProgram, setSelectedProgram] = useState(\"all\");\n  const [generatingReport, setGeneratingReport] = useState(false);\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { isTestMode } = useMode();\n\n  const { data: reports = [], isLoading: reportsLoading } = useQuery({\n    queryKey: [\"/api/reports\"],\n  });\n\n  const { data: programs = [] } = useQuery({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const { data: dashboardMetrics } = useQuery({\n    queryKey: [\"/api/dashboard/metrics\"],\n  });\n\n  const generateReportMutation = useMutation({\n    mutationFn: async (data: { programId: string; type: string }) => {\n      return await apiRequest(\"POST\", \"/api/reports/generate\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Report generated successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/reports\"] });\n      setShowGenerateModal(false);\n      setGeneratingReport(false);\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to generate report\",\n        variant: \"destructive\",\n      });\n      setGeneratingReport(false);\n    },\n  });\n\n  const handleGenerateReport = async () => {\n    setGeneratingReport(true);\n    generateReportMutation.mutate({\n      programId: selectedProgram,\n      type: selectedReportType,\n    });\n  };\n\n  const handleNewReport = () => {\n    setShowGenerateModal(true);\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n  };\n\n  const getReportTypeColor = (type: string) => {\n    switch (type?.toLowerCase()) {\n      case \"weekly\": return \"bg-blue-100 text-blue-800\";\n      case \"monthly\": return \"bg-green-100 text-green-800\";\n      case \"quarterly\": return \"bg-purple-100 text-purple-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const handleExportToSmartsheet = async (reportId: string) => {\n    try {\n      toast({\n        title: \"Exporting\",\n        description: \"Exporting report to Smartsheet...\",\n      });\n      // In live mode, this would make actual API call to Smartsheet\n      console.log(\"Exporting to Smartsheet:\", reportId);\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to export to Smartsheet\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleExportToConfluence = async (reportId: string) => {\n    try {\n      toast({\n        title: \"Exporting\",\n        description: \"Exporting report to Confluence...\",\n      });\n      // In live mode, this would make actual API call to Confluence\n      console.log(\"Exporting to Confluence:\", reportId);\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to export to Confluence\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleScheduleDistribution = () => {\n    toast({\n      title: \"Scheduling\",\n      description: \"Setting up auto-distribution...\",\n    });\n  };\n\n  // Mock dashboard data for visualization\n  const programHealthData = {\n    overall: dashboardMetrics?.adopterScore || 87,\n    areas: [\n      { name: \"Technical Progress\", score: 92, status: \"excellent\" },\n      { name: \"Risk Management\", score: 78, status: \"good\" },\n      { name: \"Timeline Adherence\", score: 85, status: \"good\" },\n      { name: \"Stakeholder Satisfaction\", score: 90, status: \"excellent\" },\n    ]\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <Header\n        title=\"Executive Reports\"\n        subtitle=\"Auto-generated status reports with shareable dashboards and analytics\"\n        onNewClick={handleNewReport}\n      />\n\n      <main className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\n        <Tabs defaultValue=\"dashboard\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"dashboard\">Executive Dashboard</TabsTrigger>\n            <TabsTrigger value=\"reports\">Generated Reports</TabsTrigger>\n            <TabsTrigger value=\"analytics\">Program Analytics</TabsTrigger>\n            <TabsTrigger value=\"distribution\">Auto-Distribution</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"dashboard\" className=\"space-y-6\">\n            {/* Executive Summary Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Program Health</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{programHealthData.overall}%</p>\n                      <p className=\"text-sm text-success mt-1\">\n                        <TrendingUp size={14} className=\"inline mr-1\" />\n                        +3% this month\n                      </p>\n                    </div>\n                    <CheckCircle className=\"text-green-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Active Programs</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{dashboardMetrics?.activePrograms || 12}</p>\n                      <p className=\"text-sm text-blue-600 mt-1\">\n                        <Users size={14} className=\"inline mr-1\" />\n                        On track\n                      </p>\n                    </div>\n                    <BarChart3 className=\"text-blue-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Critical Issues</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{dashboardMetrics?.criticalRisks || 7}</p>\n                      <p className=\"text-sm text-warning mt-1\">\n                        <AlertTriangle size={14} className=\"inline mr-1\" />\n                        Requires attention\n                      </p>\n                    </div>\n                    <AlertTriangle className=\"text-yellow-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Upcoming Milestones</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{dashboardMetrics?.upcomingMilestones || 23}</p>\n                      <p className=\"text-sm text-gray-600 mt-1\">\n                        <Clock size={14} className=\"inline mr-1\" />\n                        Next 30 days\n                      </p>\n                    </div>\n                    <Calendar className=\"text-purple-500\" size={24} />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Program Health Breakdown */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Program Health Breakdown</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {programHealthData.areas.map((area, index) => (\n                      <div key={index} className=\"space-y-2\">\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm font-medium text-gray-700\">{area.name}</span>\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm font-semibold\">{area.score}%</span>\n                            <Badge className={\n                              area.status === 'excellent' ? 'bg-green-100 text-green-800' :\n                              area.status === 'good' ? 'bg-blue-100 text-blue-800' :\n                              'bg-yellow-100 text-yellow-800'\n                            }>\n                              {area.status}\n                            </Badge>\n                          </div>\n                        </div>\n                        <Progress value={area.score} className=\"h-2\" />\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Risk Profile Summary</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded-lg\">\n                    <div className=\"text-center\">\n                      <PieChart size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Risk Distribution</h3>\n                      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                        <div className=\"text-center\">\n                          <div className=\"w-4 h-4 bg-danger rounded mx-auto mb-1\"></div>\n                          <div className=\"font-medium\">High: 15%</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"w-4 h-4 bg-warning rounded mx-auto mb-1\"></div>\n                          <div className=\"font-medium\">Medium: 35%</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"w-4 h-4 bg-success rounded mx-auto mb-1\"></div>\n                          <div className=\"font-medium\">Low: 40%</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"w-4 h-4 bg-gray-300 rounded mx-auto mb-1\"></div>\n                          <div className=\"font-medium\">Mitigated: 10%</div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* AI Insights for Executives */}\n            <Card className=\"gradient-purple-blue border border-purple-200\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center\">\n                    <Brain className=\"text-purple-500\" size={20} />\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Executive AI Insights</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700\">\n                      <div className=\"space-y-2\">\n                        <div className=\"font-medium text-purple-700\">Strategic Recommendations</div>\n                        <ul className=\"space-y-1 text-purple-600\">\n                          <li>• Accelerate mobile integration to maintain Q2 delivery</li>\n                          <li>• Allocate additional resources to security compliance</li>\n                          <li>• Schedule stakeholder alignment meeting for API changes</li>\n                        </ul>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <div className=\"font-medium text-purple-700\">Performance Outlook</div>\n                        <ul className=\"space-y-1 text-purple-600\">\n                          <li>• 92% probability of on-time Q2 delivery</li>\n                          <li>• Revenue impact: $2.3M if delayed beyond Q2</li>\n                          <li>• Recommend 15% budget increase for risk mitigation</li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"reports\" className=\"space-y-6\">\n            {/* Quick Actions */}\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                <Label className=\"text-sm font-medium\">Filter by type:</Label>\n                <Select defaultValue=\"all\">\n                  <SelectTrigger className=\"w-32\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Types</SelectItem>\n                    <SelectItem value=\"weekly\">Weekly</SelectItem>\n                    <SelectItem value=\"monthly\">Monthly</SelectItem>\n                    <SelectItem value=\"quarterly\">Quarterly</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <Button onClick={handleNewReport} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                <Plus size={16} className=\"mr-2\" />\n                Generate Report\n              </Button>\n            </div>\n\n            {/* Reports Table */}\n            <Card className=\"border border-gray-200\">\n              <CardHeader>\n                <CardTitle>Generated Reports</CardTitle>\n              </CardHeader>\n              <CardContent className=\"p-0\">\n                {reportsLoading ? (\n                  <div className=\"p-6\">\n                    <div className=\"animate-pulse space-y-4\">\n                      {Array.from({ length: 5 }).map((_, i) => (\n                        <div key={i} className=\"h-16 bg-gray-200 rounded\"></div>\n                      ))}\n                    </div>\n                  </div>\n                ) : reports.length === 0 ? (\n                  <div className=\"p-12 text-center\">\n                    <FileText size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No reports generated yet</h3>\n                    <p className=\"text-gray-500 mb-4\">\n                      Generate your first executive report to track program progress and insights.\n                    </p>\n                    <Button onClick={handleNewReport} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                      <Plus size={16} className=\"mr-2\" />\n                      Generate Report\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"w-full\">\n                      <thead className=\"bg-gray-50\">\n                        <tr>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Report\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Type\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Generated\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Program\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                            Actions\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {reports.map((report: any) => (\n                          <tr key={report.id}>\n                            <td className=\"px-6 py-4\">\n                              <div>\n                                <div className=\"text-sm font-medium text-gray-900\">{report.title}</div>\n                                <div className=\"text-sm text-gray-500\">\n                                  Generated by {report.generatedBy?.name || \"AI System\"}\n                                </div>\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <Badge className={`${getReportTypeColor(report.type)} font-medium capitalize`}>\n                                {report.type}\n                              </Badge>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                              {formatDate(report.createdAt)}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                              {report.program?.name || \"All Programs\"}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                              <div className=\"flex items-center gap-2\">\n                                <Button variant=\"ghost\" size=\"sm\">\n                                  <Download size={14} className=\"mr-1\" />\n                                  PDF\n                                </Button>\n                                <Button \n                                  variant=\"ghost\" \n                                  size=\"sm\"\n                                  onClick={() => handleExportToSmartsheet(report.id)}\n                                >\n                                  <ExternalLink size={14} className=\"mr-1\" />\n                                  Smartsheet\n                                </Button>\n                                <Button \n                                  variant=\"ghost\" \n                                  size=\"sm\"\n                                  onClick={() => handleExportToConfluence(report.id)}\n                                >\n                                  <ExternalLink size={14} className=\"mr-1\" />\n                                  Confluence\n                                </Button>\n                                <Button variant=\"ghost\" size=\"sm\">\n                                  <Share2 size={14} className=\"mr-1\" />\n                                  Share\n                                </Button>\n                              </div>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"analytics\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Program Velocity Trends</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded-lg\">\n                    <div className=\"text-center\">\n                      <TrendingUp size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Velocity Analytics</h3>\n                      <p className=\"text-sm text-gray-600\">\n                        Sprint velocity, burndown rates, and completion trends would be visualized here\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Resource Utilization</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">Engineering Teams:</span>\n                      <div className=\"flex items-center gap-2\">\n                        <Progress value={85} className=\"w-24 h-2\" />\n                        <span className=\"text-sm font-medium\">85%</span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">QA Resources:</span>\n                      <div className=\"flex items-center gap-2\">\n                        <Progress value={92} className=\"w-24 h-2\" />\n                        <span className=\"text-sm font-medium\">92%</span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">DevOps Capacity:</span>\n                      <div className=\"flex items-center gap-2\">\n                        <Progress value={78} className=\"w-24 h-2\" />\n                        <span className=\"text-sm font-medium\">78%</span>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">Product Management:</span>\n                      <div className=\"flex items-center gap-2\">\n                        <Progress value={95} className=\"w-24 h-2\" />\n                        <span className=\"text-sm font-medium\">95%</span>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Stakeholder Engagement</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    <div className=\"p-3 bg-green-50 rounded-lg\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-medium text-green-700\">Executive Leadership</span>\n                        <Badge className=\"bg-green-100 text-green-800\">Highly Engaged</Badge>\n                      </div>\n                      <p className=\"text-sm text-green-600 mt-1\">Regular updates, active participation</p>\n                    </div>\n                    \n                    <div className=\"p-3 bg-blue-50 rounded-lg\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-medium text-blue-700\">Product Teams</span>\n                        <Badge className=\"bg-blue-100 text-blue-800\">Engaged</Badge>\n                      </div>\n                      <p className=\"text-sm text-blue-600 mt-1\">Good collaboration, minor coordination needs</p>\n                    </div>\n                    \n                    <div className=\"p-3 bg-yellow-50 rounded-lg\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"font-medium text-yellow-700\">External Partners</span>\n                        <Badge className=\"bg-yellow-100 text-yellow-800\">Moderate</Badge>\n                      </div>\n                      <p className=\"text-sm text-yellow-600 mt-1\">Requires more frequent check-ins</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>ROI & Business Impact</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"text-center\">\n                      <div className=\"text-3xl font-bold text-green-600 mb-1\">$4.2M</div>\n                      <div className=\"text-sm text-gray-600\">Projected Annual Savings</div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4 text-center\">\n                      <div>\n                        <div className=\"text-xl font-semibold text-blue-600\">156%</div>\n                        <div className=\"text-xs text-gray-600\">ROI</div>\n                      </div>\n                      <div>\n                        <div className=\"text-xl font-semibold text-purple-600\">8.3 mo</div>\n                        <div className=\"text-xs text-gray-600\">Payback Period</div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"pt-2 border-t border-gray-200\">\n                      <div className=\"text-sm text-gray-600 space-y-1\">\n                        <div>• 35% reduction in manual processes</div>\n                        <div>• 50% faster time-to-market</div>\n                        <div>• 90% improvement in compliance</div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"distribution\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Auto-Distribution Settings</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"p-4 border border-gray-200 rounded-lg\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h4 className=\"font-medium text-gray-900\">Weekly Executive Summary</h4>\n                        <Badge className=\"bg-green-100 text-green-800\">Active</Badge>\n                      </div>\n                      <p className=\"text-sm text-gray-600 mb-3\">Every Monday at 9:00 AM</p>\n                      <div className=\"flex gap-2\">\n                        <Button variant=\"outline\" size=\"sm\">Edit</Button>\n                        <Button variant=\"outline\" size=\"sm\">Pause</Button>\n                      </div>\n                    </div>\n                    \n                    <div className=\"p-4 border border-gray-200 rounded-lg\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h4 className=\"font-medium text-gray-900\">Monthly Program Review</h4>\n                        <Badge className=\"bg-green-100 text-green-800\">Active</Badge>\n                      </div>\n                      <p className=\"text-sm text-gray-600 mb-3\">First Monday of each month</p>\n                      <div className=\"flex gap-2\">\n                        <Button variant=\"outline\" size=\"sm\">Edit</Button>\n                        <Button variant=\"outline\" size=\"sm\">Pause</Button>\n                      </div>\n                    </div>\n                    \n                    <div className=\"p-4 border border-gray-200 rounded-lg\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h4 className=\"font-medium text-gray-900\">Quarterly Business Review</h4>\n                        <Badge className=\"bg-gray-100 text-gray-800\">Inactive</Badge>\n                      </div>\n                      <p className=\"text-sm text-gray-600 mb-3\">End of each quarter</p>\n                      <div className=\"flex gap-2\">\n                        <Button variant=\"outline\" size=\"sm\">Configure</Button>\n                        <Button variant=\"outline\" size=\"sm\">Activate</Button>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"border border-gray-200\">\n                <CardHeader>\n                  <CardTitle>Distribution Channels</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2\">\n                        <Send className=\"text-blue-500\" size={16} />\n                        <span className=\"font-medium text-blue-700\">Slack #executives</span>\n                      </div>\n                      <Badge className=\"bg-green-100 text-green-800\">Connected</Badge>\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between p-3 bg-purple-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2\">\n                        <Send className=\"text-purple-500\" size={16} />\n                        <span className=\"font-medium text-purple-700\">Teams Leadership</span>\n                      </div>\n                      <Badge className=\"bg-green-100 text-green-800\">Connected</Badge>\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between p-3 bg-green-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2\">\n                        <Send className=\"text-green-500\" size={16} />\n                        <span className=\"font-medium text-green-700\">Email Distribution</span>\n                      </div>\n                      <Badge className=\"bg-green-100 text-green-800\">Active</Badge>\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                      <div className=\"flex items-center gap-2\">\n                        <ExternalLink className=\"text-gray-500\" size={16} />\n                        <span className=\"font-medium text-gray-700\">Confluence Publication</span>\n                      </div>\n                      <Badge className=\"bg-yellow-100 text-yellow-800\">Limited</Badge>\n                    </div>\n                  </div>\n\n                  <div className=\"mt-6 pt-4 border-t border-gray-200\">\n                    <Button \n                      onClick={handleScheduleDistribution}\n                      className=\"w-full bg-primary-500 text-white hover:bg-primary-600\"\n                    >\n                      <Calendar size={16} className=\"mr-2\" />\n                      Schedule New Distribution\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </main>\n\n      {/* Generate Report Modal */}\n      <Dialog open={showGenerateModal} onOpenChange={setShowGenerateModal}>\n        <DialogContent className=\"max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Generate Executive Report</DialogTitle>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"reportType\">Report Type</Label>\n              <Select value={selectedReportType} onValueChange={setSelectedReportType}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"weekly\">Weekly Status Report</SelectItem>\n                  <SelectItem value=\"monthly\">Monthly Program Review</SelectItem>\n                  <SelectItem value=\"quarterly\">Quarterly Business Review</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div>\n              <Label htmlFor=\"program\">Program Scope</Label>\n              <Select value={selectedProgram} onValueChange={setSelectedProgram}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Programs</SelectItem>\n                  {programs.map((program: any) => (\n                    <SelectItem key={program.id} value={program.id}>\n                      {program.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={() => setShowGenerateModal(false)}\n                disabled={generatingReport}\n              >\n                Cancel\n              </Button>\n              <Button \n                onClick={handleGenerateReport}\n                className=\"bg-primary-500 text-white hover:bg-primary-600\"\n                disabled={generatingReport}\n              >\n                {generatingReport ? (\n                  <>\n                    <Brain size={16} className=\"mr-2 animate-spin\" />\n                    Generating...\n                  </>\n                ) : (\n                  <>\n                    <FileText size={16} className=\"mr-2\" />\n                    Generate Report\n                  </>\n                )}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":35210},"client/src/pages/Milestones.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Label } from \"@/components/ui/label\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ComponentContextCard } from \"@/components/layout/ComponentContextCard\";\nimport { ComponentAnalytics } from \"@/components/layout/ComponentAnalytics\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { Flag, Calendar, User, ExternalLink, Plus, Filter, AlertTriangle, Users, GitBranch, BarChart3, Eye } from \"lucide-react\";\nimport { useMode } from \"@/hooks/useMode\";\nimport type { Milestone, Program, MilestoneStep, JiraBepic, JiraEpic, JiraStory } from \"@shared/schema\";\nimport { MilestoneHierarchy } from \"@/components/milestones/MilestoneHierarchy\";\n\nexport default function Milestones() {\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [filterStatus, setFilterStatus] = useState(\"all\");\n  const [selectedMilestone, setSelectedMilestone] = useState<Milestone | null>(null);\n  const [contextData, setContextData] = useState<any>(null);\n  const [showContextModal, setShowContextModal] = useState(false);\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    programId: \"\",\n    status: \"not_started\",\n    ownerId: \"\",\n    dueDate: \"\",\n    pushToJira: false,\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { isTestMode } = useMode();\n  const [, setLocation] = useLocation();\n\n  const { data: milestones = [], isLoading } = useQuery<Milestone[]>({\n    queryKey: [\"/api/milestones\"],\n  });\n\n  const { data: programs = [] } = useQuery<Program[]>({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const { data: milestoneSteps = [] } = useQuery<MilestoneStep[]>({\n    queryKey: [\"/api/milestone-steps\"],\n  });\n\n  const { data: jiraBepics = [] } = useQuery<JiraBepic[]>({\n    queryKey: [\"/api/jira-bepics\"],\n  });\n\n  const { data: jiraEpics = [] } = useQuery<JiraEpic[]>({\n    queryKey: [\"/api/jira-epics\"],\n  });\n\n  const { data: jiraStories = [] } = useQuery<JiraStory[]>({\n    queryKey: [\"/api/jira-stories\"],\n  });\n\n  const createMilestoneMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"/api/milestones\", \"POST\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Milestone created successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/milestones\"] });\n      setShowCreateModal(false);\n      resetForm();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create milestone\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const fetchContextMutation = useMutation({\n    mutationFn: async (milestoneId: string) => {\n      return await apiRequest(`/api/milestones/${milestoneId}/context`, \"GET\");\n    },\n    onSuccess: (data: any) => {\n      setContextData(data);\n      setShowContextModal(true);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to load milestone context\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      title: \"\",\n      description: \"\",\n      programId: \"\",\n      status: \"not_started\",\n      ownerId: \"\",\n      dueDate: \"\",\n      pushToJira: false,\n    });\n  };\n\n  // Handlers for hierarchical item creation\n  const handleAddStep = (milestoneId: string) => {\n    // TODO: Implement step creation modal\n    console.log(\"Add step to milestone:\", milestoneId);\n  };\n\n  const handleAddBepic = (stepId: string) => {\n    // TODO: Implement bepic creation modal\n    console.log(\"Add bepic to step:\", stepId);\n  };\n\n  const handleAddEpic = (bepicId: string) => {\n    // TODO: Implement epic creation modal\n    console.log(\"Add epic to bepic:\", bepicId);\n  };\n\n  const handleAddStory = (epicId: string) => {\n    // TODO: Implement story creation modal\n    console.log(\"Add story to epic:\", epicId);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    createMilestoneMutation.mutate(formData);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\": return \"bg-green-100 text-green-800\";\n      case \"in_progress\": return \"bg-blue-100 text-blue-800\";\n      case \"at_risk\": return \"bg-red-100 text-red-800\";\n      case \"delayed\": return \"bg-red-100 text-red-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return \"No due date\";\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n  };\n\n  const filteredMilestones = milestones.filter((milestone: any) => \n    filterStatus === \"all\" || milestone.status === filterStatus\n  );\n\n  const handleNewMilestone = () => {\n    setShowCreateModal(true);\n  };\n\n  const handleViewMilestoneContext = (milestone: Milestone) => {\n    setSelectedMilestone(milestone);\n    fetchContextMutation.mutate(milestone.id);\n  };\n\n  const handleViewComponent = (type: string, programId?: string) => {\n    switch (type) {\n      case 'risks':\n        setLocation(`/risk-management${programId ? `?programId=${programId}` : ''}`);\n        break;\n      case 'dependencies':\n        setLocation(`/dependencies${programId ? `?programId=${programId}` : ''}`);\n        break;\n      case 'adopters':\n        setLocation(`/adopter-support${programId ? `?programId=${programId}` : ''}`);\n        break;\n      case 'programs':\n        setLocation(`/programs`);\n        break;\n      case 'projects':\n        setLocation(`/program-planning${programId ? `?programId=${programId}` : ''}`);\n        break;\n    }\n  };\n\n  const formatMilestoneDate = (dateString: string | null | undefined) => {\n    if (!dateString) return \"No date\";\n    const date = new Date(dateString);\n    return date.toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\"\n    });\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <Header\n        title=\"Milestone Management\"\n        subtitle=\"Track and manage program milestones with critical path visualization\"\n        onNewClick={handleNewMilestone}\n        newButtonText=\"Add Milestone\"\n      />\n\n      <main className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\n        {/* Filters */}\n        <div className=\"mb-6 flex items-start justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <Filter size={16} className=\"text-gray-500\" />\n              <Label htmlFor=\"status-filter\" className=\"text-sm font-medium\">Status:</Label>\n              <Select value={filterStatus} onValueChange={setFilterStatus}>\n                <SelectTrigger className=\"w-40\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Statuses</SelectItem>\n                  <SelectItem value=\"not_started\">Not Started</SelectItem>\n                  <SelectItem value=\"in_progress\">In Progress</SelectItem>\n                  <SelectItem value=\"at_risk\">At Risk</SelectItem>\n                  <SelectItem value=\"completed\">Completed</SelectItem>\n                  <SelectItem value=\"delayed\">Delayed</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </div>\n\n        {/* Milestones Content */}\n        <Tabs defaultValue=\"grid\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"grid\">Grid View</TabsTrigger>\n            <TabsTrigger value=\"hierarchy\">Hierarchical View</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"grid\" className=\"space-y-6\">\n            {/* Milestones Grid */}\n            {isLoading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {Array.from({ length: 6 }).map((_, i) => (\n              <Card key={i} className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"animate-pulse\">\n                    <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-full mb-4\"></div>\n                    <div className=\"h-6 bg-gray-200 rounded w-1/3 mb-2\"></div>\n                    <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : filteredMilestones.length === 0 ? (\n          <Card className=\"border border-gray-200\">\n            <CardContent className=\"p-12 text-center\">\n              <Flag size={48} className=\"mx-auto text-gray-400 mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No milestones found</h3>\n              <div className=\"text-gray-500 mb-4\">\n                {filterStatus === \"all\" \n                  ? programs.length > 0 \n                    ? (\n                      <div>\n                        <p className=\"mb-3\">The following programs are missing milestones:</p>\n                        <ul className=\"space-y-2 mb-4\">\n                          {programs.map(program => (\n                            <li key={program.id} className=\"flex items-center gap-2 text-sm bg-yellow-50 px-3 py-2 rounded border-l-4 border-yellow-400\">\n                              <div className=\"w-2 h-2 bg-yellow-400 rounded-full\"></div>\n                              <span className=\"font-medium\">Program \"</span>\n                              <button \n                                className=\"font-medium text-primary-600 hover:text-primary-700 hover:underline\"\n                                onClick={() => setLocation(`/program-planning?id=${program.id}`)}\n                              >\n                                {program.name}\n                              </button>\n                              <span className=\"font-medium\">\"</span>\n                              <span className=\"text-gray-600\">has no milestones defined</span>\n                            </li>\n                          ))}\n                        </ul>\n                        <p>Get started by creating milestones to track progress and deadlines.</p>\n                      </div>\n                    )\n                    : <p>Get started by creating your first milestone.</p>\n                  : <p>No milestones with status \"{filterStatus.replace(\"_\", \" \")}\" found.</p>\n                }\n              </div>\n              <Button onClick={handleNewMilestone} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                <Plus size={16} className=\"mr-2\" />\n                Create Milestone\n              </Button>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredMilestones.map((milestone: any) => (\n              <Card key={milestone.id} className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                        {milestone.title}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 mb-3\">\n                        {milestone.description || \"No description provided\"}\n                      </p>\n                    </div>\n                    {milestone.jiraEpicKey && (\n                      <Button variant=\"ghost\" size=\"sm\" className=\"text-primary-500 hover:text-primary-600\">\n                        <ExternalLink size={14} />\n                      </Button>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-500\">Status:</span>\n                      <Badge className={`${getStatusColor(milestone.status)} font-medium capitalize`}>\n                        {milestone.status?.replace(\"_\", \" \") || \"not started\"}\n                      </Badge>\n                    </div>\n\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-500\">Due Date:</span>\n                      <div className=\"flex items-center gap-1 text-sm text-gray-900\">\n                        <Calendar size={14} />\n                        {formatMilestoneDate(milestone.dueDate)}\n                      </div>\n                    </div>\n\n                    {milestone.owner && (\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm text-gray-500\">Owner:</span>\n                        <div className=\"flex items-center gap-1 text-sm text-gray-900\">\n                          <User size={14} />\n                          {milestone.owner.name}\n                        </div>\n                      </div>\n                    )}\n\n                    {milestone.program && (\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm text-gray-500\">Program:</span>\n                        <span className=\"text-sm font-medium text-gray-900\">\n                          {milestone.program.name}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                    <div className=\"flex gap-2\">\n                      <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n                        Edit\n                      </Button>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\" \n                        className=\"flex-1\"\n                        onClick={() => handleViewMilestoneContext(milestone)}\n                        disabled={fetchContextMutation.isPending}\n                      >\n                        <Eye size={14} className=\"mr-1\" />\n                        {fetchContextMutation.isPending ? \"Loading...\" : \"View Context\"}\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n          </TabsContent>\n\n          <TabsContent value=\"hierarchy\" className=\"space-y-6\">\n            {/* Hierarchical View */}\n            {isLoading ? (\n              <div className=\"space-y-4\">\n                {Array.from({ length: 3 }).map((_, i) => (\n                  <Card key={i} className=\"border border-gray-200\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"animate-pulse\">\n                        <div className=\"h-6 bg-gray-200 rounded w-1/2 mb-4\"></div>\n                        <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                        <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            ) : filteredMilestones.length === 0 ? (\n              <Card className=\"border border-gray-200\">\n                <CardContent className=\"p-12 text-center\">\n                  <GitBranch size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No milestone hierarchy found</h3>\n                  <p className=\"text-gray-500 mb-4\">\n                    Create milestones and add steps, bepics, epics, and stories to build your project hierarchy.\n                  </p>\n                  <Button onClick={handleNewMilestone} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                    <Plus size={16} className=\"mr-2\" />\n                    Create First Milestone\n                  </Button>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"space-y-6\">\n                {filteredMilestones.map((milestone: Milestone) => (\n                  <MilestoneHierarchy\n                    key={milestone.id}\n                    milestone={milestone}\n                    steps={milestoneSteps}\n                    bepics={jiraBepics}\n                    epics={jiraEpics}\n                    stories={jiraStories}\n                    onAddStep={handleAddStep}\n                    onAddBepic={handleAddBepic}\n                    onAddEpic={handleAddEpic}\n                    onAddStory={handleAddStory}\n                  />\n                ))}\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n      </main>\n\n      {/* Create Milestone Modal */}\n      <Dialog open={showCreateModal} onOpenChange={setShowCreateModal}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Create New Milestone</DialogTitle>\n          </DialogHeader>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"title\">Milestone Title</Label>\n              <Input\n                id=\"title\"\n                value={formData.title}\n                onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\n                placeholder=\"Write a clear, specific milestone title\"\n                required\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"description\">Description</Label>\n              <Textarea\n                id=\"description\"\n                value={formData.description}\n                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                placeholder=\"Describe the milestone objectives and success criteria\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"program\">Program</Label>\n                <Select value={formData.programId} onValueChange={(value) => setFormData(prev => ({ ...prev, programId: value }))}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select program\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {programs.map((program: any) => (\n                      <SelectItem key={program.id} value={program.id}>\n                        {program.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"status\">Status</Label>\n                <Select value={formData.status} onValueChange={(value) => setFormData(prev => ({ ...prev, status: value }))}>\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"not_started\">Not Started</SelectItem>\n                    <SelectItem value=\"in_progress\">In Progress</SelectItem>\n                    <SelectItem value=\"at_risk\">At Risk</SelectItem>\n                    <SelectItem value=\"completed\">Completed</SelectItem>\n                    <SelectItem value=\"delayed\">Delayed</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div>\n              <Label htmlFor=\"dueDate\">Due Date</Label>\n              <Input\n                id=\"dueDate\"\n                type=\"date\"\n                value={formData.dueDate}\n                onChange={(e) => setFormData(prev => ({ ...prev, dueDate: e.target.value }))}\n              />\n            </div>\n\n            {!isTestMode && (\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"pushToJira\"\n                  checked={formData.pushToJira}\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, pushToJira: !!checked }))}\n                />\n                <Label htmlFor=\"pushToJira\" className=\"text-sm\">\n                  Push to JIRA as Epic\n                </Label>\n              </div>\n            )}\n\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <Button type=\"button\" variant=\"outline\" onClick={() => setShowCreateModal(false)}>\n                Cancel\n              </Button>\n              <Button \n                type=\"submit\" \n                className=\"bg-primary-500 text-white hover:bg-primary-600\"\n                disabled={createMilestoneMutation.isPending}\n              >\n                {createMilestoneMutation.isPending ? \"Creating...\" : \"Create Milestone\"}\n              </Button>\n            </div>\n          </form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Context Modal */}\n      <Dialog open={showContextModal} onOpenChange={setShowContextModal}>\n        <DialogContent className=\"max-w-6xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Flag className=\"h-5 w-5\" />\n              {selectedMilestone?.title} - Contextual View\n            </DialogTitle>\n          </DialogHeader>\n\n          {contextData && (\n            <div className=\"space-y-6\">\n              {/* Milestone Details & Program Info */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <Card>\n                  <CardHeader className=\"pb-3\">\n                    <CardTitle className=\"text-sm\">Milestone Details</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-gray-500\">Status:</span>\n                        <Badge className={getStatusColor(contextData.milestone.status)}>\n                          {contextData.milestone.status?.replace('_', ' ')}\n                        </Badge>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-gray-500\">Due Date:</span>\n                        <span className=\"text-sm\">{formatMilestoneDate(contextData.milestone.dueDate)}</span>\n                      </div>\n                      {contextData.milestone.description && (\n                        <div className=\"pt-2 border-t\">\n                          <span className=\"text-sm text-gray-500\">Description:</span>\n                          <p className=\"text-sm mt-1\">{contextData.milestone.description}</p>\n                        </div>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {contextData.program && (\n                  <Card>\n                    <CardHeader className=\"pb-3\">\n                      <CardTitle className=\"text-sm\">Program Context</CardTitle>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-2\">\n                        <div>\n                          <h4 className=\"font-medium\">{contextData.program.name}</h4>\n                          <p className=\"text-sm text-gray-600\">{contextData.program.description || \"No description\"}</p>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-sm text-gray-500\">Status:</span>\n                          <Badge className={getStatusColor(contextData.program.status)}>\n                            {contextData.program.status}\n                          </Badge>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleViewComponent('programs')}\n                          className=\"w-full mt-2\"\n                        >\n                          View Program Details\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n\n              {/* Analytics Overview */}\n              {contextData.analytics && (\n                <ComponentAnalytics \n                  title=\"Program\"\n                  data={contextData.analytics}\n                />\n              )}\n\n              {/* Related Components */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-4\">\n                <ComponentContextCard\n                  title=\"Risks\"\n                  type=\"risks\"\n                  items={contextData.relatedComponents.risks || []}\n                  onViewAll={() => handleViewComponent('risks', contextData.program?.id)}\n                  onViewItem={(item) => console.log('View risk:', item)}\n                  analytics={{\n                    total: contextData.relatedComponents.risks?.length || 0,\n                    critical: contextData.analytics?.criticalRisks || 0\n                  }}\n                />\n\n                <ComponentContextCard\n                  title=\"Dependencies\"\n                  type=\"dependencies\"\n                  items={contextData.relatedComponents.dependencies || []}\n                  onViewAll={() => handleViewComponent('dependencies', contextData.program?.id)}\n                  onViewItem={(item) => console.log('View dependency:', item)}\n                  analytics={{\n                    total: contextData.relatedComponents.dependencies?.length || 0,\n                    blocked: contextData.analytics?.blockedDependencies || 0\n                  }}\n                />\n\n                <ComponentContextCard\n                  title=\"Adopters\"\n                  type=\"adopters\"\n                  items={contextData.relatedComponents.adopters || []}\n                  onViewAll={() => handleViewComponent('adopters', contextData.program?.id)}\n                  onViewItem={(item) => console.log('View adopter:', item)}\n                  analytics={{\n                    total: contextData.relatedComponents.adopters?.length || 0,\n                    ready: contextData.analytics?.readyAdopters || 0\n                  }}\n                />\n\n                <ComponentContextCard\n                  title=\"Other Milestones\"\n                  type=\"milestones\"\n                  items={contextData.relatedComponents.milestones || []}\n                  onViewAll={() => handleViewComponent('milestones', contextData.program?.id)}\n                  onViewItem={(item) => console.log('View milestone:', item)}\n                  analytics={{\n                    total: contextData.relatedComponents.milestones?.length || 0,\n                    overdue: 0 // Calculate based on due dates\n                  }}\n                />\n              </div>\n\n              {/* Projects if available */}\n              {contextData.relatedComponents.projects && contextData.relatedComponents.projects.length > 0 && (\n                <ComponentContextCard\n                  title=\"Related Projects\"\n                  type=\"projects\"\n                  items={contextData.relatedComponents.projects}\n                  onViewAll={() => handleViewComponent('projects', contextData.program?.id)}\n                  onViewItem={(item) => console.log('View project:', item)}\n                  analytics={{\n                    total: contextData.relatedComponents.projects.length\n                  }}\n                />\n              )}\n\n              {/* Quick Actions */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-sm\">Quick Actions</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"flex flex-wrap gap-2\">\n                    <Button size=\"sm\" variant=\"outline\" onClick={() => handleViewComponent('risks', contextData.program?.id)}>\n                      <AlertTriangle className=\"h-4 w-4 mr-1\" />\n                      View All Risks\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\" onClick={() => handleViewComponent('dependencies', contextData.program?.id)}>\n                      <GitBranch className=\"h-4 w-4 mr-1\" />\n                      View All Dependencies\n                    </Button>\n                    <Button size=\"sm\" variant=\"outline\" onClick={() => handleViewComponent('adopters', contextData.program?.id)}>\n                      <Users className=\"h-4 w-4 mr-1\" />\n                      View All Adopters\n                    </Button>\n                    {contextData.program && (\n                      <Button size=\"sm\" variant=\"outline\" onClick={() => handleViewComponent('programs')}>\n                        <BarChart3 className=\"h-4 w-4 mr-1\" />\n                        Go to Program\n                      </Button>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":30132},"client/src/pages/ProgramPlanning.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useLocation } from \"wouter\";\nimport { ArrowLeft, Building2, Target, Calendar, Users } from \"lucide-react\";\nimport { ProgramPhaseManager } from \"@/components/phases/ProgramPhaseManager\";\nimport type { Program } from \"@shared/schema\";\n\nexport default function ProgramPlanning() {\n  const [selectedProgramId, setSelectedProgramId] = useState<string>(\"\");\n  const [, setLocation] = useLocation();\n\n  const { data: programs = [] } = useQuery<Program[]>({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const selectedProgram = programs.find(p => p.id === selectedProgramId);\n\n  // Check for program ID in URL parameters\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const programIdFromUrl = urlParams.get('id');\n    if (programIdFromUrl && programs.some(p => p.id === programIdFromUrl)) {\n      setSelectedProgramId(programIdFromUrl);\n    }\n  }, [programs]);\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"active\": return \"bg-green-100 text-green-800\";\n      case \"planning\": return \"bg-blue-100 text-blue-800\";\n      case \"on_hold\": return \"bg-yellow-100 text-yellow-800\";\n      case \"completed\": return \"bg-gray-100 text-gray-800\";\n      case \"cancelled\": return \"bg-red-100 text-red-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  if (!selectedProgram) {\n    return (\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <div className=\"bg-white border-b border-gray-200 px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <Button \n                variant=\"ghost\" \n                size=\"sm\"\n                onClick={() => setLocation(\"/dashboard\")}\n                className=\"text-gray-600 hover:text-gray-800\"\n              >\n                <ArrowLeft size={16} className=\"mr-2\" />\n                Back to Dashboard\n              </Button>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">Program Planning & Phase Management</h1>\n                <p className=\"text-gray-600 mt-1\">\n                  Manage program phases following PMI PMP standards\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <main className=\"flex-1 overflow-y-auto p-6\">\n          <Card className=\"max-w-2xl mx-auto\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Target size={20} className=\"text-blue-600\" />\n                Select Program for Phase Management\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {programs.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <Building2 size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Programs Found</h3>\n                  <p className=\"text-gray-500 mb-4\">\n                    Create a program first to start managing phases and project planning.\n                  </p>\n                  <Button onClick={() => setLocation(\"/programs\")}>\n                    Go to Programs\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Choose Program:\n                    </label>\n                    <Select value={selectedProgramId} onValueChange={setSelectedProgramId}>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select a program to manage phases...\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {programs.map((program) => (\n                          <SelectItem key={program.id} value={program.id}>\n                            <div className=\"flex items-center gap-2\">\n                              <span>{program.name}</span>\n                              <Badge variant=\"outline\" className={getStatusColor(program.status || \"planning\")}>\n                                {program.status || \"planning\"}\n                              </Badge>\n                            </div>\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6\">\n                    <Card className=\"bg-blue-50 border-blue-200\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Target size={16} className=\"text-blue-600\" />\n                          <span className=\"font-medium text-blue-800\">5 PMI Phases</span>\n                        </div>\n                        <p className=\"text-sm text-blue-700\">\n                          Initiation, Planning, Execution, Monitoring & Controlling, Closure\n                        </p>\n                      </CardContent>\n                    </Card>\n\n                    <Card className=\"bg-green-50 border-green-200\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Calendar size={16} className=\"text-green-600\" />\n                          <span className=\"font-medium text-green-800\">Guided Workflow</span>\n                        </div>\n                        <p className=\"text-sm text-green-700\">\n                          Step-by-step process with templates and best practices\n                        </p>\n                      </CardContent>\n                    </Card>\n\n                    <Card className=\"bg-purple-50 border-purple-200\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Users size={16} className=\"text-purple-600\" />\n                          <span className=\"font-medium text-purple-800\">AI Recommendations</span>\n                        </div>\n                        <p className=\"text-sm text-purple-700\">\n                          Smart suggestions based on project phase and context\n                        </p>\n                      </CardContent>\n                    </Card>\n                  </div>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </main>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <div className=\"bg-white border-b border-gray-200 px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\"\n              onClick={() => setSelectedProgramId(\"\")}\n              className=\"text-gray-600 hover:text-gray-800\"\n            >\n              <ArrowLeft size={16} className=\"mr-2\" />\n              Back to Program Selection\n            </Button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Program Phase Management</h1>\n              <p className=\"text-gray-600 mt-1\">\n                Managing phases for program: <span className=\"font-medium\">{selectedProgram.name}</span>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <main className=\"flex-1 overflow-y-auto p-6\">\n        <ProgramPhaseManager program={selectedProgram} />\n      </main>\n    </div>\n  );\n}","size_bytes":8034},"client/src/pages/Programs.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { \n  ChartGantt, \n  AlertTriangle, \n  Flag, \n  Users,\n  GitBranch,\n  Eye,\n  Search,\n  Filter,\n  Plus\n} from \"lucide-react\";\nimport { calculateProgramHealth, getHealthBadge } from \"@/lib/healthCalculation\";\nimport type { Program, Risk, Milestone, Adopter, Dependency } from \"@shared/schema\";\n\nexport default function Programs() {\n  const [, setLocation] = useLocation();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n\n  // Get filter from URL params\n  const urlParams = new URLSearchParams(window.location.search);\n  const filterParam = urlParams.get('filter');\n\n  const { data: programs = [], isLoading: programsLoading } = useQuery<Program[]>({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const { data: risks = [] } = useQuery<Risk[]>({\n    queryKey: [\"/api/risks\"],\n  });\n\n  const { data: milestones = [] } = useQuery<Milestone[]>({\n    queryKey: [\"/api/milestones\"],\n  });\n\n  const { data: adopters = [] } = useQuery<Adopter[]>({\n    queryKey: [\"/api/adopters\"],\n  });\n\n  const { data: dependencies = [] } = useQuery<Dependency[]>({\n    queryKey: [\"/api/dependencies\"],\n  });\n\n  // Helper functions to get program-specific data\n  const getProgramRisks = (programId: string) => \n    risks.filter(risk => risk.programId === programId);\n\n  const getProgramMilestones = (programId: string) => \n    milestones.filter(milestone => milestone.programId === programId);\n\n  const getProgramAdopters = (programId: string) => \n    adopters.filter(adopter => adopter.programId === programId);\n\n  const getProgramDependencies = (programId: string) => \n    dependencies.filter(dep => dep.programId === programId);\n\n  // Filter programs based on URL filter parameter and local filters\n  const filteredPrograms = programs.filter(program => {\n    const matchesSearch = program.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         program.description?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    let matchesStatusFilter = true;\n    \n    // URL filter takes precedence over local filter\n    if (filterParam === 'active') {\n      matchesStatusFilter = program.status === 'active' || program.status === 'planning';\n    } else if (filterParam === 'on_hold') {\n      matchesStatusFilter = program.status === 'on_hold';\n    } else if (filterParam === 'completed') {\n      matchesStatusFilter = program.status === 'completed';\n    } else if (statusFilter !== 'all') {\n      // Only apply local filter if no URL filter is present\n      matchesStatusFilter = program.status === statusFilter;\n    }\n    // If no filters, show all programs (when filterParam is null and statusFilter is 'all')\n\n    return matchesSearch && matchesStatusFilter;\n  });\n\n  const getStatusIcon = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case 'active': return <ChartGantt className=\"h-4 w-4 text-green-600\" />;\n      case 'planning': return <Flag className=\"h-4 w-4 text-blue-600\" />;\n      case 'on_hold': return <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />;\n      case 'completed': return <Flag className=\"h-4 w-4 text-gray-600\" />;\n      default: return <ChartGantt className=\"h-4 w-4 text-gray-600\" />;\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case 'active': return 'bg-green-100 text-green-800';\n      case 'planning': return 'bg-blue-100 text-blue-800';\n      case 'on_hold': return 'bg-yellow-100 text-yellow-800';\n      case 'completed': return 'bg-gray-100 text-gray-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getFilterTitle = () => {\n    if (filterParam === 'active') return 'Active Programs';\n    if (filterParam === 'on_hold') return 'Programs on Hold';\n    if (filterParam === 'completed') return 'Completed Programs';\n    return 'All Programs';\n  };\n\n  const getFilterSubtitle = () => {\n    if (filterParam === 'active') return `Active and planning programs (${filteredPrograms.length} programs)`;\n    if (filterParam === 'on_hold') return `Programs currently on hold (${filteredPrograms.length} programs)`;\n    if (filterParam === 'completed') return `Completed programs (${filteredPrograms.length} programs)`;\n    return `Manage and track all your programs (${filteredPrograms.length} programs)`;\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      <Header\n        title={getFilterTitle()}\n        subtitle={getFilterSubtitle()}\n        onNewClick={() => setLocation(\"/dashboard\")}\n        newButtonText=\"New Program\"\n      />\n\n      <main className=\"flex-1 overflow-y-auto p-6 custom-scrollbar\">\n        {/* Filters and Search */}\n        <div className=\"mb-6\">\n          <div className=\"flex items-center gap-4 mb-4\">\n            <div className=\"relative flex-1 max-w-md\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n              <Input\n                placeholder=\"Search programs...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            <select \n              value={statusFilter} \n              onChange={(e) => setStatusFilter(e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 rounded-md bg-white\"\n            >\n              <option value=\"all\">All Status</option>\n              <option value=\"active\">Active</option>\n              <option value=\"planning\">Planning</option>\n              <option value=\"on_hold\">On Hold</option>\n              <option value=\"completed\">Completed</option>\n            </select>\n\n          </div>\n\n          {filterParam && (\n            <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n              <Filter className=\"h-4 w-4\" />\n              <span>Showing: {filterParam.replace('_', ' ')} programs only</span>\n              <Button \n                variant=\"ghost\" \n                size=\"sm\" \n                onClick={() => setLocation(\"/programs\")}\n                className=\"text-primary-600 hover:text-primary-700\"\n              >\n                Show all programs\n              </Button>\n            </div>\n          )}\n        </div>\n\n        {/* Programs Grid */}\n        {programsLoading ? (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n            {Array.from({ length: 6 }).map((_, i) => (\n              <Card key={i} className=\"border border-gray-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"animate-pulse space-y-4\">\n                    <div className=\"h-6 bg-gray-200 rounded w-3/4\"></div>\n                    <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n                    <div className=\"grid grid-cols-4 gap-4\">\n                      <div className=\"h-12 bg-gray-200 rounded\"></div>\n                      <div className=\"h-12 bg-gray-200 rounded\"></div>\n                      <div className=\"h-12 bg-gray-200 rounded\"></div>\n                      <div className=\"h-12 bg-gray-200 rounded\"></div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : filteredPrograms.length === 0 ? (\n          <Card className=\"border border-gray-200\">\n            <CardContent className=\"p-12 text-center\">\n              <ChartGantt size={48} className=\"mx-auto text-gray-400 mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No programs found</h3>\n              <p className=\"text-gray-500 mb-4\">\n                {searchTerm || statusFilter !== 'all' ? \n                  'Try adjusting your search or filter criteria.' : \n                  'Create your first program to start tracking progress and managing initiatives.'\n                }\n              </p>\n              {!searchTerm && statusFilter === 'all' && (\n                <Button onClick={() => setLocation(\"/dashboard\")} className=\"bg-primary-500 text-white hover:bg-primary-600\">\n                  Create First Program\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n            {filteredPrograms.map((program) => {\n              const programRisks = getProgramRisks(program.id);\n              const programMilestones = getProgramMilestones(program.id);\n              const programAdopters = getProgramAdopters(program.id);\n              const programDependencies = getProgramDependencies(program.id);\n              \n              const criticalRisks = programRisks.filter(r => r.severity === 'critical' || r.severity === 'high');\n              const overdueMilestones = programMilestones.filter(m => \n                m.dueDate && new Date(m.dueDate) < new Date() && m.status !== 'completed'\n              );\n              const blockedDependencies = programDependencies.filter(d => d.status === 'blocked');\n\n              // Check for missing essential components\n              const getMissingComponents = () => {\n                const missing = [];\n                if (!program.description || program.description.trim().length < 10) missing.push('Description');\n                if (!program.ownerId) missing.push('Owner');\n                if (!program.startDate) missing.push('Start Date');\n                if (!program.endDate) missing.push('End Date');\n                if (!program.objectives || (Array.isArray(program.objectives) && !program.objectives.length)) missing.push('Objectives');\n                if (!program.kpis || (Array.isArray(program.kpis) && !program.kpis.length)) missing.push('KPIs');\n                if (programMilestones.length === 0) missing.push('Milestones');\n                if (programAdopters.length === 0) missing.push('Adopter Teams');\n                return missing;\n              };\n\n              const missingComponents = getMissingComponents();\n\n              // Calculate program health using centralized utility\n              const healthMetrics = calculateProgramHealth({\n                risks: programRisks,\n                milestones: programMilestones,\n                dependencies: programDependencies,\n                missingComponents: missingComponents.length\n              });\n\n              const healthBadge = getHealthBadge(healthMetrics.score);\n\n              return (\n                <Card key={program.id} className=\"border border-gray-200 hover:border-primary-300 transition-colors\">\n                  <CardHeader className=\"pb-4\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          {getStatusIcon(program.status || 'active')}\n                          <h3 className=\"text-lg font-semibold text-gray-900\">{program.name}</h3>\n                          <Badge className={getStatusColor(program.status || 'active')}>\n                            {program.status?.replace('_', ' ') || 'active'}\n                          </Badge>\n                        </div>\n                        <p className=\"text-sm text-gray-600 mb-3\">{program.description}</p>\n                        <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                          <span>Owner: {program.ownerId || 'Unassigned'}</span>\n                          {program.startDate && (\n                            <span>Started: {new Date(program.startDate).toLocaleDateString()}</span>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-xs text-gray-500 mb-1\">Health</div>\n                        <Badge className={healthBadge.color}>\n                          {healthBadge.label}\n                        </Badge>\n                      </div>\n                    </div>\n                  </CardHeader>\n\n                  <CardContent className=\"pt-0\">\n                    {/* Program Components Summary */}\n                    <div className=\"grid grid-cols-4 gap-4 mb-4\">\n                      <div className=\"text-center p-2 rounded bg-gray-50\">\n                        <div className=\"flex items-center justify-center mb-1\">\n                          <AlertTriangle className=\"h-4 w-4 text-red-500 mr-1\" />\n                          <span className=\"text-lg font-semibold text-gray-900\">{programRisks.length}</span>\n                        </div>\n                        <div className=\"text-xs text-gray-500\">Total Risks</div>\n                        {criticalRisks.length > 0 && (\n                          <div className=\"text-xs text-red-600 font-medium\">\n                            {criticalRisks.length} critical\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"text-center p-2 rounded bg-gray-50\">\n                        <div className=\"flex items-center justify-center mb-1\">\n                          <Flag className=\"h-4 w-4 text-yellow-500 mr-1\" />\n                          <span className=\"text-lg font-semibold text-gray-900\">{programMilestones.length}</span>\n                        </div>\n                        <div className=\"text-xs text-gray-500\">Milestones</div>\n                        {overdueMilestones.length > 0 && (\n                          <div className=\"text-xs text-red-600 font-medium\">{overdueMilestones.length} overdue</div>\n                        )}\n                      </div>\n\n                      <div className=\"text-center p-2 rounded bg-gray-50\">\n                        <div className=\"flex items-center justify-center mb-1\">\n                          <Users className=\"h-4 w-4 text-blue-500 mr-1\" />\n                          <span className=\"text-lg font-semibold text-gray-900\">{programAdopters.length}</span>\n                        </div>\n                        <div className=\"text-xs text-gray-500\">Teams</div>\n                      </div>\n\n                      <div className=\"text-center p-2 rounded bg-gray-50\">\n                        <div className=\"flex items-center justify-center mb-1\">\n                          <GitBranch className=\"h-4 w-4 text-purple-500 mr-1\" />\n                          <span className=\"text-lg font-semibold text-gray-900\">{programDependencies.length}</span>\n                        </div>\n                        <div className=\"text-xs text-gray-500\">Dependencies</div>\n                        {blockedDependencies.length > 0 && (\n                          <div className=\"text-xs text-red-600 font-medium\">{blockedDependencies.length} blocked</div>\n                        )}\n                      </div>\n                    </div>\n\n                    {/* Quick Actions */}\n                    <div className=\"flex items-center justify-end pt-4 border-t border-gray-100\">\n                      <Button \n                        size=\"sm\" \n                        variant=\"ghost\" \n                        onClick={() => setLocation(`/programs/${program.id}`)}\n                        className=\"text-primary-600 hover:text-primary-700\"\n                      >\n                        <Eye className=\"h-3 w-3 mr-1\" />\n                        View Details\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}","size_bytes":15999},"client/src/pages/RiskManagement.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useState, useEffect } from \"react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  AlertTriangle, \n  TrendingUp, \n  Shield, \n  Clock, \n  Plus,\n  Eye,\n  Filter,\n  Download,\n  RefreshCw,\n  Database,\n  Target,\n  Users,\n  Calendar\n} from \"lucide-react\";\nimport type { Risk, Program } from \"@shared/schema\";\n\nexport default function RiskManagement() {\n  const [selectedProgram, setSelectedProgram] = useState<string>(\"all\");\n  const [showAddRiskModal, setShowAddRiskModal] = useState(false);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const [selectedRisk, setSelectedRisk] = useState<Risk | null>(null);\n  const [severityFilter, setSeverityFilter] = useState<string>(\"all\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [newRisk, setNewRisk] = useState({\n    title: \"\",\n    description: \"\",\n    programId: \"\",\n    severity: \"medium\" as const,\n    impact: 3,\n    probability: 3,\n    status: \"identified\" as const,\n    pmpCategory: \"scope\" as const,\n    mitigationPlan: \"\"\n  });\n\n  const { toast } = useToast();\n\n  const { data: programs = [], isLoading: programsLoading } = useQuery<Program[]>({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const { data: risks = [], isLoading: risksLoading } = useQuery<Risk[]>({\n    queryKey: [\"/api/risks\"],\n  });\n\n  // Auto-detect gaps on component mount\n  useEffect(() => {\n    const detectGaps = async () => {\n      try {\n        await apiRequest('/api/programs/detect-all-gaps', 'POST');\n        console.log('Comprehensive gap detection completed');\n        queryClient.invalidateQueries({ queryKey: [\"/api/risks\"] });\n      } catch (error) {\n        console.error('Failed to run gap detection:', error);\n      }\n    };\n    \n    detectGaps();\n  }, []);\n\n  const addRiskMutation = useMutation({\n    mutationFn: async (riskData: any) => {\n      await apiRequest('/api/risks', 'POST', riskData);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Risk created successfully\",\n      });\n      setShowAddRiskModal(false);\n      setNewRisk({\n        title: \"\",\n        description: \"\",\n        programId: \"\",\n        severity: \"medium\",\n        impact: 3,\n        probability: 3,\n        status: \"identified\",\n        pmpCategory: \"scope\",\n        mitigationPlan: \"\"\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/risks\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to create risk\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const detectGapsMutation = useMutation({\n    mutationFn: async (programId: string) => {\n      await apiRequest(`/api/programs/${programId}/detect-gaps`, 'POST');\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Gap detection completed successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/risks\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to detect gaps\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const importJiraRisksMutation = useMutation({\n    mutationFn: async (programId: string) => {\n      await apiRequest(`/api/programs/${programId}/import-jira-risks`, 'POST');\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"JIRA risks imported successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/risks\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Info\",\n        description: \"JIRA integration ready for Live mode\",\n        variant: \"default\",\n      });\n    },\n  });\n\n  // Filter risks based on selected filters\n  const filteredRisks = risks.filter(risk => {\n    if (selectedProgram !== \"all\" && risk.programId !== selectedProgram) return false;\n    if (severityFilter !== \"all\" && risk.severity !== severityFilter) return false;\n    if (statusFilter !== \"all\" && risk.status !== statusFilter) return false;\n    return true;\n  });\n\n  // Risk analytics\n  const riskAnalytics = {\n    total: filteredRisks.length,\n    critical: filteredRisks.filter(r => r.severity === 'critical').length,\n    high: filteredRisks.filter(r => r.severity === 'high').length,\n    medium: filteredRisks.filter(r => r.severity === 'medium').length,\n    low: filteredRisks.filter(r => r.severity === 'low').length,\n    identified: filteredRisks.filter(r => r.status === 'identified').length,\n    inProgress: filteredRisks.filter(r => r.status === 'in_progress').length,\n    mitigated: filteredRisks.filter(r => r.status === 'mitigated').length\n  };\n\n  const getSeverityBadge = (severity: string) => {\n    const variants: { [key: string]: string } = {\n      critical: \"bg-red-600 text-white\",\n      high: \"bg-orange-500 text-white\", \n      medium: \"bg-yellow-500 text-black\",\n      low: \"bg-green-500 text-white\"\n    };\n    return variants[severity] || variants.medium;\n  };\n\n  const getStatusBadge = (status: string) => {\n    const variants: { [key: string]: string } = {\n      identified: \"bg-blue-500 text-white\",\n      in_progress: \"bg-purple-500 text-white\",\n      mitigated: \"bg-green-600 text-white\",\n      resolved: \"bg-gray-500 text-white\"\n    };\n    return variants[status] || variants.identified;\n  };\n\n  const handleAddRisk = () => {\n    if (!newRisk.title.trim() || !newRisk.description.trim() || !newRisk.programId) {\n      toast({\n        title: \"Error\",\n        description: \"Please fill in all required fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    addRiskMutation.mutate(newRisk);\n  };\n\n  const handleDetectGaps = (programId: string) => {\n    detectGapsMutation.mutate(programId);\n  };\n\n  const handleImportJiraRisks = (programId: string) => {\n    importJiraRisksMutation.mutate(programId);\n  };\n\n  const getProgramName = (programId: string) => {\n    const program = programs.find(p => p.id === programId);\n    return program?.name || \"Unknown Program\";\n  };\n\n  if (programsLoading || risksLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n        <Header />\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-lg\">Loading...</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      <Header />\n      \n      <div className=\"max-w-7xl mx-auto p-6\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Risk Management</h1>\n          <div className=\"flex gap-2\">\n            <Button onClick={() => setShowAddRiskModal(true)} className=\"bg-blue-600 hover:bg-blue-700\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Add Risk\n            </Button>\n          </div>\n        </div>\n\n        {/* Risk Analytics */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6\">\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center\">\n                <Shield className=\"w-8 h-8 text-blue-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">Total Risks</p>\n                  <p className=\"text-2xl font-bold\">{riskAnalytics.total}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center\">\n                <AlertTriangle className=\"w-8 h-8 text-red-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">Critical</p>\n                  <p className=\"text-2xl font-bold text-red-600\">{riskAnalytics.critical}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center\">\n                <TrendingUp className=\"w-8 h-8 text-orange-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">High</p>\n                  <p className=\"text-2xl font-bold text-orange-600\">{riskAnalytics.high}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center\">\n                <Clock className=\"w-8 h-8 text-yellow-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">Medium</p>\n                  <p className=\"text-2xl font-bold text-yellow-600\">{riskAnalytics.medium}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center\">\n                <Target className=\"w-8 h-8 text-blue-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">Identified</p>\n                  <p className=\"text-2xl font-bold text-blue-600\">{riskAnalytics.identified}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center\">\n                <Users className=\"w-8 h-8 text-purple-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">In Progress</p>\n                  <p className=\"text-2xl font-bold text-purple-600\">{riskAnalytics.inProgress}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center\">\n                <Shield className=\"w-8 h-8 text-green-500 mr-3\" />\n                <div>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">Mitigated</p>\n                  <p className=\"text-2xl font-bold text-green-600\">{riskAnalytics.mitigated}</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Filters and Actions */}\n        <Card className=\"mb-6\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center\">\n              <Filter className=\"w-5 h-5 mr-2\" />\n              Filters & Actions\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\n              <div>\n                <Label htmlFor=\"programSelect\">Program</Label>\n                <Select value={selectedProgram} onValueChange={setSelectedProgram}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select program\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Programs</SelectItem>\n                    {programs.map((program) => (\n                      <SelectItem key={program.id} value={program.id}>\n                        {program.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"severityFilter\">Severity</Label>\n                <Select value={severityFilter} onValueChange={setSeverityFilter}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select severity\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Severities</SelectItem>\n                    <SelectItem value=\"critical\">Critical</SelectItem>\n                    <SelectItem value=\"high\">High</SelectItem>\n                    <SelectItem value=\"medium\">Medium</SelectItem>\n                    <SelectItem value=\"low\">Low</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"statusFilter\">Status</Label>\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select status\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Statuses</SelectItem>\n                    <SelectItem value=\"identified\">Identified</SelectItem>\n                    <SelectItem value=\"in_progress\">In Progress</SelectItem>\n                    <SelectItem value=\"mitigated\">Mitigated</SelectItem>\n                    <SelectItem value=\"resolved\">Resolved</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"flex flex-wrap gap-2\">\n              {selectedProgram !== \"all\" && (\n                <>\n                  <Button \n                    onClick={() => handleDetectGaps(selectedProgram)}\n                    disabled={detectGapsMutation.isPending}\n                    variant=\"outline\"\n                  >\n                    <RefreshCw className=\"w-4 h-4 mr-2\" />\n                    Detect Gaps\n                  </Button>\n                  <Button \n                    onClick={() => handleImportJiraRisks(selectedProgram)}\n                    disabled={importJiraRisksMutation.isPending}\n                    variant=\"outline\"\n                  >\n                    <Database className=\"w-4 h-4 mr-2\" />\n                    Import JIRA Risks\n                  </Button>\n                </>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Risk List */}\n        <div className=\"grid gap-4\">\n          {filteredRisks.map((risk) => (\n            <Card key={risk.id} className=\"hover:shadow-md transition-shadow\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-semibold mb-2\">{risk.title}</h3>\n                    <p className=\"text-gray-600 dark:text-gray-400 mb-3\">{risk.description}</p>\n                    <div className=\"flex flex-wrap gap-2 mb-3\">\n                      <Badge className={getSeverityBadge(risk.severity)}>\n                        {risk.severity?.toUpperCase()}\n                      </Badge>\n                      <Badge className={getStatusBadge(risk.status)}>\n                        {risk.status?.replace('_', ' ').toUpperCase()}\n                      </Badge>\n                      {risk.pmpCategory && (\n                        <Badge variant=\"outline\">\n                          {risk.pmpCategory}\n                        </Badge>\n                      )}\n                    </div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      Program: {getProgramName(risk.programId)} | \n                      Impact: {risk.impact}/5 | \n                      Probability: {risk.probability}/5\n                      {risk.createdAt && (\n                        <> | Created: {new Date(risk.createdAt).toLocaleDateString()}</>\n                      )}\n                    </div>\n                  </div>\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\"\n                    onClick={() => {\n                      setSelectedRisk(risk);\n                      setShowDetailsModal(true);\n                    }}\n                  >\n                    <Eye className=\"w-4 h-4 mr-2\" />\n                    Details\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n\n          {filteredRisks.length === 0 && (\n            <Card>\n              <CardContent className=\"p-12 text-center\">\n                <AlertTriangle className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">No Risks Found</h3>\n                <p className=\"text-gray-500 dark:text-gray-400\">\n                  No risks match your current filters. Try adjusting the filters or add a new risk.\n                </p>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n\n      {/* Add Risk Modal */}\n      <Dialog open={showAddRiskModal} onOpenChange={setShowAddRiskModal}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Add New Risk</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"title\">Risk Title *</Label>\n              <Input\n                id=\"title\"\n                value={newRisk.title}\n                onChange={(e) => setNewRisk({ ...newRisk, title: e.target.value })}\n                placeholder=\"Enter risk title\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"description\">Description *</Label>\n              <Textarea\n                id=\"description\"\n                value={newRisk.description}\n                onChange={(e) => setNewRisk({ ...newRisk, description: e.target.value })}\n                placeholder=\"Describe the risk and its potential impact\"\n                rows={3}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"program\">Program *</Label>\n                <Select value={newRisk.programId} onValueChange={(value) => setNewRisk({ ...newRisk, programId: value })}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select program\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {programs.map((program) => (\n                      <SelectItem key={program.id} value={program.id}>\n                        {program.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <Label htmlFor=\"severity\">Severity</Label>\n                <Select value={newRisk.severity} onValueChange={(value: any) => setNewRisk({ ...newRisk, severity: value })}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select severity\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"low\">Low</SelectItem>\n                    <SelectItem value=\"medium\">Medium</SelectItem>\n                    <SelectItem value=\"high\">High</SelectItem>\n                    <SelectItem value=\"critical\">Critical</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div>\n                <Label htmlFor=\"impact\">Impact (1-5)</Label>\n                <Input\n                  id=\"impact\"\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"5\"\n                  value={newRisk.impact}\n                  onChange={(e) => setNewRisk({ ...newRisk, impact: parseInt(e.target.value) || 3 })}\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"probability\">Probability (1-5)</Label>\n                <Input\n                  id=\"probability\"\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"5\"\n                  value={newRisk.probability}\n                  onChange={(e) => setNewRisk({ ...newRisk, probability: parseInt(e.target.value) || 3 })}\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"category\">PMP Category</Label>\n                <Select value={newRisk.pmpCategory} onValueChange={(value: any) => setNewRisk({ ...newRisk, pmpCategory: value })}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Select category\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"scope\">Scope</SelectItem>\n                    <SelectItem value=\"schedule\">Schedule</SelectItem>\n                    <SelectItem value=\"cost\">Cost</SelectItem>\n                    <SelectItem value=\"quality\">Quality</SelectItem>\n                    <SelectItem value=\"resources\">Resources</SelectItem>\n                    <SelectItem value=\"communication\">Communication</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n\n            <div>\n              <Label htmlFor=\"mitigation\">Mitigation Plan</Label>\n              <Textarea\n                id=\"mitigation\"\n                value={newRisk.mitigationPlan}\n                onChange={(e) => setNewRisk({ ...newRisk, mitigationPlan: e.target.value })}\n                placeholder=\"Describe how this risk will be mitigated\"\n                rows={2}\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button variant=\"outline\" onClick={() => setShowAddRiskModal(false)}>\n                Cancel\n              </Button>\n              <Button onClick={handleAddRisk} disabled={addRiskMutation.isPending}>\n                {addRiskMutation.isPending ? \"Creating...\" : \"Create Risk\"}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Risk Details Modal */}\n      <Dialog open={showDetailsModal} onOpenChange={setShowDetailsModal}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>Risk Details</DialogTitle>\n          </DialogHeader>\n          {selectedRisk && (\n            <div className=\"space-y-4\">\n              <div>\n                <h3 className=\"text-lg font-semibold mb-2\">{selectedRisk.title}</h3>\n                <p className=\"text-gray-600 dark:text-gray-400\">{selectedRisk.description}</p>\n              </div>\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label>Program</Label>\n                  <p className=\"font-medium\">{getProgramName(selectedRisk.programId)}</p>\n                </div>\n                <div>\n                  <Label>Status</Label>\n                  <Badge className={getStatusBadge(selectedRisk.status)}>\n                    {selectedRisk.status?.replace('_', ' ').toUpperCase()}\n                  </Badge>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-3 gap-4\">\n                <div>\n                  <Label>Severity</Label>\n                  <Badge className={getSeverityBadge(selectedRisk.severity)}>\n                    {selectedRisk.severity?.toUpperCase()}\n                  </Badge>\n                </div>\n                <div>\n                  <Label>Impact</Label>\n                  <p className=\"font-medium\">{selectedRisk.impact}/5</p>\n                </div>\n                <div>\n                  <Label>Probability</Label>\n                  <p className=\"font-medium\">{selectedRisk.probability}/5</p>\n                </div>\n              </div>\n\n              {selectedRisk.pmpCategory && (\n                <div>\n                  <Label>PMP Category</Label>\n                  <p className=\"font-medium capitalize\">{selectedRisk.pmpCategory}</p>\n                </div>\n              )}\n\n              {selectedRisk.mitigationPlan && (\n                <div>\n                  <Label>Mitigation Plan</Label>\n                  <p className=\"text-gray-600 dark:text-gray-400\">{selectedRisk.mitigationPlan}</p>\n                </div>\n              )}\n\n              <div className=\"grid grid-cols-2 gap-4 text-sm text-gray-500\">\n                {selectedRisk.createdAt && (\n                  <div>\n                    <Label>Created</Label>\n                    <p>{new Date(selectedRisk.createdAt).toLocaleString()}</p>\n                  </div>\n                )}\n                {selectedRisk.updatedAt && (\n                  <div>\n                    <Label>Updated</Label>\n                    <p>{new Date(selectedRisk.updatedAt).toLocaleString()}</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}","size_bytes":25245},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/stores/appStore.ts":{"content":"import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nexport type AppMode = 'test' | 'live';\n\ninterface ChatMessage {\n  id: string;\n  type: 'user' | 'ai';\n  content: string;\n  timestamp: Date;\n  responseType?: 'text' | 'image' | 'file' | 'action' | 'success' | 'error';\n  attachments?: {\n    type: 'image' | 'file';\n    url: string;\n    name: string;\n  }[];\n  actions?: {\n    type: 'navigate' | 'create' | 'update' | 'delete';\n    target: string;\n    data?: any;\n  }[];\n  createdItems?: {\n    type: 'program' | 'risk' | 'milestone' | 'adopter' | 'dependency';\n    id: string;\n    name: string;\n  }[];\n}\n\ninterface AppState {\n  mode: AppMode;\n  setMode: (mode: AppMode) => void;\n  isLoading: boolean;\n  setIsLoading: (loading: boolean) => void;\n  sidebarCollapsed: boolean;\n  setSidebarCollapsed: (collapsed: boolean) => void;\n  // Chat state persistence\n  chatMessages: ChatMessage[];\n  setChatMessages: (messages: ChatMessage[]) => void;\n  addChatMessage: (message: ChatMessage) => void;\n  clearChatHistory: () => void;\n}\n\nexport const useAppStore = create<AppState>()(\n  persist(\n    (set, get) => ({\n      mode: 'test', // Default to test mode\n      setMode: (mode) => set({ mode }),\n      isLoading: false,\n      setIsLoading: (isLoading) => set({ isLoading }),\n      sidebarCollapsed: false,\n      setSidebarCollapsed: (sidebarCollapsed) => set({ sidebarCollapsed }),\n      // Chat state persistence\n      chatMessages: [\n        {\n          id: '1',\n          type: 'ai',\n          content: 'Hello! I\\'m your AI assistant for program management. I can help you create programs, add risks, create milestones, analyze data, and perform any action you can do manually. Just tell me what you need!',\n          timestamp: new Date(),\n          responseType: 'text'\n        }\n      ],\n      setChatMessages: (messages) => set({ chatMessages: messages }),\n      addChatMessage: (message) => set((state) => ({ \n        chatMessages: [...state.chatMessages, message] \n      })),\n      clearChatHistory: () => set({ \n        chatMessages: [\n          {\n            id: '1',\n            type: 'ai',\n            content: 'Hello! I\\'m your AI assistant for program management. I can help you create programs, add risks, create milestones, analyze data, and perform any action you can do manually. Just tell me what you need!',\n            timestamp: new Date(),\n            responseType: 'text'\n          }\n        ] \n      }),\n    }),\n    {\n      name: 'tpm-app-storage',\n      partialize: (state) => ({ \n        mode: state.mode,\n        sidebarCollapsed: state.sidebarCollapsed,\n        chatMessages: state.chatMessages \n      }),\n    }\n  )\n);\n","size_bytes":2667},"client/src/components/ai/ChatInterface.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Send, Bot, User, Brain, Lightbulb } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface ChatMessage {\n  id: string;\n  message: string;\n  response: string;\n  timestamp: Date;\n  type: 'user' | 'ai';\n}\n\ninterface ChatResponse {\n  response: string;\n  suggestions?: string[];\n  context?: any;\n}\n\ninterface DailyBriefing {\n  summary: string;\n  alerts: Array<{\n    message: string;\n    type: string;\n    priority: string;\n  }>;\n  priorities: Array<{\n    title: string;\n    description: string;\n    urgency: string;\n  }>;\n}\n\ninterface Suggestion {\n  text: string;\n  action: () => void;\n}\n\nexport function ChatInterface() {\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [currentMessage, setCurrentMessage] = useState(\"\");\n  const [context, setContext] = useState<any>(null);\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n\n  const { data: briefing } = useQuery<DailyBriefing>({\n    queryKey: [\"/api/ai/daily-briefing\"],\n    refetchInterval: 1000 * 60 * 30, // Refresh every 30 minutes\n  });\n\n  const chatMutation = useMutation({\n    mutationFn: async (message: string): Promise<ChatResponse> => {\n      return await apiRequest(\"/api/ai/chat\", \"POST\", { message, context });\n    },\n    onSuccess: (data: ChatResponse, message) => {\n      const chatMessage: ChatMessage = {\n        id: Date.now().toString(),\n        message,\n        response: data.response,\n        timestamp: new Date(),\n        type: 'user'\n      };\n      setMessages(prev => [...prev, chatMessage]);\n    },\n    onError: (error) => {\n      toast({\n        title: \"Chat Error\",\n        description: \"Failed to process your message\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const handleSendMessage = () => {\n    if (currentMessage.trim()) {\n      chatMutation.mutate(currentMessage);\n      setCurrentMessage(\"\");\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const suggestions: Suggestion[] = [\n    {\n      text: \"What's my program status today?\",\n      action: () => setCurrentMessage(\"What's my program status today?\")\n    },\n    {\n      text: \"Show me critical risks\",\n      action: () => setCurrentMessage(\"Show me critical risks\")\n    },\n    {\n      text: \"Create a new milestone\",\n      action: () => setCurrentMessage(\"Create a new milestone\")\n    },\n    {\n      text: \"Analyze program gaps\",\n      action: () => setCurrentMessage(\"Analyze program gaps\")\n    },\n    {\n      text: \"Generate executive report\",\n      action: () => setCurrentMessage(\"Generate executive report\")\n    },\n    {\n      text: \"What should I prioritize?\",\n      action: () => setCurrentMessage(\"What should I prioritize?\")\n    }\n  ];\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Brain className=\"h-5 w-5\" />\n          AI Chat Assistant\n        </CardTitle>\n      </CardHeader>\n      \n      <CardContent className=\"flex flex-col h-[calc(100%-5rem)]\">\n        {/* Daily Briefing */}\n        {briefing && (\n          <Card className=\"mb-4 bg-blue-50 border-blue-200\">\n            <CardContent className=\"p-4\">\n              <h4 className=\"font-semibold flex items-center gap-2 mb-2\">\n                <Lightbulb className=\"h-4 w-4\" />\n                Daily Briefing\n              </h4>\n              <p className=\"text-sm mb-2\">{briefing.summary}</p>\n              \n              {briefing.alerts && briefing.alerts.length > 0 && (\n                <div className=\"mb-2\">\n                  <Badge variant=\"destructive\" className=\"text-xs mb-1\">Alerts</Badge>\n                  <ul className=\"text-xs space-y-1\">\n                    {briefing.alerts.slice(0, 2).map((alert, i: number) => (\n                      <li key={i}>• {alert.message}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n              \n              {briefing.priorities && briefing.priorities.length > 0 && (\n                <div>\n                  <Badge variant=\"default\" className=\"text-xs mb-1\">Top Priorities</Badge>\n                  <ul className=\"text-xs space-y-1\">\n                    {briefing.priorities.slice(0, 3).map((priority, i: number) => (\n                      <li key={i}>• {priority.title}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Chat Messages */}\n        <ScrollArea className=\"flex-1 mb-4\" ref={scrollRef}>\n          <div className=\"space-y-4 pr-4\">\n            {messages.length === 0 && (\n              <div className=\"text-center text-gray-500 py-8\">\n                <Bot className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n                <p className=\"mb-4\">I'm your AI TPM assistant. Ask me anything about your programs!</p>\n                \n                <div className=\"grid grid-cols-2 gap-2 max-w-md mx-auto\">\n                  {suggestions.slice(0, 4).map((suggestion, index) => (\n                    <Button\n                      key={index}\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"text-xs\"\n                      onClick={suggestion.action}\n                    >\n                      {suggestion.text}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            {messages.map((msg) => (\n              <div key={msg.id} className=\"space-y-2\">\n                {/* User Message */}\n                <div className=\"flex items-start gap-3\">\n                  <User className=\"h-6 w-6 mt-1 text-blue-500\" />\n                  <div className=\"flex-1\">\n                    <p className=\"text-sm\">{msg.message}</p>\n                    <Badge variant=\"outline\" className=\"text-xs mt-1\">\n                      {msg.timestamp.toLocaleTimeString()}\n                    </Badge>\n                  </div>\n                </div>\n                \n                {/* AI Response */}\n                <div className=\"flex items-start gap-3 ml-4\">\n                  <Bot className=\"h-6 w-6 mt-1 text-green-500\" />\n                  <div className=\"flex-1\">\n                    <p className=\"text-sm whitespace-pre-wrap\">{msg.response}</p>\n                  </div>\n                </div>\n              </div>\n            ))}\n            \n            {chatMutation.isPending && (\n              <div className=\"flex items-start gap-3\">\n                <Bot className=\"h-6 w-6 mt-1 text-green-500\" />\n                <div className=\"flex-1\">\n                  <div className=\"flex space-x-1\">\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]\"></div>\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]\"></div>\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n\n        {/* Quick Suggestions */}\n        {messages.length === 0 && (\n          <div className=\"mb-3\">\n            <p className=\"text-xs text-gray-500 mb-2\">Quick actions:</p>\n            <div className=\"flex flex-wrap gap-1\">\n              {suggestions.slice(4).map((suggestion, index) => (\n                <Button\n                  key={index}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"text-xs h-6\"\n                  onClick={suggestion.action}\n                >\n                  {suggestion.text}\n                </Button>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Message Input */}\n        <div className=\"flex gap-2\">\n          <Textarea\n            placeholder=\"Ask me about your programs, risks, milestones...\"\n            value={currentMessage}\n            onChange={(e) => setCurrentMessage(e.target.value)}\n            onKeyPress={handleKeyPress}\n            className=\"resize-none\"\n            rows={2}\n          />\n          <Button\n            onClick={handleSendMessage}\n            disabled={!currentMessage.trim() || chatMutation.isPending}\n            className=\"self-end\"\n          >\n            <Send className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":9093},"client/src/components/ai/VoiceInterface.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Mic, MicOff, Send, Bot, User, Volume2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\n// Global types for Speech Recognition\ndeclare global {\n  interface Window {\n    SpeechRecognition: any;\n    webkitSpeechRecognition: any;\n  }\n}\n\ninterface SpeechRecognition extends EventTarget {\n  continuous: boolean;\n  interimResults: boolean;\n  lang: string;\n  onresult: (event: SpeechRecognitionEvent) => void;\n  onerror: (event: SpeechRecognitionErrorEvent) => void;\n  onend: () => void;\n  start(): void;\n  stop(): void;\n}\n\ninterface SpeechRecognitionEvent extends Event {\n  results: SpeechRecognitionResultList;\n  resultIndex: number;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n  error: string;\n  message: string;\n}\n\ninterface SpeechRecognitionResultList {\n  length: number;\n  item(index: number): SpeechRecognitionResult;\n  [index: number]: SpeechRecognitionResult;\n}\n\ninterface SpeechRecognitionResult {\n  length: number;\n  item(index: number): SpeechRecognitionAlternative;\n  [index: number]: SpeechRecognitionAlternative;\n  isFinal: boolean;\n}\n\ninterface SpeechRecognitionAlternative {\n  transcript: string;\n  confidence: number;\n}\n\ninterface VoiceCommand {\n  id: string;\n  input: string;\n  response: VoiceCommandResponse;\n  timestamp: Date;\n  success: boolean;\n}\n\ninterface VoiceCommandResponse {\n  success: boolean;\n  message: string;\n  action?: string;\n  data?: any;\n  followUp?: string[];\n}\n\nexport function VoiceInterface() {\n  const [isListening, setIsListening] = useState(false);\n  const [commands, setCommands] = useState<VoiceCommand[]>([]);\n  const [currentInput, setCurrentInput] = useState(\"\");\n  const [isRecording, setIsRecording] = useState(false);\n  const recognitionRef = useRef<SpeechRecognition | null>(null);\n  const { toast } = useToast();\n\n  const voiceCommandMutation = useMutation({\n    mutationFn: async (input: string): Promise<VoiceCommandResponse> => {\n      return await apiRequest(\"/api/ai/voice-command\", \"POST\", { input });\n    },\n    onSuccess: (data: VoiceCommandResponse, input) => {\n      const command: VoiceCommand = {\n        id: Date.now().toString(),\n        input,\n        response: data,\n        timestamp: new Date(),\n        success: data.success\n      };\n      setCommands(prev => [command, ...prev]);\n      \n      if (data.success) {\n        toast({\n          title: \"Command Executed\",\n          description: data.message,\n        });\n        \n        // Speak the response\n        speakText(data.message);\n      } else {\n        toast({\n          title: \"Command Failed\",\n          description: data.message,\n          variant: \"destructive\"\n        });\n      }\n    },\n    onError: (error) => {\n      toast({\n        title: \"Voice Command Error\",\n        description: \"Failed to process voice command\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      const recognition = new SpeechRecognition();\n      recognitionRef.current = recognition;\n      \n      if (recognitionRef.current) {\n        recognitionRef.current.continuous = false;\n        recognitionRef.current.interimResults = false;\n        recognitionRef.current.lang = 'en-US';\n\n        recognitionRef.current.onresult = (event: SpeechRecognitionEvent) => {\n          const transcript = event.results[0][0].transcript;\n          setCurrentInput(transcript);\n          handleVoiceCommand(transcript);\n        };\n\n        recognitionRef.current.onend = () => {\n          setIsListening(false);\n          setIsRecording(false);\n        };\n\n        recognitionRef.current.onerror = (event: SpeechRecognitionErrorEvent) => {\n          console.error('Speech recognition error:', event.error);\n          setIsListening(false);\n          setIsRecording(false);\n          toast({\n            title: \"Voice Recognition Error\",\n            description: \"Unable to process voice input\",\n            variant: \"destructive\"\n          });\n        };\n      }\n    }\n  }, []);\n\n  const startListening = () => {\n    if (recognitionRef.current) {\n      setIsListening(true);\n      setIsRecording(true);\n      recognitionRef.current.start();\n    } else {\n      toast({\n        title: \"Voice Recognition Unavailable\",\n        description: \"Voice recognition is not supported in this browser\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const stopListening = () => {\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n    }\n    setIsListening(false);\n    setIsRecording(false);\n  };\n\n  const handleVoiceCommand = (input: string) => {\n    if (input.trim()) {\n      voiceCommandMutation.mutate(input);\n    }\n  };\n\n  const handleTextCommand = () => {\n    if (currentInput.trim()) {\n      handleVoiceCommand(currentInput);\n      setCurrentInput(\"\");\n    }\n  };\n\n  const speakText = (text: string) => {\n    if ('speechSynthesis' in window) {\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.rate = 0.9;\n      utterance.pitch = 1;\n      speechSynthesis.speak(utterance);\n    }\n  };\n\n  return (\n    <Card className=\"h-full\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <Bot className=\"h-5 w-5\" />\n          AI Voice Interface\n        </CardTitle>\n      </CardHeader>\n      \n      <CardContent className=\"space-y-4\">\n        {/* Voice Input Controls */}\n        <div className=\"flex gap-2\">\n          <div className=\"flex-1 relative\">\n            <input\n              type=\"text\"\n              placeholder=\"Say something or type a command...\"\n              value={currentInput}\n              onChange={(e) => setCurrentInput(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && handleTextCommand()}\n              className=\"w-full px-3 py-2 border rounded-lg pr-10\"\n            />\n            <Button\n              size=\"sm\"\n              variant=\"ghost\"\n              className=\"absolute right-1 top-1\"\n              onClick={handleTextCommand}\n              disabled={!currentInput.trim() || voiceCommandMutation.isPending}\n            >\n              <Send className=\"h-4 w-4\" />\n            </Button>\n          </div>\n          \n          <Button\n            variant={isListening ? \"destructive\" : \"default\"}\n            onClick={isListening ? stopListening : startListening}\n            disabled={voiceCommandMutation.isPending}\n            className=\"px-3\"\n          >\n            {isListening ? <MicOff className=\"h-4 w-4\" /> : <Mic className=\"h-4 w-4\" />}\n          </Button>\n        </div>\n\n        {isRecording && (\n          <div className=\"text-center p-4 bg-red-50 rounded-lg border border-red-200\">\n            <div className=\"flex items-center justify-center gap-2 text-red-600\">\n              <div className=\"w-2 h-2 bg-red-500 rounded-full animate-pulse\"></div>\n              <span>Listening...</span>\n            </div>\n          </div>\n        )}\n\n        {/* Command History */}\n        <ScrollArea className=\"h-96\">\n          <div className=\"space-y-3\">\n            {commands.map((command) => (\n              <div key={command.id} className=\"space-y-2\">\n                {/* User Input */}\n                <div className=\"flex items-start gap-2\">\n                  <User className=\"h-4 w-4 mt-1 text-blue-500\" />\n                  <div className=\"flex-1\">\n                    <p className=\"text-sm\">{command.input}</p>\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {command.timestamp.toLocaleTimeString()}\n                    </Badge>\n                  </div>\n                </div>\n                \n                {/* AI Response */}\n                <div className=\"flex items-start gap-2 ml-4\">\n                  <Bot className=\"h-4 w-4 mt-1 text-green-500\" />\n                  <div className=\"flex-1\">\n                    <p className={`text-sm ${command.success ? 'text-green-700' : 'text-red-700'}`}>\n                      {command.response.message}\n                    </p>\n                    \n                    {command.response.followUp && command.response.followUp.length > 0 && (\n                      <div className=\"mt-2 space-y-1\">\n                        <p className=\"text-xs text-gray-500\">Suggestions:</p>\n                        {command.response.followUp.map((suggestion: string, index: number) => (\n                          <Button\n                            key={index}\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"text-xs mr-2 mb-1\"\n                            onClick={() => handleVoiceCommand(suggestion)}\n                          >\n                            {suggestion}\n                          </Button>\n                        ))}\n                      </div>\n                    )}\n                    \n                    {command.response.data && (\n                      <div className=\"mt-2 p-2 bg-gray-50 rounded text-xs\">\n                        <pre className=\"text-xs overflow-x-auto\">\n                          {JSON.stringify(command.response.data, null, 2)}\n                        </pre>\n                      </div>\n                    )}\n                    \n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <Badge variant={command.success ? \"default\" : \"destructive\"} className=\"text-xs\">\n                        {command.success ? \"Success\" : \"Failed\"}\n                      </Badge>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => speakText(command.response.message)}\n                        className=\"h-6 w-6 p-0\"\n                      >\n                        <Volume2 className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n                \n                <hr className=\"my-3\" />\n              </div>\n            ))}\n            \n            {commands.length === 0 && (\n              <div className=\"text-center text-gray-500 py-8\">\n                <Bot className=\"h-12 w-12 mx-auto mb-2 text-gray-300\" />\n                <p>Start by saying something like:</p>\n                <div className=\"mt-2 space-y-1 text-sm\">\n                  <p>\"Create a new program called API Migration\"</p>\n                  <p>\"Analyze my current programs\"</p>\n                  <p>\"What risks should I be worried about?\"</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":11084},"client/src/components/dashboard/AIInsights.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Brain, Lightbulb, Users, TrendingUp } from \"lucide-react\";\n\ninterface AIInsightsProps {\n  programId?: string;\n}\n\nexport function AIInsights({ programId }: AIInsightsProps) {\n  const { data: insights, isLoading } = useQuery({\n    queryKey: programId ? [\"/api/ai/insights\", { programId }] : [\"/api/ai/insights\"],\n    enabled: false, // Manual trigger for AI insights\n  });\n\n  const handleGenerateReport = async () => {\n    try {\n      // This would trigger report generation\n      console.log(\"Generating AI report...\");\n    } catch (error) {\n      console.error(\"Error generating report:\", error);\n    }\n  };\n\n  const handleRunScenarioAnalysis = async () => {\n    try {\n      // This would run scenario analysis\n      console.log(\"Running scenario analysis...\");\n    } catch (error) {\n      console.error(\"Error running scenario analysis:\", error);\n    }\n  };\n\n  // Default insights for demo - in production these would come from AI service\n  const defaultInsights = {\n    riskPrediction: \"Based on current velocity, the \\\"API Gateway Migration\\\" milestone has a 78% chance of delay. Consider adding 2 more engineers or extending deadline by 1 week.\",\n    adopterSupport: \"Data Analytics Team shows concerning progress. Recommend immediate escalation and technical deep-dive session with platform team.\",\n    programHealth: \"Overall program health score is 84%. Top performing area: Mobile integration. Area needing attention: Legacy system migration.\"\n  };\n\n  const displayInsights = insights || defaultInsights;\n\n  return (\n    <Card className=\"gradient-purple-blue border border-purple-200\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center\">\n            <Brain className=\"text-purple-500\" size={20} />\n          </div>\n          <div className=\"flex-1\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">AI Insights & Recommendations</h3>\n            \n            {isLoading ? (\n              <div className=\"space-y-3\">\n                <div className=\"h-4 bg-gray-200 rounded animate-pulse\"></div>\n                <div className=\"h-4 bg-gray-200 rounded animate-pulse\"></div>\n                <div className=\"h-4 bg-gray-200 rounded animate-pulse\"></div>\n              </div>\n            ) : (\n              <div className=\"space-y-3 text-sm text-gray-700\">\n                <div className=\"flex items-start gap-2\">\n                  <Lightbulb className=\"text-yellow-500 mt-1 flex-shrink-0\" size={16} />\n                  <p>\n                    <strong>Risk Prediction:</strong> {displayInsights.riskPrediction}\n                  </p>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <Users className=\"text-blue-500 mt-1 flex-shrink-0\" size={16} />\n                  <p>\n                    <strong>Adopter Support:</strong> {displayInsights.adopterSupport}\n                  </p>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <TrendingUp className=\"text-green-500 mt-1 flex-shrink-0\" size={16} />\n                  <p>\n                    <strong>Program Health:</strong> {displayInsights.programHealth}\n                  </p>\n                </div>\n              </div>\n            )}\n            \n            <div className=\"mt-4 flex gap-2\">\n              <Button \n                onClick={handleGenerateReport}\n                className=\"bg-purple-500 text-white hover:bg-purple-600\"\n              >\n                Generate Report\n              </Button>\n              <Button \n                variant=\"outline\" \n                onClick={handleRunScenarioAnalysis}\n                className=\"bg-white text-purple-600 border-purple-200 hover:bg-purple-50\"\n              >\n                Run Scenario Analysis\n              </Button>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4150},"client/src/components/dashboard/ActiveRisksTable.tsx":{"content":"import { Card, CardHeader, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { ExternalLink } from \"lucide-react\";\n\ninterface ActiveRisksTableProps {\n  programId?: string;\n}\n\nexport function ActiveRisksTable({ programId }: ActiveRisksTableProps) {\n  const { data: risks = [] } = useQuery({\n    queryKey: programId ? [\"/api/risks\", { programId }] : [\"/api/risks\"],\n  });\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity?.toLowerCase()) {\n      case \"critical\": return \"bg-red-100 text-red-800\";\n      case \"high\": return \"bg-red-100 text-red-800\";\n      case \"medium\": return \"bg-yellow-100 text-yellow-800\";\n      case \"low\": return \"bg-green-100 text-green-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case \"resolved\": return \"bg-green-100 text-green-800\";\n      case \"mitigated\": return \"bg-green-100 text-green-800\";\n      case \"in_progress\": return \"bg-yellow-100 text-yellow-800\";\n      case \"identified\": return \"bg-blue-100 text-blue-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  // Show only active risks (not resolved)\n  const activeRisks = risks.filter((risk: any) => \n    risk.status !== \"resolved\" && risk.status !== \"mitigated\"\n  ).slice(0, 5); // Limit to 5 for dashboard view\n\n  const handlePushToJira = async () => {\n    // This would integrate with JIRA API in live mode\n    console.log(\"Pushing risks to JIRA...\");\n  };\n\n  return (\n    <Card className=\"border border-gray-200\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">Active Risks</h3>\n          <div className=\"flex items-center gap-2\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={handlePushToJira}\n              className=\"text-primary-500 hover:text-primary-600 text-sm\"\n            >\n              <ExternalLink size={14} className=\"mr-1\" />\n              Push to JIRA\n            </Button>\n            <Button size=\"sm\" className=\"bg-primary-500 text-white hover:bg-primary-600\">\n              Add Risk\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className=\"p-0\">\n        {activeRisks.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <p>No active risks found</p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Risk\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Severity\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Owner\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {activeRisks.map((risk: any) => (\n                  <tr key={risk.id}>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900\">{risk.title}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          {risk.description?.substring(0, 50)}\n                          {risk.description?.length > 50 ? \"...\" : \"\"}\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <Badge className={`${getSeverityColor(risk.severity)} font-semibold capitalize`}>\n                        {risk.severity || \"medium\"}\n                      </Badge>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {risk.owner?.name || \"Unassigned\"}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <Badge className={`${getStatusColor(risk.status)} font-semibold capitalize`}>\n                        {risk.status?.replace(\"_\", \" \") || \"identified\"}\n                      </Badge>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":5015},"client/src/components/dashboard/AdopterDashboard.tsx":{"content":"import { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Smartphone, Globe, Server, Settings, MessageCircle, Calendar } from \"lucide-react\";\n\ninterface AdopterDashboardProps {\n  programId?: string;\n}\n\nexport function AdopterDashboard({ programId }: AdopterDashboardProps) {\n  const { data: adopters = [] } = useQuery({\n    queryKey: programId ? [\"/api/adopters\", { programId }] : [\"/api/adopters\"],\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case \"completed\": \n      case \"ready\": return \"text-success\";\n      case \"in_progress\": return \"text-warning\";\n      case \"blocked\": return \"text-danger\";\n      default: return \"text-gray-500\";\n    }\n  };\n\n  const getIconForTeam = (teamName: string) => {\n    const name = teamName.toLowerCase();\n    if (name.includes(\"mobile\")) return Smartphone;\n    if (name.includes(\"web\") || name.includes(\"frontend\")) return Globe;\n    if (name.includes(\"data\") || name.includes(\"analytics\")) return Server;\n    return Settings;\n  };\n\n  const getIconColor = (readinessScore: number) => {\n    if (readinessScore >= 85) return \"bg-green-100 text-success\";\n    if (readinessScore >= 60) return \"bg-warning-100 text-warning\";\n    return \"bg-red-100 text-danger\";\n  };\n\n  const formatReadinessScore = (score: number | null) => {\n    return score ? `${score}%` : \"0%\";\n  };\n\n  const getStatusText = (status: string) => {\n    switch (status?.toLowerCase()) {\n      case \"ready\": return \"Ready\";\n      case \"in_progress\": return \"In Progress\";\n      case \"blocked\": return \"Blocked\";\n      case \"completed\": return \"Complete\";\n      default: return \"Not Started\";\n    }\n  };\n\n  // Limit to 4 adopters for dashboard view\n  const displayedAdopters = adopters.slice(0, 4);\n\n  return (\n    <Card className=\"border border-gray-200\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg font-semibold text-gray-900\">Adopter Dashboard</CardTitle>\n          <Button variant=\"ghost\" size=\"sm\" className=\"text-primary-500 hover:text-primary-600\">\n            View All Teams\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        {displayedAdopters.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            <p>No adopter teams found</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {displayedAdopters.map((adopter: any) => {\n              const IconComponent = getIconForTeam(adopter.teamName);\n              const readinessScore = adopter.readinessScore || 0;\n              \n              return (\n                <div key={adopter.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${getIconColor(readinessScore)}`}>\n                      <IconComponent size={20} />\n                    </div>\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-900\">{adopter.teamName}</h4>\n                      <p className=\"text-xs text-gray-500\">\n                        {adopter.description || \"Team integration progress\"}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className={`text-sm font-semibold ${getStatusColor(adopter.status)}`}>\n                      {formatReadinessScore(readinessScore)}\n                    </div>\n                    <div className=\"text-xs text-gray-500\">\n                      {getStatusText(adopter.status)}\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n\n            {/* Quick Actions */}\n            <div className=\"mt-6 pt-6 border-t border-gray-200\">\n              <div className=\"flex gap-2\">\n                <Button className=\"flex-1 bg-primary-500 text-white hover:bg-primary-600\">\n                  <MessageCircle size={14} className=\"mr-1\" />\n                  Send Update\n                </Button>\n                <Button variant=\"outline\" className=\"flex-1\">\n                  <Calendar size={14} className=\"mr-1\" />\n                  Schedule Check-in\n                </Button>\n              </div>\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4582},"client/src/components/dashboard/MetricsCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { LucideIcon, TrendingUp, TrendingDown } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\n\ninterface MetricsCardProps {\n  title: string;\n  value: string | number;\n  change?: string;\n  changeType?: \"increase\" | \"decrease\" | \"neutral\";\n  icon: LucideIcon;\n  iconColor: string;\n  onClick?: () => void;\n  navigateTo?: string;\n}\n\nexport function MetricsCard({ \n  title, \n  value, \n  change, \n  changeType = \"neutral\", \n  icon: Icon,\n  iconColor,\n  onClick,\n  navigateTo\n}: MetricsCardProps) {\n  const [, setLocation] = useLocation();\n\n  const handleClick = () => {\n    if (navigateTo) {\n      setLocation(navigateTo);\n    } else if (onClick) {\n      onClick();\n    }\n  };\n  const getTrendIcon = () => {\n    if (changeType === \"increase\") return TrendingUp;\n    if (changeType === \"decrease\") return TrendingDown;\n    return null;\n  };\n\n  const getTrendColor = () => {\n    if (changeType === \"increase\") return \"text-success\";\n    if (changeType === \"decrease\") return \"text-danger\";\n    return \"text-gray-500\";\n  };\n\n  const TrendIcon = getTrendIcon();\n\n  return (\n    <Card \n      className={`border border-gray-200 ${(onClick || navigateTo) ? 'cursor-pointer hover:shadow-md hover:border-blue-300 transition-all duration-200' : ''}`}\n      onClick={handleClick}\n    >\n      <CardContent className=\"p-2\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className=\"text-xs text-gray-600 mb-0.5\">{title}</p>\n            <p className=\"text-base font-bold text-gray-900\">{value}</p>\n            {change && (\n              <p className={`text-xs mt-0.5 flex items-center gap-1 ${getTrendColor()}`}>\n                {TrendIcon && <TrendIcon size={8} />}\n                {change}\n              </p>\n            )}\n          </div>\n          <div className={`w-6 h-6 ${iconColor} rounded-md flex items-center justify-center`}>\n            <Icon size={12} className=\"text-white\" />\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2059},"client/src/components/dashboard/ProgramTimeline.tsx":{"content":"import { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\n\ninterface ProgramTimelineProps {\n  programId?: string;\n}\n\nexport function ProgramTimeline({ programId }: ProgramTimelineProps) {\n  const { data: milestones = [] } = useQuery({\n    queryKey: programId ? [\"/api/milestones\", { programId }] : [\"/api/milestones\"],\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\": return \"bg-success\";\n      case \"in_progress\": return \"bg-warning\";\n      case \"at_risk\": return \"bg-danger\";\n      default: return \"bg-gray-300\";\n    }\n  };\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return \"\";\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n    });\n  };\n\n  // Sort milestones by due date\n  const sortedMilestones = [...milestones]\n    .sort((a, b) => new Date(a.dueDate || 0).getTime() - new Date(b.dueDate || 0).getTime())\n    .slice(0, 4); // Show only first 4 milestones\n\n  return (\n    <Card className=\"border border-gray-200\">\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg font-semibold text-gray-900\">Program Timeline</CardTitle>\n          <Button variant=\"ghost\" size=\"sm\" className=\"text-primary-500 hover:text-primary-600\">\n            View Full Roadmap\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          {sortedMilestones.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500\">\n              <p>No milestones found</p>\n            </div>\n          ) : (\n            sortedMilestones.map((milestone: any, index) => (\n              <div key={milestone.id} className=\"flex items-start gap-4\">\n                <div className=\"flex flex-col items-center\">\n                  <div className={`w-3 h-3 ${getStatusColor(milestone.status)} rounded-full`} />\n                  {index < sortedMilestones.length - 1 && (\n                    <div className=\"w-px h-8 bg-gray-200\" />\n                  )}\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between\">\n                    <h4 className=\"text-sm font-medium text-gray-900\">{milestone.title}</h4>\n                    <span className=\"text-xs text-gray-500\">\n                      {formatDate(milestone.dueDate)}\n                    </span>\n                  </div>\n                  <p className=\"text-xs text-gray-600\">\n                    {milestone.description || \"No description available\"}\n                  </p>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2891},"client/src/components/dashboard/ProgramsList.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { MissingComponentsModal } from \"@/components/modals/MissingComponentsModal\";\nimport { \n  ChartGantt, \n  AlertTriangle, \n  Users, \n  Calendar,\n  Eye,\n  MoreVertical\n} from \"lucide-react\";\nimport type { Program } from \"@shared/schema\";\n\nexport function ProgramsList() {\n  const { toast } = useToast();\n  const [selectedProgram, setSelectedProgram] = useState<Program | null>(null);\n  const [analysisData, setAnalysisData] = useState<any>(null);\n  const [showMissingComponentsModal, setShowMissingComponentsModal] = useState(false);\n\n  const { data: programs = [], isLoading } = useQuery<Program[]>({\n    queryKey: [\"/api/programs\"],\n  });\n\n  const analyzeProgramMutation = useMutation({\n    mutationFn: async (programId: string) => {\n      return await apiRequest(\"/api/analyze-program\", \"POST\", { programId });\n    },\n    onSuccess: (data: any, programId: string) => {\n      const program = programs.find(p => p.id === programId);\n      const analysis = data.analysis?.[0];\n      if (analysis && program) {\n        // Set data for the modal\n        setSelectedProgram(program);\n        setAnalysisData(analysis);\n        setShowMissingComponentsModal(true);\n        \n        // Also show toast for immediate feedback\n        toast({\n          title: `${program.name} Analysis Complete`,\n          description: `Found ${analysis.riskAlerts?.length || 0} missing components. Opening detailed view...`,\n          variant: analysis.riskAlerts?.length > 0 ? \"destructive\" : \"default\",\n        });\n      }\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Analysis Failed\",\n        description: \"Unable to analyze program at this time\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"active\": return \"bg-green-100 text-green-800\";\n      case \"planning\": return \"bg-blue-100 text-blue-800\";\n      case \"on-hold\": return \"bg-yellow-100 text-yellow-800\";\n      case \"completed\": return \"bg-gray-100 text-gray-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const formatDate = (dateString: string | null) => {\n    if (!dateString) return \"Not set\";\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\n      month: \"short\",\n      day: \"numeric\",\n      year: \"numeric\"\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <ChartGantt className=\"h-5 w-5\" />\n            Programs Overview\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {Array.from({ length: 3 }).map((_, i) => (\n              <div key={i} className=\"animate-pulse\">\n                <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <>\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <ChartGantt className=\"h-5 w-5\" />\n          Programs Overview ({programs.length})\n        </CardTitle>\n      </CardHeader>\n      <CardContent>\n        {programs.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            <ChartGantt className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>No programs found</p>\n            <p className=\"text-sm\">Create your first program using the chat interface</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {programs.map((program) => (\n              <div key={program.id} className=\"border rounded-lg p-4 hover:bg-gray-50 transition-colors\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <h3 className=\"font-semibold text-lg\">{program.name}</h3>\n                      <Badge className={getStatusColor(program.status)}>\n                        {program.status}\n                      </Badge>\n                    </div>\n                    \n                    <p className=\"text-gray-600 mb-3 text-sm\">\n                      {program.description || \"No description provided\"}\n                    </p>\n                    \n                    <div className=\"flex items-center gap-6 text-sm text-gray-500\">\n                      <div className=\"flex items-center gap-1\">\n                        <Calendar className=\"h-4 w-4\" />\n                        <span>Start: {program.startDate ? formatDate(program.startDate.toString()) : \"Not set\"}</span>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <Calendar className=\"h-4 w-4\" />\n                        <span>End: {program.endDate ? formatDate(program.endDate.toString()) : \"Not set\"}</span>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <Users className=\"h-4 w-4\" />\n                        <span>Owner: {program.ownerId || \"Unassigned\"}</span>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => analyzeProgramMutation.mutate(program.id)}\n                      disabled={analyzeProgramMutation.isPending}\n                    >\n                      <AlertTriangle className=\"h-4 w-4 mr-1\" />\n                      {analyzeProgramMutation.isPending ? \"Analyzing...\" : \"Check Risks\"}\n                    </Button>\n                    <Button variant=\"ghost\" size=\"sm\">\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n\n    {/* Missing Components Modal */}\n    {selectedProgram && analysisData && (\n      <MissingComponentsModal\n        open={showMissingComponentsModal}\n        onClose={() => {\n          setShowMissingComponentsModal(false);\n          setSelectedProgram(null);\n          setAnalysisData(null);\n        }}\n        program={selectedProgram}\n        analysis={analysisData}\n      />\n    )}\n  </>\n  );\n}","size_bytes":6869},"client/src/components/dashboard/RiskHeatmap.tsx":{"content":"import { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\n\ninterface RiskHeatmapProps {\n  programId?: string;\n}\n\nexport function RiskHeatmap({ programId }: RiskHeatmapProps) {\n  const { data: risks = [] } = useQuery({\n    queryKey: programId ? [\"/api/risks\", { programId }] : [\"/api/risks\"],\n  });\n\n  // Calculate risk matrix data\n  const getRiskMatrix = () => {\n    const matrix = {\n      high: { low: 0, medium: 0, high: 0, critical: 0 },\n      medium: { low: 0, medium: 0, high: 0, critical: 0 },\n      low: { low: 0, medium: 0, high: 0, critical: 0 },\n    };\n\n    risks.forEach((risk: any) => {\n      const probability = risk.probability || 2; // default to medium\n      const impact = risk.impact || 2; // default to medium\n      \n      const probLevel = probability <= 1 ? 'low' : probability <= 3 ? 'medium' : 'high';\n      const impactLevel = impact <= 1 ? 'low' : impact <= 2 ? 'medium' : impact <= 3 ? 'high' : 'critical';\n      \n      matrix[probLevel as keyof typeof matrix][impactLevel as keyof typeof matrix.high]++;\n    });\n\n    return matrix;\n  };\n\n  const matrix = getRiskMatrix();\n\n  const getCellColor = (count: number) => {\n    if (count === 0) return \"bg-gray-100\";\n    if (count <= 2) return \"bg-success text-white\";\n    if (count <= 4) return \"bg-warning\";\n    return \"bg-danger text-white\";\n  };\n\n  return (\n    <Card className=\"border border-gray-200\">\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg font-semibold text-gray-900\">Risk Heatmap</CardTitle>\n          <Button variant=\"ghost\" size=\"sm\" className=\"text-primary-500 hover:text-primary-600\">\n            View All\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-4\">\n          <div className=\"flex justify-between text-xs text-gray-500 mb-2\">\n            <span>Impact →</span>\n            <span>Low</span>\n            <span>Medium</span>\n            <span>High</span>\n            <span>Critical</span>\n          </div>\n          \n          {/* Risk Matrix Grid */}\n          <div className=\"space-y-2\">\n            <div className=\"grid grid-cols-5 gap-2\">\n              <div className=\"text-xs text-gray-500 flex items-center\">High</div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.high.low)}`}>\n                {matrix.high.low || \"\"}\n              </div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.high.medium)}`}>\n                {matrix.high.medium || \"\"}\n              </div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.high.high)}`}>\n                {matrix.high.high || \"\"}\n              </div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.high.critical)}`}>\n                {matrix.high.critical || \"\"}\n              </div>\n            </div>\n            \n            <div className=\"grid grid-cols-5 gap-2\">\n              <div className=\"text-xs text-gray-500 flex items-center\">Med</div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.medium.low)}`}>\n                {matrix.medium.low || \"\"}\n              </div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.medium.medium)}`}>\n                {matrix.medium.medium || \"\"}\n              </div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.medium.high)}`}>\n                {matrix.medium.high || \"\"}\n              </div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.medium.critical)}`}>\n                {matrix.medium.critical || \"\"}\n              </div>\n            </div>\n            \n            <div className=\"grid grid-cols-5 gap-2\">\n              <div className=\"text-xs text-gray-500 flex items-center\">Low</div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.low.low)}`}>\n                {matrix.low.low || \"\"}\n              </div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.low.medium)}`}>\n                {matrix.low.medium || \"\"}\n              </div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.low.high)}`}>\n                {matrix.low.high || \"\"}\n              </div>\n              <div className={`h-12 rounded flex items-center justify-center text-xs font-medium ${getCellColor(matrix.low.critical)}`}>\n                {matrix.low.critical || \"\"}\n              </div>\n            </div>\n          </div>\n\n          {/* Risk Legend */}\n          <div className=\"flex items-center justify-center gap-4 mt-4 text-xs\">\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-3 h-3 bg-success rounded\"></div>\n              <span>Low</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-3 h-3 bg-warning rounded\"></div>\n              <span>Medium</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <div className=\"w-3 h-3 bg-danger rounded\"></div>\n              <span>High</span>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":5826},"client/src/components/layout/Header.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Plus, FlaskConical } from \"lucide-react\";\nimport { useMode } from \"@/hooks/useMode\";\n\ninterface HeaderProps {\n  title: string;\n  subtitle: string;\n  showNewButton?: boolean;\n  onNewClick?: () => void;\n  newButtonText?: string;\n}\n\nexport function Header({ title, subtitle, showNewButton = true, onNewClick, newButtonText = \"New Program\" }: HeaderProps) {\n  const { isTestMode } = useMode();\n\n  return (\n    <header className=\"bg-white shadow-sm border-b border-gray-200 px-6 py-4\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">{title}</h2>\n          <p className=\"text-sm text-gray-500\">{subtitle}</p>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {/* Test Mode Indicator */}\n          {isTestMode && (\n            <div className=\"flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-700 rounded-full\">\n              <FlaskConical size={14} />\n              <span className=\"text-sm font-medium\">Test Mode Active</span>\n            </div>\n          )}\n          {showNewButton && (\n            <Button \n              onClick={onNewClick}\n              className=\"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600\"\n            >\n              <Plus size={16} />\n              <span>{newButtonText}</span>\n            </Button>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":1504},"client/src/components/layout/Sidebar.tsx":{"content":"import { Link, useLocation } from \"wouter\";\nimport { useMode } from \"@/hooks/useMode\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  ChartGantt, \n  ClipboardList, \n  Flag, \n  AlertTriangle, \n  Users, \n  TrendingUp, \n  BarChart3,\n  Settings,\n  Activity,\n  Brain,\n  ChevronLeft,\n  ChevronRight\n} from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useState, useEffect } from \"react\";\n\nconst navigationItems = [\n  { path: \"/\", icon: Brain, label: \"AI Assistant\" },\n  { path: \"/dashboard\", icon: Activity, label: \"Dashboard\" },\n  { path: \"/milestones\", icon: Flag, label: \"Milestones\" },\n  { path: \"/risk-management\", icon: AlertTriangle, label: \"Risk Management\" },\n  { path: \"/dependencies\", icon: ChartGantt, label: \"Dependencies\" },\n  { path: \"/adopter-support\", icon: Users, label: \"Adopter Support\" },\n  { path: \"/escalations\", icon: TrendingUp, label: \"Escalations\" },\n  { path: \"/executive-reports\", icon: BarChart3, label: \"Executive Reports\" },\n  { path: \"/settings\", icon: Settings, label: \"Settings\" },\n];\n\nexport function Sidebar() {\n  const [location] = useLocation();\n  const { mode, toggleMode, isTestMode } = useMode();\n  const [isCollapsed, setIsCollapsed] = useState(() => {\n    // Check localStorage for saved collapse state\n    const saved = localStorage.getItem('sidebar-collapsed');\n    return saved ? JSON.parse(saved) : false;\n  });\n\n  // Save collapse state to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('sidebar-collapsed', JSON.stringify(isCollapsed));\n  }, [isCollapsed]);\n\n  const { data: integrations } = useQuery({\n    queryKey: [\"/api/integrations\"],\n    enabled: !isTestMode, // Only fetch in live mode\n  });\n\n  const getIntegrationStatus = (name: string) => {\n    if (isTestMode) {\n      // Mock statuses for test mode\n      const mockStatuses: Record<string, string> = {\n        jira: \"connected\",\n        smartsheet: \"connected\", \n        confluence: \"limited\",\n        slack: \"connected\",\n        teams: \"disconnected\"\n      };\n      return mockStatuses[name] || \"disconnected\";\n    }\n    \n    const integration = Array.isArray(integrations) ? integrations.find((i: any) => i.name === name) : undefined;\n    return integration?.status || \"disconnected\";\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"connected\": return \"bg-success\";\n      case \"limited\": return \"bg-warning\";\n      case \"error\": return \"bg-danger\";\n      default: return \"bg-gray-300\";\n    }\n  };\n\n  return (\n    <div className={`${isCollapsed ? 'w-16' : 'w-64'} bg-white shadow-lg flex flex-col h-full transition-all duration-300 relative`}>\n      {/* Collapse Toggle Button */}\n      <button\n        onClick={() => setIsCollapsed(!isCollapsed)}\n        className=\"absolute -right-3 top-6 z-10 w-6 h-6 bg-white border border-gray-300 rounded-full flex items-center justify-center shadow-md hover:shadow-lg transition-shadow\"\n      >\n        {isCollapsed ? (\n          <ChevronRight className=\"h-3 w-3 text-gray-600\" />\n        ) : (\n          <ChevronLeft className=\"h-3 w-3 text-gray-600\" />\n        )}\n      </button>\n\n      {/* Logo and Mode Toggle */}\n      <div className={`${isCollapsed ? 'p-3' : 'p-6'} border-b border-gray-200`}>\n        <div className={`flex items-center gap-3 mb-4 ${isCollapsed ? 'justify-center' : ''}`}>\n          <div className=\"w-10 h-10 bg-primary-500 rounded-lg flex items-center justify-center flex-shrink-0\">\n            <ChartGantt className=\"text-white text-lg\" size={20} />\n          </div>\n          {!isCollapsed && (\n            <div>\n              <h1 className=\"text-xl font-bold text-gray-900\">TPM Platform</h1>\n              <p className=\"text-sm text-gray-500\">Program Management</p>\n            </div>\n          )}\n        </div>\n        \n        {/* Mode Toggle */}\n        {!isCollapsed && (\n          <div className=\"flex items-center justify-between bg-gray-100 p-2 rounded-lg\">\n            <span className=\"text-sm font-medium text-gray-700\">Mode:</span>\n            <div className=\"flex bg-white rounded-md p-1\">\n              <Button\n                variant={isTestMode ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => !isTestMode && toggleMode()}\n                className={`px-3 py-1 text-sm font-medium ${\n                  isTestMode \n                    ? \"bg-primary-500 text-white\" \n                    : \"text-gray-600 hover:bg-gray-100\"\n                }`}\n              >\n                Test\n              </Button>\n              <Button\n                variant={!isTestMode ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => isTestMode && toggleMode()}\n                className={`px-3 py-1 text-sm font-medium ${\n                  !isTestMode \n                    ? \"bg-primary-500 text-white\" \n                    : \"text-gray-600 hover:bg-gray-100\"\n                }`}\n              >\n                Live\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Navigation Menu */}\n      <nav className={`flex-1 ${isCollapsed ? 'p-2' : 'p-4'}`}>\n        <ul className=\"space-y-2\">\n          {navigationItems.map((item) => {\n            const isActive = location === item.path;\n            return (\n              <li key={item.path}>\n                <Link\n                  href={item.path}\n                  className={`flex items-center ${isCollapsed ? 'justify-center px-2 py-3' : 'gap-3 px-3 py-2'} rounded-lg transition-colors ${\n                    isActive\n                      ? \"bg-primary-50 text-primary-600\"\n                      : \"text-gray-600 hover:bg-gray-50\"\n                  }`}\n                  title={isCollapsed ? item.label : undefined}\n                >\n                  <item.icon size={20} />\n                  {!isCollapsed && (\n                    <span className={isActive ? \"font-medium\" : \"\"}>{item.label}</span>\n                  )}\n                </Link>\n              </li>\n            );\n          })}\n        </ul>\n\n        {/* Integration Status */}\n        {!isCollapsed && (\n          <div className=\"mt-8 p-4 bg-gray-50 rounded-lg\">\n            <h3 className=\"text-sm font-semibold text-gray-700 mb-3\">Integration Status</h3>\n            <div className=\"space-y-2\">\n              {[\"jira\", \"smartsheet\", \"confluence\", \"slack\", \"teams\"].map((integration) => (\n                <div key={integration} className=\"flex items-center justify-between\">\n                  <span className=\"text-xs text-gray-600 capitalize\">{integration}</span>\n                  <span \n                    className={`w-2 h-2 rounded-full ${getStatusColor(getIntegrationStatus(integration))}`}\n                    title={getIntegrationStatus(integration)}\n                  />\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </nav>\n\n      {/* User Profile */}\n      <div className=\"p-4 border-t border-gray-200\">\n        <div className=\"flex items-center gap-3\">\n          <img \n            src=\"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=150&h=150\" \n            alt=\"User Profile\" \n            className=\"w-10 h-10 rounded-full object-cover\"\n          />\n          <div>\n            <p className=\"text-sm font-medium text-gray-900\">Sarah Chen</p>\n            <p className=\"text-xs text-gray-500\">Senior TPM</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":7535},"client/src/components/modals/EscalationModal.tsx":{"content":"import { useState } from \"react\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface EscalationModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  programId?: string;\n}\n\nexport function EscalationModal({ open, onOpenChange, programId }: EscalationModalProps) {\n  const [formData, setFormData] = useState({\n    summary: \"\",\n    description: \"\",\n    urgency: \"medium\",\n    ownerId: \"\",\n    impact: \"\",\n    sendToSlack: true,\n    sendToTeams: false,\n    sendToEmail: false,\n  });\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const createEscalationMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"/api/escalations\", \"POST\", data);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Escalation created successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/escalations\"] });\n      onOpenChange(false);\n      resetForm();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create escalation\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      summary: \"\",\n      description: \"\",\n      urgency: \"medium\",\n      ownerId: \"\",\n      impact: \"\",\n      sendToSlack: true,\n      sendToTeams: false,\n      sendToEmail: false,\n    });\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    const escalationData = {\n      ...formData,\n      programId,\n      reporterId: \"current-user-id\", // In real app, get from auth context\n    };\n\n    createEscalationMutation.mutate(escalationData);\n  };\n\n  const handleInputChange = (field: string, value: any) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle className=\"text-xl font-semibold text-gray-900\">\n            Create Escalation\n          </DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"summary\" className=\"text-sm font-medium text-gray-700 mb-2\">\n              Escalation Summary\n            </Label>\n            <Input\n              id=\"summary\"\n              value={formData.summary}\n              onChange={(e) => handleInputChange(\"summary\", e.target.value)}\n              placeholder=\"Brief description of the issue\"\n              required\n            />\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"urgency\" className=\"text-sm font-medium text-gray-700 mb-2\">\n                Urgency\n              </Label>\n              <Select value={formData.urgency} onValueChange={(value) => handleInputChange(\"urgency\", value)}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"low\">Low</SelectItem>\n                  <SelectItem value=\"medium\">Medium</SelectItem>\n                  <SelectItem value=\"high\">High</SelectItem>\n                  <SelectItem value=\"critical\">Critical</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label htmlFor=\"owner\" className=\"text-sm font-medium text-gray-700 mb-2\">\n                Owner\n              </Label>\n              <Select value={formData.ownerId} onValueChange={(value) => handleInputChange(\"ownerId\", value)}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select owner\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"sarah-chen\">Sarah Chen</SelectItem>\n                  <SelectItem value=\"alex-rivera\">Alex Rivera</SelectItem>\n                  <SelectItem value=\"maria-lopez\">Maria Lopez</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"description\" className=\"text-sm font-medium text-gray-700 mb-2\">\n              Description\n            </Label>\n            <Textarea\n              id=\"description\"\n              value={formData.description}\n              onChange={(e) => handleInputChange(\"description\", e.target.value)}\n              placeholder=\"Detailed description of the escalation\"\n              rows={3}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"impact\" className=\"text-sm font-medium text-gray-700 mb-2\">\n              Impact Description\n            </Label>\n            <Textarea\n              id=\"impact\"\n              value={formData.impact}\n              onChange={(e) => handleInputChange(\"impact\", e.target.value)}\n              placeholder=\"Describe the impact and potential consequences\"\n              rows={3}\n            />\n          </div>\n\n          <div>\n            <Label className=\"text-sm font-medium text-gray-700 mb-2\">Send To:</Label>\n            <div className=\"flex flex-wrap gap-4 mt-2\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"slack\"\n                  checked={formData.sendToSlack}\n                  onCheckedChange={(checked) => handleInputChange(\"sendToSlack\", checked)}\n                />\n                <Label htmlFor=\"slack\" className=\"text-sm\">Slack #engineering</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"teams\"\n                  checked={formData.sendToTeams}\n                  onCheckedChange={(checked) => handleInputChange(\"sendToTeams\", checked)}\n                />\n                <Label htmlFor=\"teams\" className=\"text-sm\">Teams Leadership</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"email\"\n                  checked={formData.sendToEmail}\n                  onCheckedChange={(checked) => handleInputChange(\"sendToEmail\", checked)}\n                />\n                <Label htmlFor=\"email\" className=\"text-sm\">Email Stakeholders</Label>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-3 pt-4\">\n            <Button \n              type=\"button\" \n              variant=\"outline\" \n              onClick={() => onOpenChange(false)}\n            >\n              Cancel\n            </Button>\n            <Button \n              type=\"submit\" \n              className=\"bg-primary-500 text-white hover:bg-primary-600\"\n              disabled={createEscalationMutation.isPending}\n            >\n              {createEscalationMutation.isPending ? \"Creating...\" : \"Create Escalation\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":7547},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }","size_bytes":1882},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/modals/MissingComponentsModal.tsx":{"content":"import { useState } from \"react\";\nimport { \n  Dialog, \n  DialogContent, \n  DialogHeader, \n  DialogTitle \n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  AlertTriangle, \n  Plus, \n  CheckCircle, \n  Calendar, \n  Target, \n  Users, \n  TrendingUp,\n  FileText,\n  MessageSquare,\n  Link,\n  ArrowRight\n} from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport type { Program } from \"@shared/schema\";\n\ninterface MissingComponent {\n  type: 'milestone' | 'risk' | 'dependency' | 'adopter' | 'objective';\n  title: string;\n  description: string;\n  severity: 'high' | 'medium' | 'low';\n  suggestion: string;\n  actionLabel: string;\n  navigateTo: string;\n}\n\ninterface MissingComponentsModalProps {\n  open: boolean;\n  onClose: () => void;\n  program: Program;\n  analysis: {\n    riskAlerts?: string[];\n    completenessScore?: number;\n    missingComponents?: MissingComponent[];\n  };\n}\n\nexport function MissingComponentsModal({ \n  open, \n  onClose, \n  program, \n  analysis \n}: MissingComponentsModalProps) {\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n\n  // Convert API risk alerts to missing components format\n  const convertRiskAlertsToComponents = (riskAlerts: any[]): MissingComponent[] => {\n    return riskAlerts.map((alert) => {\n      let navigateTo = '/programs';\n      let actionLabel = 'Add Component';\n      \n      // Map component types to navigation\n      if (alert.title.includes('Milestone')) {\n        navigateTo = '/milestones';\n        actionLabel = 'Add Milestones';\n      } else if (alert.title.includes('Risk')) {\n        navigateTo = '/risk-management';\n        actionLabel = 'Add Risks';\n      } else if (alert.title.includes('Dependencies')) {\n        navigateTo = '/dependencies';\n        actionLabel = 'Map Dependencies';\n      } else if (alert.title.includes('Adopter')) {\n        navigateTo = '/adopter-support';\n        actionLabel = 'Plan Adoption';\n      } else if (alert.title.includes('Projects')) {\n        navigateTo = '/program-planning';\n        actionLabel = 'Define Projects';\n      }\n\n      return {\n        type: alert.title.includes('Milestone') ? 'milestone' :\n              alert.title.includes('Risk') ? 'risk' :\n              alert.title.includes('Dependencies') ? 'dependency' :\n              alert.title.includes('Adopter') ? 'adopter' : 'objective',\n        title: alert.title,\n        description: alert.description,\n        severity: alert.severity as 'high' | 'medium' | 'low',\n        suggestion: alert.recommendation,\n        actionLabel,\n        navigateTo\n      };\n    });\n  };\n\n  const missingComponents = analysis.riskAlerts ? \n    convertRiskAlertsToComponents(analysis.riskAlerts) : [];\n  const completenessScore = analysis.completenessScore || 20;\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'high': return 'text-red-600 bg-red-50 border-red-200';\n      case 'medium': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n      case 'low': return 'text-blue-600 bg-blue-50 border-blue-200';\n      default: return 'text-gray-600 bg-gray-50 border-gray-200';\n    }\n  };\n\n  const getSeverityIcon = (severity: string) => {\n    switch (severity) {\n      case 'high': return <AlertTriangle className=\"h-4 w-4\" />;\n      case 'medium': return <TrendingUp className=\"h-4 w-4\" />;\n      case 'low': return <FileText className=\"h-4 w-4\" />;\n      default: return <MessageSquare className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getTypeIcon = (type: string) => {\n    switch (type) {\n      case 'milestone': return <Calendar className=\"h-5 w-5\" />;\n      case 'risk': return <AlertTriangle className=\"h-5 w-5\" />;\n      case 'dependency': return <Link className=\"h-5 w-5\" />;\n      case 'adopter': return <Users className=\"h-5 w-5\" />;\n      case 'objective': return <Target className=\"h-5 w-5\" />;\n      default: return <FileText className=\"h-5 w-5\" />;\n    }\n  };\n\n  const handleAddComponent = (component: MissingComponent) => {\n    toast({\n      title: \"Navigating to Component\",\n      description: `Opening ${component.actionLabel} for ${program.name}`,\n    });\n    \n    // Navigate to the appropriate page with program context\n    setLocation(`${component.navigateTo}?programId=${program.id}&fromAnalysis=true`);\n    onClose();\n  };\n\n  const handleAddAllComponents = () => {\n    toast({\n      title: \"Bulk Component Setup\",\n      description: \"Starting guided setup for all missing components\",\n    });\n    // Start with the highest priority component\n    const highPriorityComponent = missingComponents.find(c => c.severity === 'high') || missingComponents[0];\n    handleAddComponent(highPriorityComponent);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-3\">\n            <AlertTriangle className=\"h-6 w-6 text-amber-600\" />\n            Program Analysis: {program.name}\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Program Completeness Score */}\n          <Card className=\"border-amber-200 bg-amber-50\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-lg flex items-center gap-2\">\n                <TrendingUp className=\"h-5 w-5\" />\n                Program Completeness Score\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex items-center gap-4\">\n                <Progress value={completenessScore} className=\"flex-1\" />\n                <Badge variant={completenessScore > 50 ? \"default\" : \"destructive\"} className=\"text-lg px-3 py-1\">\n                  {completenessScore}%\n                </Badge>\n              </div>\n              <p className=\"text-sm text-gray-600 mt-2\">\n                {completenessScore < 30 \n                  ? \"Critical: Program needs immediate attention to essential components\"\n                  : completenessScore < 60 \n                  ? \"Moderate: Several important components are missing\"\n                  : \"Good: Program is well-structured with minor gaps\"\n                }\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-3\">\n            <Button \n              onClick={handleAddAllComponents} \n              className=\"flex items-center gap-2\"\n              size=\"lg\"\n            >\n              <CheckCircle className=\"h-4 w-4\" />\n              Setup All Components\n            </Button>\n            <Button variant=\"outline\" onClick={onClose}>\n              Review Later\n            </Button>\n          </div>\n\n          <Separator />\n\n          {/* Missing Components List */}\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n              <AlertTriangle className=\"h-5 w-5\" />\n              Missing Components ({missingComponents.length})\n            </h3>\n\n            {missingComponents.map((component, index) => (\n              <Card key={index} className={`border-l-4 ${getSeverityColor(component.severity)}`}>\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      {getTypeIcon(component.type)}\n                      <div>\n                        <CardTitle className=\"text-base\">{component.title}</CardTitle>\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          <Badge \n                            variant=\"outline\" \n                            className={`text-xs ${getSeverityColor(component.severity)}`}\n                          >\n                            {getSeverityIcon(component.severity)}\n                            {component.severity.toUpperCase()} PRIORITY\n                          </Badge>\n                        </div>\n                      </div>\n                    </div>\n                    <Button \n                      onClick={() => handleAddComponent(component)}\n                      className=\"flex items-center gap-2\"\n                      size=\"sm\"\n                    >\n                      <Plus className=\"h-4 w-4\" />\n                      {component.actionLabel}\n                      <ArrowRight className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-gray-700 mb-3\">{component.description}</p>\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                    <p className=\"text-sm text-blue-800\">\n                      <strong>Suggestion:</strong> {component.suggestion}\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {/* Summary Footer */}\n          <Card className=\"bg-gray-50 border-gray-200\">\n            <CardContent className=\"pt-6\">\n              <div className=\"flex items-center gap-3 text-sm text-gray-600\">\n                <CheckCircle className=\"h-4 w-4\" />\n                <span>\n                  Completing these components will improve your program completeness score to approximately{\" \"}\n                  <strong>{Math.min(completenessScore + (missingComponents.length * 16), 100)}%</strong>\n                </span>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":9909},"client/src/components/layout/ComponentAnalytics.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { calculateProgramHealth, getHealthBadge } from \"@/lib/healthCalculation\";\nimport { \n  TrendingUp, \n  AlertTriangle, \n  Clock, \n  CheckCircle,\n  Flag,\n  GitBranch,\n  Users,\n  BarChart3\n} from \"lucide-react\";\n\ninterface AnalyticsProps {\n  title: string;\n  data: {\n    risks?: any[];\n    milestones?: any[];\n    dependencies?: any[];\n    adopters?: any[];\n    missingComponents?: number;\n  };\n}\n\nexport function ComponentAnalytics({ title, data }: AnalyticsProps) {\n  // Calculate health using centralized utility\n  const healthMetrics = calculateProgramHealth({\n    risks: data.risks || [],\n    milestones: data.milestones || [],\n    dependencies: data.dependencies || [],\n    adopters: data.adopters || [],\n    missingComponents: data.missingComponents || 0\n  });\n\n  const getHealthIcon = () => {\n    if (healthMetrics.score >= 80) return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\n    if (healthMetrics.score >= 60) return <Clock className=\"h-4 w-4 text-yellow-600\" />;\n    return <AlertTriangle className=\"h-4 w-4 text-red-600\" />;\n  };\n\n  return (\n    <Card className=\"border border-gray-200\">\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n          <BarChart3 className=\"h-4 w-4\" />\n          {title} Analytics\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"pt-0\">\n        <div className=\"space-y-4\">\n          {/* Health Score */}\n          <div className=\"flex items-center justify-between p-3 rounded-lg bg-gray-50\">\n            <div className=\"flex items-center gap-2\">\n              {getHealthIcon()}\n              <span className=\"text-sm font-medium\">Health Score</span>\n            </div>\n            <span className={`text-lg font-bold ${healthMetrics.color}`}>\n              {healthMetrics.score}%\n            </span>\n          </div>\n\n          {/* Component Metrics */}\n          <div className=\"grid grid-cols-2 gap-2\">\n            <div className=\"flex items-center justify-between p-2 border border-gray-100 rounded\">\n              <div className=\"flex items-center gap-1\">\n                <Flag className=\"h-3 w-3 text-blue-500\" />\n                <span className=\"text-xs text-gray-600\">Milestones</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <span className=\"text-sm font-medium\">{data.milestones?.length || 0}</span>\n                {healthMetrics.breakdown.overdueMilestones > 0 && (\n                  <Badge variant=\"destructive\" className=\"text-xs h-4 px-1\">\n                    {healthMetrics.breakdown.overdueMilestones} overdue\n                  </Badge>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between p-2 border border-gray-100 rounded\">\n              <div className=\"flex items-center gap-1\">\n                <AlertTriangle className=\"h-3 w-3 text-orange-500\" />\n                <span className=\"text-xs text-gray-600\">Risks</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <span className=\"text-sm font-medium\">{data.risks?.length || 0}</span>\n                {healthMetrics.breakdown.criticalRisks > 0 && (\n                  <Badge variant=\"destructive\" className=\"text-xs h-4 px-1\">\n                    {healthMetrics.breakdown.criticalRisks} critical\n                  </Badge>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between p-2 border border-gray-100 rounded\">\n              <div className=\"flex items-center gap-1\">\n                <GitBranch className=\"h-3 w-3 text-purple-500\" />\n                <span className=\"text-xs text-gray-600\">Dependencies</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <span className=\"text-sm font-medium\">{data.dependencies?.length || 0}</span>\n                {healthMetrics.breakdown.blockedDependencies > 0 && (\n                  <Badge variant=\"destructive\" className=\"text-xs h-4 px-1\">\n                    {healthMetrics.breakdown.blockedDependencies} blocked\n                  </Badge>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between p-2 border border-gray-100 rounded\">\n              <div className=\"flex items-center gap-1\">\n                <Users className=\"h-3 w-3 text-green-500\" />\n                <span className=\"text-xs text-gray-600\">Adopters</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <span className=\"text-sm font-medium\">{data.adopters?.length || 0}</span>\n                {data.adopters && data.adopters.filter(a => a.overallReadiness === 'ready').length > 0 && (\n                  <Badge variant=\"outline\" className=\"text-xs h-4 px-1 bg-green-50 text-green-700 border-green-200\">\n                    {data.adopters.filter(a => a.overallReadiness === 'ready').length} ready\n                  </Badge>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":5293},"client/src/components/layout/ComponentContextCard.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Flag, \n  AlertTriangle, \n  Users, \n  GitBranch, \n  Eye,\n  Calendar,\n  ExternalLink\n} from \"lucide-react\";\n\ninterface ComponentContextCardProps {\n  title: string;\n  items: any[];\n  type: 'milestones' | 'risks' | 'dependencies' | 'adopters' | 'projects';\n  onViewAll?: () => void;\n  onViewItem?: (item: any) => void;\n  analytics?: {\n    total: number;\n    critical?: number;\n    overdue?: number;\n    blocked?: number;\n    ready?: number;\n  };\n}\n\nexport function ComponentContextCard({ \n  title, \n  items, \n  type, \n  onViewAll, \n  onViewItem,\n  analytics \n}: ComponentContextCardProps) {\n  const getTypeIcon = (type: string) => {\n    switch (type) {\n      case 'milestones': return <Flag className=\"h-4 w-4\" />;\n      case 'risks': return <AlertTriangle className=\"h-4 w-4\" />;\n      case 'dependencies': return <GitBranch className=\"h-4 w-4\" />;\n      case 'adopters': return <Users className=\"h-4 w-4\" />;\n      case 'projects': return <Calendar className=\"h-4 w-4\" />;\n      default: return <Eye className=\"h-4 w-4\" />;\n    }\n  };\n\n  const getStatusColor = (item: any, type: string) => {\n    switch (type) {\n      case 'milestones':\n        switch (item.status) {\n          case 'completed': return 'bg-green-100 text-green-800 border-green-200';\n          case 'in_progress': return 'bg-blue-100 text-blue-800 border-blue-200';\n          case 'at_risk': return 'bg-red-100 text-red-800 border-red-200';\n          case 'delayed': return 'bg-orange-100 text-orange-800 border-orange-200';\n          default: return 'bg-gray-100 text-gray-800 border-gray-200';\n        }\n      case 'risks':\n        switch (item.severity) {\n          case 'critical': return 'bg-red-100 text-red-800 border-red-200';\n          case 'high': return 'bg-orange-100 text-orange-800 border-orange-200';\n          case 'medium': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n          default: return 'bg-green-100 text-green-800 border-green-200';\n        }\n      case 'dependencies':\n        switch (item.status) {\n          case 'blocked': return 'bg-red-100 text-red-800 border-red-200';\n          case 'at_risk': return 'bg-orange-100 text-orange-800 border-orange-200';\n          case 'on_track': return 'bg-green-100 text-green-800 border-green-200';\n          case 'completed': return 'bg-gray-100 text-gray-800 border-gray-200';\n          default: return 'bg-blue-100 text-blue-800 border-blue-200';\n        }\n      case 'adopters':\n        switch (item.status) {\n          case 'ready': return 'bg-green-100 text-green-800 border-green-200';\n          case 'in_progress': return 'bg-blue-100 text-blue-800 border-blue-200';\n          case 'blocked': return 'bg-red-100 text-red-800 border-red-200';\n          default: return 'bg-gray-100 text-gray-800 border-gray-200';\n        }\n      default:\n        return 'bg-gray-100 text-gray-800 border-gray-200';\n    }\n  };\n\n  const formatDate = (dateString: string | null | undefined) => {\n    if (!dateString) return null;\n    const date = new Date(dateString);\n    return date.toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\" });\n  };\n\n  const getAnalyticsBadge = () => {\n    if (!analytics) return null;\n\n    const { total, critical, overdue, blocked, ready } = analytics;\n    \n    if (critical && critical > 0) {\n      return <Badge variant=\"destructive\" className=\"text-xs\">{critical} Critical</Badge>;\n    }\n    if (overdue && overdue > 0) {\n      return <Badge variant=\"destructive\" className=\"text-xs\">{overdue} Overdue</Badge>;\n    }\n    if (blocked && blocked > 0) {\n      return <Badge variant=\"destructive\" className=\"text-xs\">{blocked} Blocked</Badge>;\n    }\n    if (ready && ready > 0) {\n      return <Badge variant=\"outline\" className=\"text-xs bg-green-50 text-green-700 border-green-200\">{ready} Ready</Badge>;\n    }\n    \n    return <Badge variant=\"outline\" className=\"text-xs\">{total} Total</Badge>;\n  };\n\n  return (\n    <Card className=\"border border-gray-200 hover:border-primary-300 transition-colors\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n            {getTypeIcon(type)}\n            {title}\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            {getAnalyticsBadge()}\n            {onViewAll && items.length > 3 && (\n              <Button \n                variant=\"ghost\" \n                size=\"sm\" \n                onClick={onViewAll}\n                className=\"h-6 px-2 text-xs\"\n              >\n                View All\n              </Button>\n            )}\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent className=\"pt-0\">\n        {items.length === 0 ? (\n          <div className=\"text-center py-4 text-gray-500\">\n            <div className=\"text-xs\">No {type} found</div>\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {items.slice(0, 3).map((item: any) => (\n              <div \n                key={item.id} \n                className=\"flex items-center justify-between p-2 rounded-md border border-gray-100 hover:border-primary-200 hover:bg-primary-50/30 transition-colors cursor-pointer\"\n                onClick={() => onViewItem?.(item)}\n              >\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"text-sm font-medium text-gray-900 truncate\">\n                    {item.title || item.name}\n                  </div>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    <Badge \n                      variant=\"outline\" \n                      className={`text-xs ${getStatusColor(item, type)}`}\n                    >\n                      {item.status || item.severity}\n                    </Badge>\n                    {(item.dueDate || item.targetDate) && (\n                      <span className=\"text-xs text-gray-500\">\n                        {formatDate(item.dueDate || item.targetDate)}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <ExternalLink className=\"h-3 w-3 text-gray-400 ml-2 flex-shrink-0\" />\n              </div>\n            ))}\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":6447},"client/src/components/milestones/MilestoneHierarchy.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from \"@/components/ui/collapsible\";\nimport { \n  ChevronRight, \n  ChevronDown, \n  Calendar, \n  User, \n  ExternalLink, \n  Plus,\n  Flag,\n  CheckCircle,\n  Clock,\n  AlertTriangle\n} from \"lucide-react\";\nimport type { \n  Milestone, \n  MilestoneStep, \n  JiraBepic, \n  JiraEpic, \n  JiraStory \n} from \"@shared/schema\";\n\ninterface MilestoneHierarchyProps {\n  milestone: Milestone;\n  steps: MilestoneStep[];\n  bepics: JiraBepic[];\n  epics: JiraEpic[];\n  stories: JiraStory[];\n  onAddStep: (milestoneId: string) => void;\n  onAddBepic: (stepId: string) => void;\n  onAddEpic: (bepicId: string) => void;\n  onAddStory: (epicId: string) => void;\n}\n\nexport function MilestoneHierarchy({\n  milestone,\n  steps,\n  bepics,\n  epics,\n  stories,\n  onAddStep,\n  onAddBepic,\n  onAddEpic,\n  onAddStory,\n}: MilestoneHierarchyProps) {\n  const [expandedMilestone, setExpandedMilestone] = useState(false);\n  const [expandedSteps, setExpandedSteps] = useState<Set<string>>(new Set());\n  const [expandedBepics, setExpandedBepics] = useState<Set<string>>(new Set());\n  const [expandedEpics, setExpandedEpics] = useState<Set<string>>(new Set());\n\n  const toggleStep = (stepId: string) => {\n    const newExpanded = new Set(expandedSteps);\n    if (newExpanded.has(stepId)) {\n      newExpanded.delete(stepId);\n    } else {\n      newExpanded.add(stepId);\n    }\n    setExpandedSteps(newExpanded);\n  };\n\n  const toggleBepic = (bepicId: string) => {\n    const newExpanded = new Set(expandedBepics);\n    if (newExpanded.has(bepicId)) {\n      newExpanded.delete(bepicId);\n    } else {\n      newExpanded.add(bepicId);\n    }\n    setExpandedBepics(newExpanded);\n  };\n\n  const toggleEpic = (epicId: string) => {\n    const newExpanded = new Set(expandedEpics);\n    if (newExpanded.has(epicId)) {\n      newExpanded.delete(epicId);\n    } else {\n      newExpanded.add(epicId);\n    }\n    setExpandedEpics(newExpanded);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\": case \"done\": return \"bg-green-100 text-green-800\";\n      case \"in_progress\": return \"bg-blue-100 text-blue-800\";\n      case \"blocked\": return \"bg-red-100 text-red-800\";\n      case \"at_risk\": return \"bg-yellow-100 text-yellow-800\";\n      case \"review\": return \"bg-purple-100 text-purple-800\";\n      case \"testing\": return \"bg-orange-100 text-orange-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"completed\": case \"done\": return <CheckCircle size={14} className=\"text-green-600\" />;\n      case \"in_progress\": return <Clock size={14} className=\"text-blue-600\" />;\n      case \"blocked\": return <AlertTriangle size={14} className=\"text-red-600\" />;\n      default: return <Flag size={14} className=\"text-gray-600\" />;\n    }\n  };\n\n  const getPriorityColor = (priority: number) => {\n    switch (priority) {\n      case 5: return \"bg-red-100 text-red-800\";\n      case 4: return \"bg-orange-100 text-orange-800\";\n      case 3: return \"bg-yellow-100 text-yellow-800\";\n      case 2: return \"bg-blue-100 text-blue-800\";\n      case 1: return \"bg-gray-100 text-gray-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const milestoneSteps = steps.filter(step => step.milestoneId === milestone.id);\n  \n  return (\n    <Card className=\"border border-gray-200\">\n      <Collapsible open={expandedMilestone} onOpenChange={setExpandedMilestone}>\n        <CollapsibleTrigger asChild>\n          <CardHeader className=\"cursor-pointer hover:bg-gray-50 transition-colors\">\n            <CardTitle className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                {expandedMilestone ? <ChevronDown size={20} /> : <ChevronRight size={20} />}\n                <div className=\"flex items-center gap-2\">\n                  {getStatusIcon(milestone.status || \"not_started\")}\n                  <span>{milestone.title}</span>\n                </div>\n                <Badge className={getStatusColor(milestone.status || \"not_started\")}>\n                  {milestone.status?.replace(\"_\", \" \") || \"Not Started\"}\n                </Badge>\n              </div>\n              <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n                <div className=\"flex items-center gap-1\">\n                  <Calendar size={14} />\n                  {milestone.dueDate ? new Date(milestone.dueDate).toLocaleDateString() : \"No due date\"}\n                </div>\n                <Badge variant=\"outline\" className=\"text-xs\">\n                  {milestoneSteps.length} steps\n                </Badge>\n              </div>\n            </CardTitle>\n          </CardHeader>\n        </CollapsibleTrigger>\n        \n        <CollapsibleContent>\n          <CardContent className=\"pt-0\">\n            <div className=\"space-y-4\">\n              {/* Milestone Description */}\n              {milestone.description && (\n                <p className=\"text-sm text-gray-600\">{milestone.description}</p>\n              )}\n              \n              {/* Add Step Button */}\n              <div className=\"flex justify-end\">\n                <Button \n                  onClick={() => onAddStep(milestone.id)} \n                  size=\"sm\" \n                  variant=\"outline\"\n                  className=\"text-blue-600 border-blue-200 hover:bg-blue-50\"\n                >\n                  <Plus size={14} className=\"mr-1\" />\n                  Add Step\n                </Button>\n              </div>\n\n              {/* Steps List */}\n              <div className=\"space-y-3 ml-6\">\n                {milestoneSteps.map(step => {\n                  const stepBepics = bepics.filter(bepic => bepic.stepId === step.id);\n                  \n                  return (\n                    <div key={step.id} className=\"border-l-2 border-gray-200 pl-4\">\n                      <Collapsible open={expandedSteps.has(step.id)} onOpenChange={() => toggleStep(step.id)}>\n                        <CollapsibleTrigger asChild>\n                          <div className=\"flex items-center justify-between p-3 bg-blue-50 rounded-lg cursor-pointer hover:bg-blue-100 transition-colors\">\n                            <div className=\"flex items-center gap-3\">\n                              {expandedSteps.has(step.id) ? <ChevronDown size={16} /> : <ChevronRight size={16} />}\n                              <div className=\"flex items-center gap-2\">\n                                {getStatusIcon(step.status || \"not_started\")}\n                                <span className=\"font-medium text-gray-900\">{step.title}</span>\n                              </div>\n                              <Badge className={getStatusColor(step.status || \"not_started\")}>\n                                {step.status?.replace(\"_\", \" \") || \"Not Started\"}\n                              </Badge>\n                              {step.priority && (\n                                <Badge variant=\"outline\" className={getPriorityColor(step.priority)}>\n                                  P{step.priority}\n                                </Badge>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n                              <div className=\"flex items-center gap-1\">\n                                <Calendar size={14} />\n                                {step.dueDate ? new Date(step.dueDate).toLocaleDateString() : \"No due date\"}\n                              </div>\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                {stepBepics.length} bepics\n                              </Badge>\n                            </div>\n                          </div>\n                        </CollapsibleTrigger>\n                        \n                        <CollapsibleContent>\n                          <div className=\"mt-3 space-y-3\">\n                            {step.description && (\n                              <p className=\"text-sm text-gray-600 ml-6\">{step.description}</p>\n                            )}\n                            \n                            {/* Add Bepic Button */}\n                            <div className=\"flex justify-end ml-6\">\n                              <Button \n                                onClick={() => onAddBepic(step.id)} \n                                size=\"sm\" \n                                variant=\"outline\"\n                                className=\"text-purple-600 border-purple-200 hover:bg-purple-50\"\n                              >\n                                <Plus size={14} className=\"mr-1\" />\n                                Add Bepic\n                              </Button>\n                            </div>\n\n                            {/* Bepics List */}\n                            <div className=\"space-y-2 ml-6\">\n                              {stepBepics.map(bepic => {\n                                const bepicEpics = epics.filter(epic => epic.bepicId === bepic.id);\n                                \n                                return (\n                                  <div key={bepic.id} className=\"border-l-2 border-purple-200 pl-4\">\n                                    <Collapsible open={expandedBepics.has(bepic.id)} onOpenChange={() => toggleBepic(bepic.id)}>\n                                      <CollapsibleTrigger asChild>\n                                        <div className=\"flex items-center justify-between p-2 bg-purple-50 rounded cursor-pointer hover:bg-purple-100 transition-colors\">\n                                          <div className=\"flex items-center gap-2\">\n                                            {expandedBepics.has(bepic.id) ? <ChevronDown size={14} /> : <ChevronRight size={14} />}\n                                            <div className=\"flex items-center gap-2\">\n                                              {getStatusIcon(bepic.status || \"new\")}\n                                              <span className=\"text-sm font-medium\">{bepic.title}</span>\n                                            </div>\n                                            <Badge className={getStatusColor(bepic.status || \"new\")} variant=\"outline\">\n                                              {bepic.status || \"New\"}\n                                            </Badge>\n                                            {bepic.jiraBepicKey && (\n                                              <Badge variant=\"outline\" className=\"text-xs\">\n                                                {bepic.jiraBepicKey}\n                                              </Badge>\n                                            )}\n                                          </div>\n                                          <div className=\"flex items-center gap-2\">\n                                            <Badge variant=\"outline\" className=\"text-xs\">\n                                              {bepicEpics.length} epics\n                                            </Badge>\n                                            {bepic.jiraUrl && (\n                                              <Button size=\"sm\" variant=\"ghost\" className=\"h-6 w-6 p-0\">\n                                                <ExternalLink size={12} />\n                                              </Button>\n                                            )}\n                                          </div>\n                                        </div>\n                                      </CollapsibleTrigger>\n                                      \n                                      <CollapsibleContent>\n                                        <div className=\"mt-2 space-y-2\">\n                                          {/* Add Epic Button */}\n                                          <div className=\"flex justify-end ml-4\">\n                                            <Button \n                                              onClick={() => onAddEpic(bepic.id)} \n                                              size=\"sm\" \n                                              variant=\"outline\"\n                                              className=\"text-green-600 border-green-200 hover:bg-green-50\"\n                                            >\n                                              <Plus size={12} className=\"mr-1\" />\n                                              Add Epic\n                                            </Button>\n                                          </div>\n\n                                          {/* Epics List */}\n                                          <div className=\"space-y-1 ml-4\">\n                                            {bepicEpics.map(epic => {\n                                              const epicStories = stories.filter(story => story.epicId === epic.id);\n                                              \n                                              return (\n                                                <div key={epic.id} className=\"border-l-2 border-green-200 pl-3\">\n                                                  <Collapsible open={expandedEpics.has(epic.id)} onOpenChange={() => toggleEpic(epic.id)}>\n                                                    <CollapsibleTrigger asChild>\n                                                      <div className=\"flex items-center justify-between p-2 bg-green-50 rounded cursor-pointer hover:bg-green-100 transition-colors\">\n                                                        <div className=\"flex items-center gap-2\">\n                                                          {expandedEpics.has(epic.id) ? <ChevronDown size={12} /> : <ChevronRight size={12} />}\n                                                          <div className=\"flex items-center gap-2\">\n                                                            {getStatusIcon(epic.status || \"new\")}\n                                                            <span className=\"text-xs font-medium\">{epic.title}</span>\n                                                          </div>\n                                                          <Badge className={getStatusColor(epic.status || \"new\")} variant=\"outline\">\n                                                            {epic.status || \"New\"}\n                                                          </Badge>\n                                                          {epic.jiraEpicKey && (\n                                                            <Badge variant=\"outline\" className=\"text-xs\">\n                                                              {epic.jiraEpicKey}\n                                                            </Badge>\n                                                          )}\n                                                        </div>\n                                                        <div className=\"flex items-center gap-2\">\n                                                          <Badge variant=\"outline\" className=\"text-xs\">\n                                                            {epicStories.length} stories\n                                                          </Badge>\n                                                          {epic.jiraUrl && (\n                                                            <Button size=\"sm\" variant=\"ghost\" className=\"h-5 w-5 p-0\">\n                                                              <ExternalLink size={10} />\n                                                            </Button>\n                                                          )}\n                                                        </div>\n                                                      </div>\n                                                    </CollapsibleTrigger>\n                                                    \n                                                    <CollapsibleContent>\n                                                      <div className=\"mt-2 space-y-1\">\n                                                        {/* Add Story Button */}\n                                                        <div className=\"flex justify-end ml-3\">\n                                                          <Button \n                                                            onClick={() => onAddStory(epic.id)} \n                                                            size=\"sm\" \n                                                            variant=\"outline\"\n                                                            className=\"text-orange-600 border-orange-200 hover:bg-orange-50\"\n                                                          >\n                                                            <Plus size={10} className=\"mr-1\" />\n                                                            Add Story\n                                                          </Button>\n                                                        </div>\n\n                                                        {/* Stories List */}\n                                                        <div className=\"space-y-1 ml-3\">\n                                                          {epicStories.map(story => (\n                                                            <div key={story.id} className=\"flex items-center justify-between p-1 bg-orange-50 rounded\">\n                                                              <div className=\"flex items-center gap-2\">\n                                                                {getStatusIcon(story.status || \"new\")}\n                                                                <span className=\"text-xs\">{story.title}</span>\n                                                                <Badge className={getStatusColor(story.status || \"new\")} variant=\"outline\">\n                                                                  {story.status || \"New\"}\n                                                                </Badge>\n                                                                {story.jiraStoryKey && (\n                                                                  <Badge variant=\"outline\" className=\"text-xs\">\n                                                                    {story.jiraStoryKey}\n                                                                  </Badge>\n                                                                )}\n                                                                {story.storyPoints && (\n                                                                  <Badge variant=\"outline\" className=\"text-xs\">\n                                                                    {story.storyPoints} pts\n                                                                  </Badge>\n                                                                )}\n                                                              </div>\n                                                              {story.jiraUrl && (\n                                                                <Button size=\"sm\" variant=\"ghost\" className=\"h-4 w-4 p-0\">\n                                                                  <ExternalLink size={8} />\n                                                                </Button>\n                                                              )}\n                                                            </div>\n                                                          ))}\n                                                        </div>\n                                                      </div>\n                                                    </CollapsibleContent>\n                                                  </Collapsible>\n                                                </div>\n                                              );\n                                            })}\n                                          </div>\n                                        </div>\n                                      </CollapsibleContent>\n                                    </Collapsible>\n                                  </div>\n                                );\n                              })}\n                            </div>\n                          </div>\n                        </CollapsibleContent>\n                      </Collapsible>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </CardContent>\n        </CollapsibleContent>\n      </Collapsible>\n    </Card>\n  );\n}","size_bytes":20849},"client/src/components/phases/ProgramPhaseManager.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { \n  CheckCircle, \n  Clock, \n  AlertTriangle, \n  ChevronRight, \n  Play, \n  Pause, \n  RotateCcw,\n  FileText,\n  Brain,\n  Users,\n  Target,\n  Calendar\n} from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { ProgramPhase, PhaseStage, Program } from \"@shared/schema\";\n\ninterface ProgramPhaseManagerProps {\n  program: Program;\n}\n\n// Define the 5 phases with their internal stages\nconst PROJECT_PHASES = {\n  initiation: {\n    name: \"Initiation\",\n    icon: <Target size={20} />,\n    stages: [\n      { name: \"Project Charter Development\", description: \"Define project purpose, objectives, and high-level scope\" },\n      { name: \"Stakeholder Identification\", description: \"Identify all project stakeholders and their interests\" },\n      { name: \"Initial Risk Assessment\", description: \"Conduct high-level risk identification and assessment\" },\n      { name: \"Business Case Validation\", description: \"Validate business justification and expected benefits\" },\n      { name: \"Project Manager Assignment\", description: \"Assign project manager and define authority levels\" }\n    ]\n  },\n  planning: {\n    name: \"Planning\", \n    icon: <FileText size={20} />,\n    stages: [\n      { name: \"Scope Definition\", description: \"Define detailed project scope and deliverables\" },\n      { name: \"Work Breakdown Structure\", description: \"Break down project work into manageable components\" },\n      { name: \"Schedule Development\", description: \"Sequence activities and develop project timeline\" },\n      { name: \"Resource Planning\", description: \"Identify and plan for required resources\" },\n      { name: \"Risk Management Planning\", description: \"Develop comprehensive risk management approach\" },\n      { name: \"Communication Planning\", description: \"Define communication requirements and methods\" },\n      { name: \"Quality Planning\", description: \"Establish quality standards and metrics\" },\n      { name: \"Procurement Planning\", description: \"Plan for external purchases and contracts\" }\n    ]\n  },\n  execution: {\n    name: \"Execution\",\n    icon: <Play size={20} />,\n    stages: [\n      { name: \"Team Development\", description: \"Build and develop the project team\" },\n      { name: \"Work Performance\", description: \"Execute the work defined in project plan\" },\n      { name: \"Quality Assurance\", description: \"Implement quality assurance processes\" },\n      { name: \"Stakeholder Engagement\", description: \"Manage stakeholder expectations and engagement\" },\n      { name: \"Communication Management\", description: \"Execute communication plan and manage information\" },\n      { name: \"Procurement Management\", description: \"Manage supplier relationships and contracts\" }\n    ]\n  },\n  monitoring_controlling: {\n    name: \"Monitoring & Controlling\",\n    icon: <Clock size={20} />,\n    stages: [\n      { name: \"Performance Monitoring\", description: \"Monitor project performance against baselines\" },\n      { name: \"Change Control\", description: \"Review and approve/reject change requests\" },\n      { name: \"Risk Monitoring\", description: \"Track identified risks and identify new risks\" },\n      { name: \"Schedule Control\", description: \"Control changes to project schedule\" },\n      { name: \"Cost Control\", description: \"Monitor project costs and budget performance\" },\n      { name: \"Quality Control\", description: \"Monitor deliverables to ensure quality standards\" },\n      { name: \"Stakeholder Engagement Control\", description: \"Monitor stakeholder relationships and engagement\" }\n    ]\n  },\n  closure: {\n    name: \"Closure\",\n    icon: <CheckCircle size={20} />,\n    stages: [\n      { name: \"Final Deliverables\", description: \"Complete and transfer final project deliverables\" },\n      { name: \"Contract Closure\", description: \"Close out all project contracts and procurements\" },\n      { name: \"Administrative Closure\", description: \"Complete administrative activities and documentation\" },\n      { name: \"Lessons Learned\", description: \"Capture and document lessons learned\" },\n      { name: \"Resource Release\", description: \"Release project resources and team members\" },\n      { name: \"Project Archive\", description: \"Archive all project documents and artifacts\" }\n    ]\n  }\n};\n\nexport function ProgramPhaseManager({ program }: ProgramPhaseManagerProps) {\n  const [currentPhase, setCurrentPhase] = useState<string>(\"initiation\");\n  const [stageInputs, setStageInputs] = useState<Record<string, any>>({});\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: programPhases = [] } = useQuery<ProgramPhase[]>({\n    queryKey: [\"/api/program-phases\", program.id],\n  });\n\n  const { data: phaseStages = [] } = useQuery<PhaseStage[]>({\n    queryKey: [\"/api/phase-stages\", program.id],\n  });\n\n  const updatePhaseMutation = useMutation({\n    mutationFn: (data: { phaseId: string; updates: any }) =>\n      apiRequest(`/api/program-phases/${data.phaseId}`, {\n        method: \"PATCH\",\n        body: JSON.stringify(data.updates),\n      }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/program-phases\"] });\n      toast({ title: \"Phase updated successfully\" });\n    },\n  });\n\n  const updateStageMutation = useMutation({\n    mutationFn: (data: { stageId: string; updates: any }) =>\n      apiRequest(`/api/phase-stages/${data.stageId}`, {\n        method: \"PATCH\", \n        body: JSON.stringify(data.updates),\n      }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/phase-stages\"] });\n      toast({ title: \"Stage updated successfully\" });\n    },\n  });\n\n  const getPhaseStatus = (phaseName: string) => {\n    const phase = programPhases.find(p => p.phase === phaseName);\n    return phase?.status || \"not_started\";\n  };\n\n  const getPhaseProgress = (phaseName: string) => {\n    const phase = programPhases.find(p => p.phase === phaseName);\n    if (!phase) return 0;\n    \n    const stages = phaseStages.filter(s => s.programPhaseId === phase.id);\n    if (stages.length === 0) return 0;\n    \n    const completedStages = stages.filter(s => s.status === \"completed\");\n    return Math.round((completedStages.length / stages.length) * 100);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\": return \"bg-green-100 text-green-800\";\n      case \"in_progress\": return \"bg-blue-100 text-blue-800\"; \n      case \"not_started\": return \"bg-gray-100 text-gray-800\";\n      default: return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"completed\": return <CheckCircle size={16} className=\"text-green-600\" />;\n      case \"in_progress\": return <Clock size={16} className=\"text-blue-600\" />;\n      case \"not_started\": return <Pause size={16} className=\"text-gray-600\" />;\n      default: return <Pause size={16} className=\"text-gray-600\" />;\n    }\n  };\n\n  const canStartPhase = (phaseName: string) => {\n    const phaseKeys = Object.keys(PROJECT_PHASES);\n    const currentIndex = phaseKeys.indexOf(phaseName);\n    \n    if (currentIndex === 0) return true; // First phase can always start\n    \n    const previousPhase = phaseKeys[currentIndex - 1];\n    const previousPhaseStatus = getPhaseStatus(previousPhase);\n    return previousPhaseStatus === \"completed\";\n  };\n\n  const handleStartPhase = async (phaseName: string) => {\n    if (!canStartPhase(phaseName)) {\n      toast({\n        title: \"Cannot start phase\",\n        description: \"Previous phase must be completed first\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Create or update phase\n    const existingPhase = programPhases.find(p => p.phase === phaseName);\n    if (existingPhase) {\n      await updatePhaseMutation.mutateAsync({\n        phaseId: existingPhase.id,\n        updates: { status: \"in_progress\", startDate: new Date() }\n      });\n    }\n    \n    setCurrentPhase(phaseName);\n  };\n\n  const handleCompleteStage = async (stage: PhaseStage) => {\n    await updateStageMutation.mutateAsync({\n      stageId: stage.id,\n      updates: { \n        status: \"completed\", \n        completedDate: new Date(),\n        userInputs: stageInputs[stage.id] || {}\n      }\n    });\n  };\n\n  const renderPhaseOverview = () => (\n    <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n      {Object.entries(PROJECT_PHASES).map(([key, phase]) => {\n        const status = getPhaseStatus(key);\n        const progress = getPhaseProgress(key);\n        const canStart = canStartPhase(key);\n        \n        return (\n          <Card key={key} className={`cursor-pointer transition-all ${\n            currentPhase === key ? \"ring-2 ring-primary-500\" : \"\"\n          }`} onClick={() => setCurrentPhase(key)}>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between mb-2\">\n                {phase.icon}\n                {getStatusIcon(status)}\n              </div>\n              <h3 className=\"font-semibold text-sm mb-2\">{phase.name}</h3>\n              <Badge className={`${getStatusColor(status)} text-xs mb-2`}>\n                {status.replace(\"_\", \" \")}\n              </Badge>\n              <Progress value={progress} className=\"h-2\" />\n              <p className=\"text-xs text-gray-500 mt-1\">{progress}% complete</p>\n              {status === \"not_started\" && (\n                <Button \n                  size=\"sm\" \n                  className=\"w-full mt-2\" \n                  disabled={!canStart}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleStartPhase(key);\n                  }}\n                >\n                  {canStart ? \"Start Phase\" : \"Locked\"}\n                </Button>\n              )}\n            </CardContent>\n          </Card>\n        );\n      })}\n    </div>\n  );\n\n  const renderPhaseDetails = () => {\n    const phase = PROJECT_PHASES[currentPhase as keyof typeof PROJECT_PHASES];\n    const programPhase = programPhases.find(p => p.phase === currentPhase);\n    const stages = phaseStages.filter(s => s.programPhaseId === programPhase?.id);\n    \n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            {phase.icon}\n            <h2 className=\"text-2xl font-bold\">{phase.name}</h2>\n            <Badge className={getStatusColor(getPhaseStatus(currentPhase))}>\n              {getPhaseStatus(currentPhase).replace(\"_\", \" \")}\n            </Badge>\n          </div>\n          {getPhaseStatus(currentPhase) === \"in_progress\" && (\n            <Button>Complete Phase</Button>\n          )}\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Target size={16} className=\"text-blue-600\" />\n                <span className=\"font-medium\">Phase Progress</span>\n              </div>\n              <Progress value={getPhaseProgress(currentPhase)} className=\"mb-2\" />\n              <p className=\"text-sm text-gray-600\">{getPhaseProgress(currentPhase)}% complete</p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Users size={16} className=\"text-green-600\" />\n                <span className=\"font-medium\">Stages Complete</span>\n              </div>\n              <p className=\"text-2xl font-bold\">\n                {stages.filter(s => s.status === \"completed\").length} / {phase.stages.length}\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Calendar size={16} className=\"text-orange-600\" />\n                <span className=\"font-medium\">Duration</span>\n              </div>\n              <p className=\"text-sm text-gray-600\">\n                {programPhase?.startDate \n                  ? `Started ${new Date(programPhase.startDate).toLocaleDateString()}`\n                  : \"Not started\"\n                }\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Phase Stages */}\n        <div className=\"space-y-4\">\n          <h3 className=\"text-lg font-semibold\">Phase Stages</h3>\n          {phase.stages.map((stageTemplate, index) => {\n            const stage = stages.find(s => s.stageName === stageTemplate.name);\n            const isCompleted = stage?.status === \"completed\";\n            const isInProgress = stage?.status === \"in_progress\";\n            const canStart = index === 0 || stages.find(s => s.stageOrder === index)?.status === \"completed\";\n            \n            return (\n              <Card key={stageTemplate.name} className={`${\n                isCompleted ? \"bg-green-50 border-green-200\" : \n                isInProgress ? \"bg-blue-50 border-blue-200\" : \"\"\n              }`}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        {getStatusIcon(stage?.status || \"not_started\")}\n                        <h4 className=\"font-medium\">{stageTemplate.name}</h4>\n                        <Badge className={getStatusColor(stage?.status || \"not_started\")}>\n                          {stage?.status?.replace(\"_\", \" \") || \"Not Started\"}\n                        </Badge>\n                      </div>\n                      <p className=\"text-sm text-gray-600 mb-3\">{stageTemplate.description}</p>\n                      \n                      {isInProgress && (\n                        <div className=\"space-y-3\">\n                          <div className=\"flex items-start gap-2\">\n                            <Brain size={16} className=\"text-purple-600 mt-1\" />\n                            <div className=\"flex-1\">\n                              <p className=\"text-sm font-medium text-purple-800 mb-1\">AI Recommendations:</p>\n                              <div className=\"bg-purple-50 p-3 rounded text-sm\">\n                                <p>• Consider using standardized templates for consistency</p>\n                                <p>• Engage key stakeholders early in the process</p>\n                                <p>• Document all decisions and rationale</p>\n                              </div>\n                            </div>\n                          </div>\n                          \n                          <div>\n                            <Label className=\"text-sm font-medium\">Stage Inputs:</Label>\n                            <Textarea \n                              placeholder=\"Enter your work, findings, and outputs for this stage...\"\n                              value={stageInputs[stage?.id || \"\"] || \"\"}\n                              onChange={(e) => setStageInputs(prev => ({\n                                ...prev,\n                                [stage?.id || \"\"]: e.target.value\n                              }))}\n                              className=\"mt-1\"\n                            />\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"ml-4\">\n                      {!isCompleted && canStart && (\n                        <Button\n                          size=\"sm\"\n                          onClick={() => stage && handleCompleteStage(stage)}\n                          disabled={!stageInputs[stage?.id || \"\"]}\n                        >\n                          Complete Stage\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {!canStart && !isCompleted && (\n                    <Alert>\n                      <AlertTriangle size={16} />\n                      <AlertDescription>\n                        Complete the previous stage before starting this one.\n                      </AlertDescription>\n                    </Alert>\n                  )}\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\">Program Phase Management</h1>\n        <div className=\"flex items-center gap-2\">\n          <Badge variant=\"outline\">{program.name}</Badge>\n          <Badge className={getStatusColor(program.status || \"planning\")}>\n            {program.status?.replace(\"_\", \" \") || \"Planning\"}\n          </Badge>\n        </div>\n      </div>\n\n      <Tabs value=\"overview\" className=\"space-y-6\">\n        <TabsList>\n          <TabsTrigger value=\"overview\">Phase Overview</TabsTrigger>\n          <TabsTrigger value=\"details\">Phase Details</TabsTrigger>\n          <TabsTrigger value=\"templates\">Templates & Best Practices</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-6\">\n          {renderPhaseOverview()}\n        </TabsContent>\n\n        <TabsContent value=\"details\" className=\"space-y-6\">\n          {renderPhaseDetails()}\n        </TabsContent>\n\n        <TabsContent value=\"templates\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Phase Templates & Best Practices</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <h4 className=\"font-medium mb-3\">Available Templates</h4>\n                  <div className=\"space-y-2\">\n                    <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n                      <FileText size={16} className=\"mr-2\" />\n                      Project Charter Template\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n                      <FileText size={16} className=\"mr-2\" />\n                      Stakeholder Analysis Template\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n                      <FileText size={16} className=\"mr-2\" />\n                      Risk Register Template\n                    </Button>\n                  </div>\n                </div>\n                \n                <div>\n                  <h4 className=\"font-medium mb-3\">Best Practices</h4>\n                  <div className=\"space-y-3 text-sm\">\n                    <div className=\"p-3 bg-blue-50 rounded\">\n                      <p className=\"font-medium text-blue-800\">Early Stakeholder Engagement</p>\n                      <p className=\"text-blue-700\">Identify and engage stakeholders from the very beginning</p>\n                    </div>\n                    <div className=\"p-3 bg-green-50 rounded\">\n                      <p className=\"font-medium text-green-800\">Comprehensive Documentation</p>\n                      <p className=\"text-green-700\">Document all decisions, assumptions, and constraints</p>\n                    </div>\n                    <div className=\"p-3 bg-purple-50 rounded\">\n                      <p className=\"font-medium text-purple-800\">Iterative Planning</p>\n                      <p className=\"text-purple-700\">Plan progressively as more information becomes available</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}","size_bytes":20387},"client/src/pages/ProgramDetails.tsx":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { calculateProgramHealth, getHealthBadge, getHealthProgressColor } from \"@/lib/healthCalculation\";\nimport {\n  ArrowLeft,\n  Users,\n  MessageSquare,\n  TrendingUp,\n  AlertTriangle,\n  CheckCircle,\n  Clock,\n  Target,\n  Brain,\n  UserCheck,\n  Mail,\n  Phone,\n  Calendar,\n  MapPin,\n  Building,\n  Zap,\n  Star,\n  Eye,\n  Edit,\n  Plus,\n  Flag,\n  ChartGantt,\n  Activity,\n  BarChart3,\n  FileText,\n  Link2,\n  Gauge\n} from \"lucide-react\";\n\ninterface ProgramDetailsProps {\n  programId: string;\n}\n\nexport default function ProgramDetails({ programId }: ProgramDetailsProps) {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Fetch program data\n  const { data: programs = [] } = useQuery({ queryKey: [\"/api/programs\"] });\n  const { data: stakeholders = [] } = useQuery({ queryKey: [\"/api/stakeholders\"] });\n  const { data: risks = [] } = useQuery({ queryKey: [\"/api/risks\"] });\n  const { data: milestones = [] } = useQuery({ queryKey: [\"/api/milestones\"] });\n  const { data: dependencies = [] } = useQuery({ queryKey: [\"/api/dependencies\"] });\n  const { data: adopters = [] } = useQuery({ queryKey: [\"/api/adopters\"] });\n\n  const program = programs.find(p => p.id === programId);\n\n  if (!program) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Program Not Found</h3>\n          <p className=\"text-gray-500 mb-4\">The requested program could not be found.</p>\n          <Button onClick={() => setLocation(\"/programs\")}>Back to Programs</Button>\n        </div>\n      </div>\n    );\n  }\n\n  // Filter data for this program\n  const programStakeholders = stakeholders.filter(s => s.programId === programId);\n  const programRisks = risks.filter(r => r.programId === programId);\n  const programMilestones = milestones.filter(m => m.programId === programId);\n  const programDependencies = dependencies.filter(d => d.programId === programId);\n  const programAdopters = adopters.filter(a => a.programId === programId);\n\n  // Calculate missing components for health scoring - MUST MATCH DASHBOARD EXACTLY\n  const getMissingComponents = () => {\n    const missing = [];\n    if (!program.description || program.description.trim().length < 10) missing.push('Description');\n    if (!program.ownerId) missing.push('Owner');\n    if (!program.startDate) missing.push('Start Date');\n    if (!program.endDate) missing.push('End Date');\n    if (!program.objectives || (Array.isArray(program.objectives) && !program.objectives.length)) missing.push('Objectives');\n    if (!program.kpis || (Array.isArray(program.kpis) && !program.kpis.length)) missing.push('KPIs');\n    if (programRisks.length === 0) missing.push('Risks');\n    if (programMilestones.length === 0) missing.push('Milestones');\n    if (programAdopters.length === 0) missing.push('Adopter Teams');\n    return missing;\n  };\n\n  // Calculate program health using centralized utility\n  const healthMetrics = calculateProgramHealth({\n    risks: programRisks,\n    milestones: programMilestones,\n    dependencies: programDependencies,\n    missingComponents: getMissingComponents().length\n  });\n\n  // Get upcoming items (next 30 days)\n  const getUpcomingItems = () => {\n    const today = new Date();\n    const thirtyDaysFromNow = new Date(today.getTime() + (30 * 24 * 60 * 60 * 1000));\n    \n    const upcomingMilestones = programMilestones.filter(m => {\n      if (!m.dueDate || m.status === 'completed') return false;\n      const dueDate = new Date(m.dueDate);\n      return dueDate >= today && dueDate <= thirtyDaysFromNow;\n    }).sort((a, b) => new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime());\n\n    return { upcomingMilestones };\n  };\n\n  const upcoming = getUpcomingItems();\n\n  // Generate program summary for stakeholders\n  const generateProgramSummary = () => {\n    const completedMilestones = programMilestones.filter(m => m.status === 'completed').length;\n    const totalMilestones = programMilestones.length;\n    const mitigatedRisks = programRisks.filter(r => r.status === 'mitigated' || r.status === 'resolved').length;\n    \n    const summary = `The ${program.name} is currently in ${program.status} status with ${healthMetrics.score}% health score. The program encompasses ${programMilestones.length + programRisks.length + programDependencies.length + programStakeholders.length} tracked components including ${programMilestones.length} milestones, ${programRisks.length} risks, ${programDependencies.length} dependencies, and ${programStakeholders.length} stakeholders. Progress indicates ${completedMilestones} of ${totalMilestones} milestones completed (${totalMilestones > 0 ? Math.round((completedMilestones/totalMilestones) * 100) : 0}%) with ${mitigatedRisks} risks successfully mitigated.\n\n    ${healthMetrics.status === 'At Risk' ? 'Immediate attention required due to ' + healthMetrics.breakdown.criticalRisks + ' high-severity risks and ' + healthMetrics.breakdown.overdueMilestones + ' overdue milestones.' : \n      healthMetrics.score < 60 ? 'Program requires monitoring with ' + (healthMetrics.breakdown.criticalRisks + healthMetrics.breakdown.overdueMilestones) + ' items needing attention.' :\n      'Program is performing well with no critical issues identified.'} Key focus areas include ${upcoming.upcomingMilestones.length > 0 ? upcoming.upcomingMilestones.length + ' upcoming milestones in the next 30 days' : 'maintaining current momentum'} and ${programDependencies.filter(d => d.status === 'at_risk').length > 0 ? 'resolving at-risk dependencies' : 'dependency management'}.`;\n    \n    return summary;\n  };\n\n  // PMI Stakeholder Analysis - Power/Interest Grid\n  const getStakeholderPowerInterestCategory = (stakeholder: any) => {\n    const power = stakeholder.influenceLevel || 1;\n    const interest = stakeholder.supportLevel || 1;\n    \n    if (power >= 4 && interest >= 4) return { category: \"Manage Closely\", color: \"bg-red-100 text-red-800\", priority: \"Critical\" };\n    if (power >= 4 && interest < 4) return { category: \"Keep Satisfied\", color: \"bg-yellow-100 text-yellow-800\", priority: \"High\" };\n    if (power < 4 && interest >= 4) return { category: \"Keep Informed\", color: \"bg-blue-100 text-blue-800\", priority: \"Medium\" };\n    return { category: \"Monitor\", color: \"bg-gray-100 text-gray-800\", priority: \"Low\" };\n  };\n\n  // Calculate stakeholder management completeness based on PMI standards\n  const getStakeholderCompleteness = () => {\n    if (programStakeholders.length === 0) return { percentage: 0, missing: [\"Stakeholder identification\"] };\n    \n    const requirements = [\n      \"Basic Contact Info\",\n      \"Role Definition\", \n      \"Influence Level\",\n      \"Support Level\",\n      \"Leadership Style\",\n      \"Communication Preference\",\n      \"Engagement Strategy\"\n    ];\n    \n    let completed = 0;\n    const missing = [];\n    \n    // Check overall stakeholder coverage\n    if (programStakeholders.length > 0) completed++;\n    else missing.push(\"Stakeholder identification\");\n    \n    // Check data completeness across stakeholders\n    const hasRoles = programStakeholders.some(s => s.role);\n    const hasInfluence = programStakeholders.some(s => s.influenceLevel);\n    const hasSupport = programStakeholders.some(s => s.supportLevel);\n    const hasLeadershipStyle = programStakeholders.some(s => s.leadershipStyle);\n    const hasCommPref = programStakeholders.some(s => s.preferredCommunication);\n    \n    if (hasRoles) completed++; else missing.push(\"Role definitions\");\n    if (hasInfluence) completed++; else missing.push(\"Influence level assessment\");\n    if (hasSupport) completed++; else missing.push(\"Support level evaluation\");\n    if (hasLeadershipStyle) completed++; else missing.push(\"Leadership style analysis\");\n    if (hasCommPref) completed++; else missing.push(\"Communication preferences\");\n    if (programStakeholders.length >= 3) completed++; else missing.push(\"Comprehensive stakeholder mapping\");\n\n    return {\n      percentage: Math.round((completed / requirements.length) * 100),\n      missing,\n      completed\n    };\n  };\n\n  const stakeholderCompleteness = getStakeholderCompleteness();\n\n  // PMI recommended next actions\n  const getNextActions = () => {\n    const actions = [];\n    \n    if (programStakeholders.length === 0) {\n      actions.push({\n        priority: \"Critical\",\n        action: \"Conduct stakeholder identification workshop\",\n        description: \"Use brainstorming and analysis techniques to identify all project stakeholders\",\n        dueDate: \"Immediate\",\n        pmiBasis: \"PMBOK Stakeholder Management - Identify Stakeholders process\"\n      });\n    }\n    \n    if (programStakeholders.length < 3) {\n      actions.push({\n        priority: \"High\", \n        action: \"Complete stakeholder mapping\",\n        description: \"Ensure all key stakeholder groups are identified (sponsors, users, vendors, etc.)\",\n        dueDate: \"Within 1 week\",\n        pmiBasis: \"PMI Standard for Project Management - Stakeholder engagement\"\n      });\n    }\n    \n    const missingInfluence = programStakeholders.filter(s => !s.influenceLevel).length;\n    if (missingInfluence > 0) {\n      actions.push({\n        priority: \"High\",\n        action: `Assess influence levels for ${missingInfluence} stakeholder(s)`,\n        description: \"Rate stakeholder power/authority on 1-5 scale for proper engagement strategy\",\n        dueDate: \"Within 3 days\",\n        pmiBasis: \"PMI Power/Interest Grid methodology\"\n      });\n    }\n    \n    const missingCommPref = programStakeholders.filter(s => !s.preferredCommunication).length;\n    if (missingCommPref > 0) {\n      actions.push({\n        priority: \"Medium\",\n        action: `Define communication preferences for ${missingCommPref} stakeholder(s)`,\n        description: \"Document preferred communication methods and frequency\",\n        dueDate: \"Within 1 week\", \n        pmiBasis: \"PMBOK Communications Management integration\"\n      });\n    }\n\n    return actions;\n  };\n\n  const nextActions = getNextActions();\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"Critical\": return \"bg-red-100 text-red-800 border-red-200\";\n      case \"High\": return \"bg-yellow-100 text-yellow-800 border-yellow-200\";\n      case \"Medium\": return \"bg-blue-100 text-blue-800 border-blue-200\";\n      default: return \"bg-gray-100 text-gray-800 border-gray-200\";\n    }\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col overflow-hidden\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200 px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\"\n              onClick={() => setLocation(\"/dashboard\")}\n              className=\"text-gray-600 hover:text-gray-800\"\n            >\n              <ArrowLeft size={16} className=\"mr-2\" />\n              Back to Dashboard\n            </Button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">{program.name}</h1>\n              <p className=\"text-gray-600 mt-1\">{program.description}</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Badge className={`border ${program.status === 'active' ? 'bg-green-100 text-green-800 border-green-200' : 'bg-blue-100 text-blue-800 border-blue-200'}`}>\n              {program.status || 'planning'}\n            </Badge>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <main className=\"flex-1 overflow-y-auto p-6\">\n        <Tabs defaultValue=\"overview\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-6\">\n            <TabsTrigger value=\"overview\">Program Snapshot</TabsTrigger>\n            <TabsTrigger value=\"risks\">Risks</TabsTrigger>\n            <TabsTrigger value=\"milestones\">Milestones</TabsTrigger>\n            <TabsTrigger value=\"dependencies\">Dependencies</TabsTrigger>\n            <TabsTrigger value=\"adopters\">Team Adoption</TabsTrigger>\n            <TabsTrigger value=\"stakeholders\">Stakeholders</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"stakeholders\" className=\"space-y-6 mt-6\">\n            {/* Stakeholder Management Dashboard */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              {/* Stakeholder Completeness */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Target className=\"h-5 w-5 text-blue-600\" />\n                    PMI Compliance Score\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div>\n                      <div className=\"flex items-center justify-between text-sm mb-2\">\n                        <span>Stakeholder Management</span>\n                        <span className={`font-semibold ${stakeholderCompleteness.percentage >= 80 ? 'text-green-600' : stakeholderCompleteness.percentage >= 60 ? 'text-yellow-600' : 'text-red-600'}`}>\n                          {stakeholderCompleteness.percentage}%\n                        </span>\n                      </div>\n                      <Progress value={stakeholderCompleteness.percentage} className=\"w-full\" />\n                    </div>\n                    <div className=\"text-sm text-gray-600\">\n                      <p><strong>{stakeholderCompleteness.completed}</strong> of 7 PMI requirements completed</p>\n                      <p><strong>{programStakeholders.length}</strong> stakeholders identified</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Power/Interest Analysis */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Zap className=\"h-5 w-5 text-purple-600\" />\n                    Power/Interest Grid\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {[\"Manage Closely\", \"Keep Satisfied\", \"Keep Informed\", \"Monitor\"].map(category => {\n                      const count = programStakeholders.filter(s => \n                        getStakeholderPowerInterestCategory(s).category === category\n                      ).length;\n                      const { color } = getStakeholderPowerInterestCategory({ influenceLevel: category.includes(\"Manage\") ? 5 : category.includes(\"Satisfied\") ? 5 : category.includes(\"Informed\") ? 2 : 1, supportLevel: category.includes(\"Manage\") ? 5 : category.includes(\"Informed\") ? 5 : category.includes(\"Satisfied\") ? 2 : 1 });\n                      \n                      return (\n                        <div key={category} className=\"flex items-center justify-between\">\n                          <span className=\"text-sm text-gray-600\">{category}</span>\n                          <Badge className={`${color} text-xs`}>{count}</Badge>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Next Actions */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Brain className=\"h-5 w-5 text-green-600\" />\n                    AI Recommendations\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {nextActions.slice(0, 3).map((action, index) => (\n                      <div key={index} className=\"space-y-2\">\n                        <Badge className={`${getPriorityColor(action.priority)} text-xs`}>\n                          {action.priority}\n                        </Badge>\n                        <p className=\"text-sm font-medium\">{action.action}</p>\n                        <p className=\"text-xs text-gray-500\">{action.dueDate}</p>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Missing Requirements Alert */}\n            {stakeholderCompleteness.missing.length > 0 && (\n              <Card className=\"border-yellow-200 bg-yellow-50\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start gap-3\">\n                    <AlertTriangle className=\"h-5 w-5 text-yellow-600 mt-0.5\" />\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-medium text-yellow-800 mb-2\">PMI Compliance Gaps Identified</h4>\n                      <div className=\"space-y-1\">\n                        {stakeholderCompleteness.missing.map((item, index) => (\n                          <p key={index} className=\"text-sm text-yellow-700\">• {item}</p>\n                        ))}\n                      </div>\n                      <Button \n                        size=\"sm\" \n                        className=\"mt-3 bg-yellow-600 hover:bg-yellow-700\"\n                        onClick={() => {\n                          // TODO: Navigate to stakeholder form/wizard\n                          toast({\n                            title: \"Feature Coming Soon\",\n                            description: \"Stakeholder management wizard will be available shortly.\",\n                          });\n                        }}\n                      >\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        Address Gaps\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Stakeholders List */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    <Users className=\"h-5 w-5 text-blue-600\" />\n                    Program Stakeholders ({programStakeholders.length})\n                  </div>\n                  <Button size=\"sm\" onClick={() => {\n                    toast({\n                      title: \"Feature Coming Soon\", \n                      description: \"Add stakeholder functionality will be available shortly.\",\n                    });\n                  }}>\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Stakeholder\n                  </Button>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {programStakeholders.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Users size={48} className=\"mx-auto text-gray-400 mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Stakeholders Identified</h3>\n                    <p className=\"text-gray-500 mb-4\">\n                      According to PMI standards, stakeholder identification is critical for program success.\n                      Start by identifying key sponsors, users, and other affected parties.\n                    </p>\n                    <Button onClick={() => {\n                      toast({\n                        title: \"Feature Coming Soon\",\n                        description: \"Stakeholder identification wizard will be available shortly.\",\n                      });\n                    }}>\n                      <Target className=\"h-4 w-4 mr-2\" />\n                      Start Stakeholder Analysis\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {programStakeholders.map((stakeholder) => {\n                      const analysis = getStakeholderPowerInterestCategory(stakeholder);\n                      return (\n                        <div key={stakeholder.id} className=\"border rounded-lg p-4 hover:bg-gray-50 transition-colors\">\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-3 mb-2\">\n                                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                                  <UserCheck className=\"h-5 w-5 text-blue-600\" />\n                                </div>\n                                <div>\n                                  <h4 className=\"font-medium text-gray-900\">{stakeholder.name}</h4>\n                                  <p className=\"text-sm text-gray-500\">{stakeholder.role || \"Role not defined\"}</p>\n                                </div>\n                              </div>\n                              \n                              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3\">\n                                <div>\n                                  <span className=\"text-xs text-gray-500\">Influence Level</span>\n                                  <div className=\"flex items-center gap-1 mt-1\">\n                                    {Array.from({ length: 5 }).map((_, i) => (\n                                      <Star \n                                        key={i} \n                                        size={12} \n                                        className={i < (stakeholder.influenceLevel || 0) ? \"text-yellow-400 fill-yellow-400\" : \"text-gray-300\"} \n                                      />\n                                    ))}\n                                  </div>\n                                </div>\n                                <div>\n                                  <span className=\"text-xs text-gray-500\">Support Level</span>\n                                  <div className=\"flex items-center gap-1 mt-1\">\n                                    {Array.from({ length: 5 }).map((_, i) => (\n                                      <Star \n                                        key={i} \n                                        size={12} \n                                        className={i < (stakeholder.supportLevel || 0) ? \"text-green-400 fill-green-400\" : \"text-gray-300\"} \n                                      />\n                                    ))}\n                                  </div>\n                                </div>\n                                <div>\n                                  <span className=\"text-xs text-gray-500\">Leadership Style</span>\n                                  <p className=\"text-sm font-medium mt-1\">{stakeholder.leadershipStyle || \"Not assessed\"}</p>\n                                </div>\n                                <div>\n                                  <span className=\"text-xs text-gray-500\">Communication</span>\n                                  <p className=\"text-sm font-medium mt-1\">{stakeholder.communicationStyle || \"Not defined\"}</p>\n                                </div>\n                              </div>\n                            </div>\n                            \n                            <div className=\"flex flex-col items-end gap-2\">\n                              <Badge className={analysis.color}>\n                                {analysis.category}\n                              </Badge>\n                              <div className=\"flex gap-1\">\n                                <Button size=\"sm\" variant=\"outline\" onClick={() => {\n                                  toast({\n                                    title: \"Feature Coming Soon\",\n                                    description: \"Stakeholder detail view will be available shortly.\",\n                                  });\n                                }}>\n                                  <Eye className=\"h-4 w-4\" />\n                                </Button>\n                                <Button size=\"sm\" variant=\"outline\" onClick={() => {\n                                  toast({\n                                    title: \"Feature Coming Soon\", \n                                    description: \"Edit stakeholder functionality will be available shortly.\",\n                                  });\n                                }}>\n                                  <Edit className=\"h-4 w-4\" />\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* PMI Recommendations */}\n            {nextActions.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Brain className=\"h-5 w-5 text-purple-600\" />\n                    PMI-Based Action Plan\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {nextActions.map((action, index) => (\n                      <div key={index} className=\"border-l-4 border-blue-500 pl-4 py-2\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <Badge className={getPriorityColor(action.priority)}>\n                                {action.priority}\n                              </Badge>\n                              <span className=\"text-sm text-gray-500\">{action.dueDate}</span>\n                            </div>\n                            <h4 className=\"font-medium text-gray-900 mb-1\">{action.action}</h4>\n                            <p className=\"text-sm text-gray-600 mb-2\">{action.description}</p>\n                            <p className=\"text-xs text-gray-500 italic\">PMI Basis: {action.pmiBasis}</p>\n                          </div>\n                          <Button size=\"sm\" variant=\"outline\">\n                            <CheckCircle className=\"h-4 w-4 mr-2\" />\n                            Mark Complete\n                          </Button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"adopters\" className=\"space-y-6 mt-6\">\n            {/* Team Adoption Dashboard */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              {/* Adoption Overview */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Users className=\"h-5 w-5 text-blue-600\" />\n                    Adoption Overview\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"text-center\">\n                      <div className=\"text-3xl font-bold text-blue-600\">{programAdopters.length}</div>\n                      <div className=\"text-sm text-gray-600\">Teams Adopting</div>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span>Not Started</span>\n                        <span className=\"font-medium text-gray-600\">\n                          {programAdopters.filter(a => a.status === 'not_started').length}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between text-sm\">\n                        <span>In Progress</span>\n                        <span className=\"font-medium text-blue-600\">\n                          {programAdopters.filter(a => a.status === 'in_progress').length}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between text-sm\">\n                        <span>Completed</span>\n                        <span className=\"font-medium text-green-600\">\n                          {programAdopters.filter(a => a.status === 'completed').length}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between text-sm\">\n                        <span>Blocked</span>\n                        <span className=\"font-medium text-red-600\">\n                          {programAdopters.filter(a => a.status === 'blocked').length}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"pt-2 border-t\">\n                      <div className=\"text-sm text-gray-600\">\n                        <strong>Overall Progress:</strong> {programAdopters.length > 0 ? Math.round((programAdopters.filter(a => a.status === 'completed').length / programAdopters.length) * 100) : 0}%\n                      </div>\n                      <Progress \n                        value={programAdopters.length > 0 ? (programAdopters.filter(a => a.status === 'completed').length / programAdopters.length) * 100 : 0} \n                        className=\"w-full mt-2\" \n                      />\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Adoption Readiness */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <TrendingUp className=\"h-5 w-5 text-green-600\" />\n                    Readiness Assessment\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm\">High Readiness</span>\n                        <div className=\"flex items-center gap-2\">\n                          <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n                          <span className=\"text-sm font-medium\">\n                            {programAdopters.filter(a => a.readinessLevel === 'high').length}\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm\">Medium Readiness</span>\n                        <div className=\"flex items-center gap-2\">\n                          <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\n                          <span className=\"text-sm font-medium\">\n                            {programAdopters.filter(a => a.readinessLevel === 'medium').length}\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm\">Low Readiness</span>\n                        <div className=\"flex items-center gap-2\">\n                          <div className=\"w-3 h-3 bg-red-500 rounded-full\"></div>\n                          <span className=\"text-sm font-medium\">\n                            {programAdopters.filter(a => a.readinessLevel === 'low').length}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    {programAdopters.filter(a => a.readinessLevel === 'low' || a.status === 'blocked').length > 0 && (\n                      <div className=\"pt-2 border-t\">\n                        <div className=\"text-sm text-red-600 font-medium\">\n                          ⚠️ {programAdopters.filter(a => a.readinessLevel === 'low' || a.status === 'blocked').length} teams need attention\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Next Actions */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Target className=\"h-5 w-5 text-purple-600\" />\n                    Next Actions\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {programAdopters.filter(a => a.status === 'not_started').length > 0 && (\n                      <div className=\"text-sm\">\n                        <span className=\"font-medium\">• Initiate Onboarding:</span>\n                        <br />\n                        {programAdopters.filter(a => a.status === 'not_started').length} teams ready to start\n                      </div>\n                    )}\n                    {programAdopters.filter(a => a.status === 'blocked').length > 0 && (\n                      <div className=\"text-sm\">\n                        <span className=\"font-medium text-red-600\">• Resolve Blockers:</span>\n                        <br />\n                        {programAdopters.filter(a => a.status === 'blocked').length} teams need unblocking\n                      </div>\n                    )}\n                    {programAdopters.filter(a => a.readinessLevel === 'low').length > 0 && (\n                      <div className=\"text-sm\">\n                        <span className=\"font-medium text-yellow-600\">• Readiness Support:</span>\n                        <br />\n                        {programAdopters.filter(a => a.readinessLevel === 'low').length} teams need preparation\n                      </div>\n                    )}\n                    {programAdopters.filter(a => a.status === 'in_progress').length > 0 && (\n                      <div className=\"text-sm\">\n                        <span className=\"font-medium text-blue-600\">• Monitor Progress:</span>\n                        <br />\n                        {programAdopters.filter(a => a.status === 'in_progress').length} teams in progress\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Detailed Team List */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Building className=\"h-5 w-5 text-blue-600\" />\n                  Team Details & Onboarding Status\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {programAdopters.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Users className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No Adopter Teams</h3>\n                    <p className=\"text-gray-500 mb-4\">Add teams that will be adopting this program to track their onboarding progress.</p>\n                    <Button onClick={() => {\n                      toast({\n                        title: \"Feature Coming Soon\",\n                        description: \"Add adopter team functionality will be available shortly.\",\n                      });\n                    }}>\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Add Adopter Team\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {programAdopters.map((adopter) => {\n                      const getStatusColor = (status: string) => {\n                        switch (status) {\n                          case 'completed': return 'bg-green-100 text-green-800 border-green-200';\n                          case 'in_progress': return 'bg-blue-100 text-blue-800 border-blue-200';\n                          case 'blocked': return 'bg-red-100 text-red-800 border-red-200';\n                          default: return 'bg-gray-100 text-gray-800 border-gray-200';\n                        }\n                      };\n\n                      const getReadinessColor = (level: string) => {\n                        switch (level) {\n                          case 'high': return 'text-green-600';\n                          case 'medium': return 'text-yellow-600';\n                          case 'low': return 'text-red-600';\n                          default: return 'text-gray-600';\n                        }\n                      };\n\n                      return (\n                        <div key={adopter.id} className=\"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors\">\n                          <div className=\"flex items-start justify-between\">\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-3 mb-3\">\n                                <div>\n                                  <h4 className=\"font-medium text-gray-900\">{adopter.teamName}</h4>\n                                  <p className=\"text-sm text-gray-600\">{adopter.department}</p>\n                                </div>\n                              </div>\n                              \n                              <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-3\">\n                                <div>\n                                  <span className=\"text-xs text-gray-500\">Current Status</span>\n                                  <div className=\"mt-1\">\n                                    <Badge className={getStatusColor(adopter.status)}>\n                                      {adopter.status?.replace('_', ' ') || 'not started'}\n                                    </Badge>\n                                  </div>\n                                </div>\n                                <div>\n                                  <span className=\"text-xs text-gray-500\">Readiness Level</span>\n                                  <p className={`text-sm font-medium mt-1 ${getReadinessColor(adopter.readinessLevel)}`}>\n                                    {adopter.readinessLevel || 'not assessed'}\n                                  </p>\n                                </div>\n                                <div>\n                                  <span className=\"text-xs text-gray-500\">Team Size</span>\n                                  <p className=\"text-sm font-medium mt-1\">{adopter.teamSize || 'N/A'} members</p>\n                                </div>\n                                <div>\n                                  <span className=\"text-xs text-gray-500\">Target Date</span>\n                                  <p className=\"text-sm font-medium mt-1\">\n                                    {adopter.targetDate ? new Date(adopter.targetDate).toLocaleDateString() : 'Not set'}\n                                  </p>\n                                </div>\n                              </div>\n\n                              {adopter.blockers && adopter.blockers.length > 0 && (\n                                <div className=\"mb-3\">\n                                  <span className=\"text-xs text-gray-500\">Current Blockers</span>\n                                  <div className=\"mt-1 space-y-1\">\n                                    {adopter.blockers.map((blocker, index) => (\n                                      <div key={index} className=\"text-sm text-red-600 flex items-center gap-1\">\n                                        <AlertTriangle className=\"h-3 w-3\" />\n                                        {blocker}\n                                      </div>\n                                    ))}\n                                  </div>\n                                </div>\n                              )}\n\n                              {adopter.notes && (\n                                <div className=\"mb-3\">\n                                  <span className=\"text-xs text-gray-500\">Notes</span>\n                                  <p className=\"text-sm text-gray-700 mt-1\">{adopter.notes}</p>\n                                </div>\n                              )}\n                            </div>\n                            \n                            <div className=\"flex flex-col items-end gap-2\">\n                              <div className=\"flex gap-1\">\n                                <Button size=\"sm\" variant=\"outline\" onClick={() => {\n                                  toast({\n                                    title: \"Feature Coming Soon\",\n                                    description: \"Adopter detail view will be available shortly.\",\n                                  });\n                                }}>\n                                  <Eye className=\"h-4 w-4\" />\n                                </Button>\n                                <Button size=\"sm\" variant=\"outline\" onClick={() => {\n                                  toast({\n                                    title: \"Feature Coming Soon\",\n                                    description: \"Edit adopter functionality will be available shortly.\",\n                                  });\n                                }}>\n                                  <Edit className=\"h-4 w-4\" />\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"overview\" className=\"space-y-6 mt-6\">\n            {/* Program Health Dashboard */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              {/* Health Score */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Gauge className=\"h-5 w-5 text-blue-600\" />\n                    Program Health\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"text-center\">\n                      <div className={`text-4xl font-bold ${healthMetrics.color}`}>{healthMetrics.score}%</div>\n                      <div className={`text-lg font-medium ${healthMetrics.color}`}>{healthMetrics.status}</div>\n                    </div>\n                    <Progress value={healthMetrics.score} className=\"w-full\" />\n                    <div className=\"text-sm text-gray-600 space-y-1\">\n                      <p>• {programMilestones.length + programRisks.length + programDependencies.length + programStakeholders.length} components tracked</p>\n                      <p>• {healthMetrics.breakdown.criticalRisks} high-severity risks</p>\n                      <p>• {healthMetrics.breakdown.overdueMilestones} overdue milestones</p>\n                      <p>• {healthMetrics.breakdown.blockedDependencies} blocked dependencies</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Component Summary */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <BarChart3 className=\"h-5 w-5 text-purple-600\" />\n                    Component Overview\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <AlertTriangle className=\"h-4 w-4 text-red-600\" />\n                        <span className=\"text-sm\">Risks</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant=\"outline\">{programRisks.length}</Badge>\n                        <Badge className=\"bg-red-100 text-red-800 text-xs\">\n                          {programRisks.filter(r => r.severity === 'high' || r.severity === 'critical').length} high\n                        </Badge>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <Flag className=\"h-4 w-4 text-blue-600\" />\n                        <span className=\"text-sm\">Milestones</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant=\"outline\">{programMilestones.length}</Badge>\n                        <Badge className=\"bg-green-100 text-green-800 text-xs\">\n                          {programMilestones.filter(m => m.status === 'completed').length} done\n                        </Badge>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <ChartGantt className=\"h-4 w-4 text-purple-600\" />\n                        <span className=\"text-sm\">Dependencies</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant=\"outline\">{programDependencies.length}</Badge>\n                        <Badge className=\"bg-yellow-100 text-yellow-800 text-xs\">\n                          {programDependencies.filter(d => d.status === 'blocked').length} blocked\n                        </Badge>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <Users className=\"h-4 w-4 text-green-600\" />\n                        <span className=\"text-sm\">Stakeholders</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant=\"outline\">{programStakeholders.length}</Badge>\n                        <Badge className=\"bg-blue-100 text-blue-800 text-xs\">\n                          {programStakeholders.filter(s => s.influenceLevel >= 4).length} high influence\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Upcoming Items */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Clock className=\"h-5 w-5 text-orange-600\" />\n                    Upcoming (30 days)\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {upcoming.upcomingMilestones.length === 0 ? (\n                      <p className=\"text-sm text-gray-500 text-center py-4\">No upcoming milestones</p>\n                    ) : (\n                      upcoming.upcomingMilestones.slice(0, 4).map((milestone) => (\n                        <div key={milestone.id} className=\"space-y-1\">\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-sm font-medium\">{milestone.title}</span>\n                            <Badge className=\"text-xs\">{milestone.status}</Badge>\n                          </div>\n                          <div className=\"text-xs text-gray-500\">\n                            Due: {new Date(milestone.dueDate).toLocaleDateString()}\n                          </div>\n                        </div>\n                      ))\n                    )}\n                    {upcoming.upcomingMilestones.length > 4 && (\n                      <p className=\"text-xs text-gray-500 text-center\">\n                        +{upcoming.upcomingMilestones.length - 4} more milestones\n                      </p>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Program Summary */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <FileText className=\"h-5 w-5 text-blue-600\" />\n                  Executive Summary\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"prose prose-sm max-w-none\">\n                  <p className=\"text-gray-700 leading-relaxed\">{generateProgramSummary()}</p>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Critical Alerts */}\n            {(healthMetrics.breakdown.criticalRisks > 0 || healthMetrics.breakdown.overdueMilestones > 0 || healthMetrics.breakdown.blockedDependencies > 0) && (\n              <Card className=\"border-red-200 bg-red-50\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2 text-red-800\">\n                    <AlertTriangle className=\"h-5 w-5\" />\n                    Critical Issues Requiring Attention\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-3\">\n                    {healthMetrics.breakdown.criticalRisks > 0 && (\n                      <div className=\"flex items-center justify-between p-3 bg-white rounded border\">\n                        <div>\n                          <h4 className=\"font-medium text-red-800\">High-Severity Risks</h4>\n                          <p className=\"text-sm text-red-600\">{healthMetrics.breakdown.criticalRisks} risks require immediate mitigation</p>\n                        </div>\n                        <Button size=\"sm\" variant=\"outline\" className=\"border-red-300 text-red-700\">\n                          Review Risks\n                        </Button>\n                      </div>\n                    )}\n                    {healthMetrics.breakdown.overdueMilestones > 0 && (\n                      <div className=\"flex items-center justify-between p-3 bg-white rounded border\">\n                        <div>\n                          <h4 className=\"font-medium text-red-800\">Overdue Milestones</h4>\n                          <p className=\"text-sm text-red-600\">{healthMetrics.breakdown.overdueMilestones} milestones past due date</p>\n                        </div>\n                        <Button size=\"sm\" variant=\"outline\" className=\"border-red-300 text-red-700\">\n                          Review Timeline\n                        </Button>\n                      </div>\n                    )}\n                    {healthMetrics.breakdown.blockedDependencies > 0 && (\n                      <div className=\"flex items-center justify-between p-3 bg-white rounded border\">\n                        <div>\n                          <h4 className=\"font-medium text-red-800\">Blocked Dependencies</h4>\n                          <p className=\"text-sm text-red-600\">{healthMetrics.breakdown.blockedDependencies} dependencies blocking progress</p>\n                        </div>\n                        <Button size=\"sm\" variant=\"outline\" className=\"border-red-300 text-red-700\">\n                          Resolve Blocks\n                        </Button>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Next Steps Recommendations */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Brain className=\"h-5 w-5 text-purple-600\" />\n                  Recommended Next Steps\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {healthMetrics.breakdown.criticalRisks > 0 && (\n                    <div className=\"border-l-4 border-red-500 pl-4 py-2\">\n                      <h4 className=\"font-medium text-gray-900\">1. Address High-Severity Risks</h4>\n                      <p className=\"text-sm text-gray-600\">Conduct risk mitigation workshops for {healthMetrics.breakdown.criticalRisks} critical risks</p>\n                      <span className=\"text-xs text-red-600 font-medium\">Priority: Critical</span>\n                    </div>\n                  )}\n                  {healthMetrics.breakdown.overdueMilestones > 0 && (\n                    <div className=\"border-l-4 border-yellow-500 pl-4 py-2\">\n                      <h4 className=\"font-medium text-gray-900\">2. Reschedule Overdue Milestones</h4>\n                      <p className=\"text-sm text-gray-600\">Review and update timeline for {healthMetrics.breakdown.overdueMilestones} overdue deliverables</p>\n                      <span className=\"text-xs text-yellow-600 font-medium\">Priority: High</span>\n                    </div>\n                  )}\n                  {upcoming.upcomingMilestones.length > 0 && (\n                    <div className=\"border-l-4 border-blue-500 pl-4 py-2\">\n                      <h4 className=\"font-medium text-gray-900\">3. Prepare for Upcoming Deliverables</h4>\n                      <p className=\"text-sm text-gray-600\">Focus on {upcoming.upcomingMilestones.length} milestones due in next 30 days</p>\n                      <span className=\"text-xs text-blue-600 font-medium\">Priority: Medium</span>\n                    </div>\n                  )}\n                  {programStakeholders.filter(s => !s.leadershipStyle).length > 0 && (\n                    <div className=\"border-l-4 border-green-500 pl-4 py-2\">\n                      <h4 className=\"font-medium text-gray-900\">4. Complete Stakeholder Analysis</h4>\n                      <p className=\"text-sm text-gray-600\">Profile {programStakeholders.filter(s => !s.leadershipStyle).length} stakeholders for better engagement</p>\n                      <span className=\"text-xs text-green-600 font-medium\">Priority: Medium</span>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"risks\" className=\"mt-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Program Risks ({programRisks.length})</CardTitle>\n              </CardHeader>\n              <CardContent>\n                {programRisks.length === 0 ? (\n                  <p className=\"text-gray-500 text-center py-8\">No risks identified for this program.</p>\n                ) : (\n                  <div className=\"space-y-2\">\n                    {programRisks.map((risk) => (\n                      <div key={risk.id} className=\"flex items-center justify-between p-3 border rounded\">\n                        <div>\n                          <h4 className=\"font-medium\">{risk.title}</h4>\n                          <p className=\"text-sm text-gray-600\">{risk.description}</p>\n                        </div>\n                        <Badge className={`${risk.severity === 'high' ? 'bg-red-100 text-red-800' : risk.severity === 'medium' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'}`}>\n                          {risk.severity}\n                        </Badge>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"milestones\" className=\"mt-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Program Milestones ({programMilestones.length})</CardTitle>\n              </CardHeader>\n              <CardContent>\n                {programMilestones.length === 0 ? (\n                  <p className=\"text-gray-500 text-center py-8\">No milestones defined for this program.</p>\n                ) : (\n                  <div className=\"space-y-2\">\n                    {programMilestones.map((milestone) => (\n                      <div key={milestone.id} className=\"flex items-center justify-between p-3 border rounded\">\n                        <div>\n                          <h4 className=\"font-medium\">{milestone.title}</h4>\n                          <p className=\"text-sm text-gray-600\">{milestone.description}</p>\n                        </div>\n                        <Badge>{milestone.status}</Badge>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"dependencies\" className=\"mt-6\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Program Dependencies ({programDependencies.length})</CardTitle>\n              </CardHeader>\n              <CardContent>\n                {programDependencies.length === 0 ? (\n                  <p className=\"text-gray-500 text-center py-8\">No dependencies identified for this program.</p>\n                ) : (\n                  <div className=\"space-y-2\">\n                    {programDependencies.map((dependency) => (\n                      <div key={dependency.id} className=\"flex items-center justify-between p-3 border rounded\">\n                        <div>\n                          <h4 className=\"font-medium\">{dependency.title}</h4>\n                          <p className=\"text-sm text-gray-600\">{dependency.description}</p>\n                        </div>\n                        <Badge>{dependency.status}</Badge>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </main>\n    </div>\n  );\n}","size_bytes":58462},"client/src/lib/healthCalculation.ts":{"content":"import type { Risk, Milestone, Dependency, Adopter } from \"@shared/schema\";\n\nexport interface HealthMetrics {\n  score: number;\n  status: string;\n  color: string;\n  breakdown: {\n    criticalRisks: number;\n    overdueMilestones: number;\n    blockedDependencies: number;\n    missingComponents: number;\n  };\n}\n\nexport interface HealthInputs {\n  risks: Risk[];\n  milestones: Milestone[];\n  dependencies: Dependency[];\n  adopters?: Adopter[];\n  missingComponents?: number;\n}\n\n/**\n * Centralized health calculation for program health scoring\n * Used consistently across Dashboard, Program Details, and Program Cards\n */\nexport function calculateProgramHealth(inputs: HealthInputs): HealthMetrics {\n  const { risks, milestones, dependencies, missingComponents = 0 } = inputs;\n  \n  // Count critical issues\n  const criticalRisks = risks.filter(r => r.severity === 'high' || r.severity === 'critical').length;\n  \n  const overdueMilestones = milestones.filter(m => {\n    if (!m.dueDate || m.status === 'completed') return false;\n    const dueDate = new Date(m.dueDate);\n    const today = new Date();\n    return dueDate < today;\n  }).length;\n  \n  const blockedDependencies = dependencies.filter(d => d.status === 'blocked').length;\n  \n  // Calculate health score (starts at 100, deduct points for issues)\n  let score = 100;\n  score -= criticalRisks * 15;        // Critical risks are major impact\n  score -= overdueMilestones * 12;    // Overdue milestones are serious\n  score -= blockedDependencies * 8;   // Blocked dependencies slow progress\n  score -= missingComponents * 5;     // Missing components affect completeness\n  \n  // Ensure score stays within bounds\n  score = Math.max(0, Math.min(100, score));\n  \n  // Determine status and color based on score\n  let status: string;\n  let color: string;\n  \n  if (score >= 80) {\n    status = 'Excellent';\n    color = 'text-green-600';\n  } else if (score >= 60) {\n    status = 'Good';\n    color = 'text-blue-600';\n  } else if (score >= 40) {\n    status = 'Fair';\n    color = 'text-yellow-600';\n  } else {\n    status = 'At Risk';\n    color = 'text-red-600';\n  }\n  \n  return {\n    score: Math.round(score),\n    status,\n    color,\n    breakdown: {\n      criticalRisks,\n      overdueMilestones,\n      blockedDependencies,\n      missingComponents\n    }\n  };\n}\n\n/**\n * Get health badge styling for UI components\n */\nexport function getHealthBadge(score: number) {\n  if (score >= 80) return { label: \"Excellent\", color: \"bg-green-100 text-green-800\" };\n  if (score >= 60) return { label: \"Good\", color: \"bg-blue-100 text-blue-800\" };\n  if (score >= 40) return { label: \"Fair\", color: \"bg-yellow-100 text-yellow-800\" };\n  return { label: \"At Risk\", color: \"bg-red-100 text-red-800\" };\n}\n\n/**\n * Get health progress bar color\n */\nexport function getHealthProgressColor(score: number): string {\n  if (score >= 80) return 'bg-green-500';\n  if (score >= 60) return 'bg-blue-500';\n  if (score >= 40) return 'bg-yellow-500';\n  return 'bg-red-500';\n}","size_bytes":2971}}}